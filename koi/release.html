<!DOCTYPE html><html lang="en"><head><title>Koi farm</title><style>:root{--a:#192F3E;--b:#6CB4A9;--c:#DEF6EA;--d:#A9DBD1;--e:#D5C28E;--f:#645154;--g:#402F31;--h:#BDD6E2;--i:#CCD0CF;--j:#FFFDEE;--k:#F6F6F6;--l:#E9ECEC;--m:#DEEEF6;--n:#9EA6BF;--o:#8EA451;--p:#657635;--q:#A09E7A;--r:#ECEAAC;--s:#E1E0C4;--t:#414345;--u:#D09838;--v:#C84B2F;--w:#BE6D42;--x:var(--s)}body{margin:0;overscroll-behavior:contain}#wrapper{position:fixed;width:100%;height:100%;overflow:hidden}#gui{pointer-events:none;position:absolute;left:0;top:0;width:100%;height:100%}#gui #cards{left:0;top:0;width:100%;height:100%}:root{--y:#967A74;--z:#242424;--A:#ffffff55;--B:250px;--C:350px;--D:2px;--E:12px;--F:-0.5}.card-shape{width:calc(var(--B) - 2 * var(--D));height:calc(var(--C) - 2 * var(--D));margin-left:calc(var(--B) * -.5);margin-top:calc(var(--C) * -.5);border-radius:var(--E)}.card{pointer-events:auto;cursor:pointer;position:absolute;background-color:var(--y);user-select:none;-webkit-tap-highlight-color:transparent;border:var(--D) solid var(--z)}#drop-target{position:absolute;left:50%;bottom:calc(var(--F) * var(--C));border:var(--D) dashed var(--z);background-color:var(--A);transition:.1s;transition-property:bottom}#drop-target.hidden{bottom:calc(-1 * var(--C))}:root{--G:#1D1D1D;--H:#BCA994;--I:#92806B;--J:#DED1BF;--K:0.5;--L:95%;--M:30;--N:64px;--O:12px}#book{pointer-events:auto;position:absolute;background-color:#8EA451;display:flex;align-items:center;transition:.5s ease;transition-property:top;box-shadow:0 0 var(--O) var(--G)}#book.hidden{top:-100%!important}#book #spine{width:0;margin-left:auto;margin-right:auto;position:relative}#book #spine .page{position:absolute;display:none;justify-content:space-evenly;align-items:center;flex-wrap:wrap}#book #spine .page .overlay{position:absolute;pointer-events:none;width:100%;height:100%;opacity:0}#book #spine .page .overlay.left{background-color:#fff}#book #spine .page .overlay.right{background-color:#000}#book #spine .page.visible{display:flex}#book #spine .page.left{right:0;background:linear-gradient(to right,var(--H) var(--L),var(--J));transform-origin:right}#book #spine .page.right{left:0;background:linear-gradient(to left,var(--H) var(--L),var(--I));transform-origin:left}#book #spine .page .slot{position:relative;user-select:none;background-color:#9D9D9D;border-radius:var(--E)}#book #spine .page .slot .card{margin:0;width:calc(100% - 2 * var(--D));height:calc(100% - 2 * var(--D))}:root{--P:#75A757;--Q:80px;--R:80px;--S:2px;--T:var(--z);--U:16px;--V:0.5}button{width:calc(var(--Q) - 2 * var(--S));height:calc(var(--R) - 2 * var(--S));border:var(--S) solid var(--T);cursor:pointer;pointer-events:auto;outline:0;background-color:var(--P)}#button-book{position:absolute;left:var(--U);top:var(--U)}.button-page{position:absolute}.button-page.left{left:calc(var(--Q) * var(--V) * -1)}.button-page.right{right:calc(var(--Q) * var(--V) * -1)}</style><meta charset="utf-8"><meta name="mobile-web-app-capable" content="yes"></head><body><div id="wrapper"><canvas id="renderer"></canvas><div id="gui"></div></div><script>var d;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function n(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ba(a){if(!(a instanceof Array)){a=n(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function fa(a,b){if(b){var c=ea;a=a.split(".");for(var e=0;e<a.length-1;e++){var f=a[e];f in c||(c[f]={});c=c[f]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}}fa("String.prototype.endsWith",function(a){return a?a:function(b,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.endsWith must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.endsWith must not be a regular expression");var e=this+"";b+="";void 0===c&&(c=e.length);c=Math.max(0,Math.min(c|0,e.length));for(var f=b.length;0<f&&0<c;)if(e[--c]!=b[--f])return!1;return 0>=f}});fa("Number.parseInt",function(a){return a||parseInt});fa("Number.parseFloat",function(a){return a||parseFloat});fa("Array.prototype.fill",function(a){return a?a:function(b,c,e){var f=this.length||0;0>c&&(c=Math.max(0,f+c));if(null==e||e>f)e=f;e=Number(e);0>e&&(e=Math.max(0,f+e));for(c=Number(c||0);c<e;c++)this[c]=b;return this}});fa("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});fa("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(f||"")+"_"+e++,f)}function c(f,g){this.fi=f;ca(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.fi};var e=0;return b});fa("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var e=ea[b[c]];"function"===typeof e&&"function"!=typeof e.prototype[a]&&ca(e.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(aa(this))}})}return a});function ha(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}function ia(a,b){a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e}fa("Array.prototype.values",function(a){return a?a:function(){return ia(this,function(b,c){return c})}});fa("Math.fround",function(a){if(a)return a;if("function"!==typeof Float32Array)return function(c){return c};var b=new Float32Array(1);return function(c){b[0]=c;return b[0]}});function ja(a){return getComputedStyle(document.body).getPropertyValue(a).trim()}function ka(a){a=ja(a);return a.endsWith("px")?Number.parseInt(a.substr(0,a.length-2)):-1}function p(a,b){this.fb=a;this.$c=b.length;this.elements=Array(this.$c);this.Qe=Array(this.$c).fill(null);this.playbackRate=1;for(a=0;a<this.$c;++a)this.elements[a]=new Audio(b[a]),this.elements[a].type="audio/ogg",this.elements[a].codecs="vorbis"}function la(a,b){b=a.context.createMediaElementSource(b);this.Th=a.context.createStereoPanner();this.Sh=a.createGainNode();b.connect(this.Th).connect(this.Sh).connect(a.context.destination)}p.prototype.play=function(a,b){a=void 0===a?0:a;b=void 0===b?1:b;if(!this.fb.Ed)return 0;for(var c=Math.floor(q(this.fb.random)*this.$c),e=0;e<this.$c;++e){if(this.elements[c].paused)return null===this.Qe[c]&&(this.Qe[c]=new la(this.fb,this.elements[c])),this.Qe[c].Th.pan.value=a,this.Qe[c].Sh.gain.value=b,1!==this.playbackRate&&(this.elements[c].playbackRate=this.playbackRate),this.elements[c].play(),this.elements[c].duration;++c===this.$c&&(c=0)}return 0};function pa(a){this.Id=1;this.effect=a;this.xa=0}pa.prototype.update=function(a){0>(this.xa-=a)&&0>(this.xa+=this.effect.play()-this.Id)&&(this.xa=0)};function qa(a,b,c,e){this.Id=a;this.start=b;this.body=c;this.end=e;this.xa=0;this.stopped=!1;this.ended=!0}qa.prototype.play=function(){this.ended=this.stopped=!1;this.xa=this.start.play()-this.Id};function ra(a){a.stopped=!1;a.ended=!1;a.xa=a.body.play()-a.Id}qa.prototype.stop=function(){this.stopped=!0};qa.prototype.update=function(a){!this.ended&&0>(this.xa-=a)&&(this.stopped?(this.end.play(),this.ended=!0):0>(this.xa=this.body.play()-this.Id)&&(this.xa=0))};function sa(a,b,c){this.interval=a;this.km=.5;this.Lm=b;this.effect=c;this.time=this.volume=this.pan=0}sa.prototype.update=function(a){if(0!==this.volume){if((this.time+=a)>this.interval){this.time-=this.interval;var b=this.Lm.g(this.volume);this.effect.playbackRate=b;this.effect.play(this.pan,this.volume)}0>(this.volume-=this.km*a)&&(this.volume=0)}};sa.prototype.set=function(a,b){this.pan=a;this.volume=Math.max(this.volume,b)};function ta(){var a=new ua;this.context=null;this.Ed=!1;this.random=a}ta.prototype.mk=.7;ta.prototype.Zg=.3;ta.prototype.He=function(){this.context||(this.context=new AudioContext,this.Ed=!0)};ta.prototype.createGainNode=function(){return this.context.createGain()};function va(a,b){return a.mk/(1-a.Zg)*Math.max(0,Math.abs(b)-a.Zg)*Math.sign(b)}function wa(){var a=ya;this.Kh=new p(a,u("audio/ogg/SFX_Splash_",10));this.Hh=new p(a,u("audio/ogg/SFX_WaterImpact_",6));this.Jh=new p(a,u("audio/ogg/SFX_SmallFishMove_",5));this.Ih=new p(a,u("audio/ogg/SFX_BigFishMove_",8));this.Lh=new p(a,u("audio/ogg/SFX_WindGust_",5));this.Cf=new sa(za.prototype.ra,new v(.7,1.4,.5),new p(a,u("audio/ogg/SFX_GrassInteract_",22)));this.Xl=new pa(new p(a,u("audio/ogg/AMB_WaterTop_",6)));this.Wl=new pa(new p(a,u("audio/ogg/AMB_WaterLow_",4)));this.Yl=new pa(new p(a,["audio/ogg/AMB_Wind.ogg","audio/ogg/AMB_Wind.ogg"]));this.Ul=new p(a,u("audio/ogg/AMB_EnvironmentOneShot_",28));this.Vl=new p(a,u("audio/ogg/AMB_Thunder_",4));this.re=new qa(2,new p(a,["audio/ogg/AMB_RainLight_Start.ogg"]),new p(a,["audio/ogg/AMB_RainLight_Loop.ogg","audio/ogg/AMB_RainLight_Loop.ogg"]),new p(a,["audio/ogg/AMB_RainLight_Stop.ogg"]));this.qe=new qa(2,new p(a,["audio/ogg/AMB_Rain_Start.ogg"]),new p(a,["audio/ogg/AMB_Rain_Loop.ogg","audio/ogg/AMB_Rain_Loop.ogg"]),new p(a,["audio/ogg/AMB_Rain_Stop.ogg"]));this.pe=[new qa(3,new p(a,["audio/ogg/AMB_CricketsA_Start.ogg"]),new p(a,u("audio/ogg/AMB_CricketsA_Loop_",4)),new p(a,["audio/ogg/AMB_CricketsA_Stop.ogg"])),new qa(3,new p(a,["audio/ogg/AMB_CricketsB_Start.ogg"]),new p(a,u("audio/ogg/AMB_CricketsB_Loop_",4)),new p(a,["audio/ogg/AMB_CricketsB_Stop.ogg"])),new qa(3,new p(a,["audio/ogg/AMB_CricketsC_Start.ogg"]),new p(a,u("audio/ogg/AMB_CricketsC_Loop_",4)),new p(a,["audio/ogg/AMB_CricketsC_Stop.ogg"])),new qa(3,new p(a,["audio/ogg/AMB_CricketsD_Start.ogg"]),new p(a,u("audio/ogg/AMB_CricketsD_Loop_",4)),new p(a,["audio/ogg/AMB_CricketsD_Stop.ogg"]))]}function u(a,b){var c=void 0===c?2:c;for(var e=[],f=1;f<=b;++f){for(var g=f.toString();g.length<c;)g="0"+g;e.push(a+g+".ogg")}return e}function x(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b}d=x.prototype;d.m=function(a){Da(a,this.x);Da(a,this.y)};d.O=function(a){this.x=Ea(a);this.y=Ea(a);return this};d.F=function(){return new x(this.x,this.y)};d.set=function(a){this.x=a.x;this.y=a.y;return this};d.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};d.add=function(a){this.x+=a.x;this.y+=a.y;return this};function Fa(a,b){a.x-=b.x;a.y-=b.y;return a}d.multiply=function(a){this.x*=a;this.y*=a;return this};d.Ec=function(a){return this.multiply(1/a)};d.wd=function(a){return this.x*a.x+this.y*a.y};d.length=function(){return Math.sqrt(this.wd(this))};d.normalize=function(){var a=this.length();if(0!==a)return this.Ec(a);this.x=1;this.y=0;return this};d.angle=function(){return Math.atan2(this.y,this.x)};d.Mh=function(a){return this.x===a.x&&this.y===a.y};function La(a,b){a.x=Math.cos(b);a.y=Math.sin(b);return a}function Ma(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c}d=Ma.prototype;d.uh=new Ma(0,1,0);d.Dl=new Ma(.1,1,0);d.m=function(a){Da(a,this.x);Da(a,this.y);Da(a,this.z)};d.O=function(a){this.x=Ea(a);this.y=Ea(a);this.z=Ea(a);return this};d.F=function(){return new Ma(this.x,this.y,this.z)};d.za=function(a,b){return new Ma(this.x+(a.x-this.x)*b,this.y+(a.y-this.y)*b,this.z+(a.z-this.z)*b)};function Na(a){return a.Mh(a.uh)?Oa(a,a.Dl).normalize():Oa(a,a.uh).normalize()}d.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};d.multiply=function(a){this.x*=a;this.y*=a;this.z*=a;return this};d.Ec=function(a){return this.multiply(1/a)};d.wd=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};d.length=function(){return Math.sqrt(this.wd(this))};d.Mh=function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z};d.normalize=function(){var a=this.length();if(0!==a)return this.Ec(a);this.x=1;this.y=this.z=0;return this};function Oa(a,b){return new Ma(a.y*b.z-b.y*a.z,a.z*b.x-b.z*a.x,a.x*b.y-b.x*a.y)}function Pa(a){var b=new Ma,c=Math.acos(2*q(a)-1)-.5*Math.PI;a=2*Math.PI*q(a);b.x=Math.cos(c)*Math.cos(a);b.y=Math.cos(c)*Math.sin(a);b.z=Math.sin(c);return b}function Va(a,b,c,e){this.r=a;this.C=b;this.B=c;this.Qb=void 0===e?1:e}var Wa=new Va(1,1,1);Va.prototype.F=function(){return new Va(this.r,this.C,this.B,this.Qb)};Va.prototype.multiply=function(a){this.r*=a;this.C*=a;this.B*=a;this.Qb*=a;return this};function Xa(a){return[a.r,a.C,a.B]}function z(a){a=ja(a);if("#"===a.charAt(0))return a=parseInt(a.substr(1),16),a&4278190080?new Va((a>>24&255)/255,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255):new Va((a>>16&255)/255,(a>>8&255)/255,(a&255)/255)}function C(a,b,c,e,f,g){g=void 0===g?null:g;var h=a.createShader(a.VERTEX_SHADER),k=a.createShader(a.FRAGMENT_SHADER);this.a=a;this.f=a.createProgram();a.shaderSource(h,b);a.compileShader(h);a.shaderSource(k,c);a.compileShader(k);a.attachShader(this.f,h);a.attachShader(this.f,k);a.linkProgram(this.f);a.detachShader(this.f,h);a.detachShader(this.f,k);a.deleteShader(h);a.deleteShader(k);b=n(f);for(c=b.next();!c.done;c=b.next())c=c.value,this["u"+c.charAt(0).toUpperCase()+c.slice(1)]=a.getUniformLocation(this.f,c);e=n(e);for(b=e.next();!b.done;b=e.next())b=b.value,this["a"+b.charAt(0).toUpperCase()+b.slice(1)]=a.getAttribLocation(this.f,b);if(g)for(this.use(),g=n(g),e=g.next();!e.done;e=g.next())e=e.value,a["uniform"+e.values.length.toString()+e.type].apply(a,[a.getUniformLocation(this.f,e.name)].concat(ba(e.values)))}function D(a,b,c){this.name=a;this.type=b;this.values=c}C.prototype.use=function(){this.a.useProgram(this.f)};C.prototype.c=function(){this.a.deleteProgram(this.f)};function Ya(a,b){this.slot=a;this.va=a.y;this.ua=this.slot.y+b.y;this.Xc=a.x;this.nb=this.Wc=a.x+b.x;this.Jb=this.Wc+b.x/Za.prototype.Na}function $a(a,b,c){b=Math.ceil(b*this.na);c=Math.ceil(c*this.na);this.a=a;this.kb=new E(a,b,c,a.RGBA,!1);this.Ph=new E(a,b,c,a.RGBA,!1)}$a.prototype.na=26;$a.prototype.target=function(){this.kb.target();this.a.clearColor(0,0,0,0);this.a.clear(this.a.COLOR_BUFFER_BIT)};$a.prototype.blur=function(a){var b=this.kb,c=this.Ph;c.target();a.jc.use();a.a.b.bindVertexArrayOES(a.hg);a.a.uniform2f(a.jc.uTargetSize,b.width,b.height);a.a.uniform2f(a.jc.uDirection,1,0);a.a.activeTexture(a.a.TEXTURE0);a.a.bindTexture(a.a.TEXTURE_2D,b.L);a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MIN_FILTER,a.a.NEAREST);a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MAG_FILTER,a.a.NEAREST);ab(a);b.target();a.a.uniform2f(a.jc.uDirection,0,1);a.a.bindTexture(a.a.TEXTURE_2D,c.L);a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MIN_FILTER,a.a.NEAREST);a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MAG_FILTER,a.a.NEAREST);ab(a)};$a.prototype.c=function(){this.kb.c();this.Ph.c()};function E(a,b,c,e,f,g){this.a=a;this.width=b;this.height=c;this.Be=a.createFramebuffer();this.L=this.createTexture(b,c,e,f,void 0===g?null:g);f?(a=this.a.createRenderbuffer(),this.a.bindRenderbuffer(this.a.RENDERBUFFER,a),this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,b,c),b=a):b=null;this.depth=b;b=this.L;c=this.depth;this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.Be);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,b,0);null!==c&&this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,c)}E.prototype.target=function(){this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.Be);this.a.viewport(0,0,this.width,this.height)};E.prototype.createTexture=function(a,b,c,e,f){e=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,e);null!==f&&(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,f),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,f));this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE);this.a.texImage2D(this.a.TEXTURE_2D,0,c,a,b,0,c,this.a.UNSIGNED_BYTE,null);return e};function bb(a){a.a.deleteFramebuffer(a.Be);null!==a.depth&&a.a.deleteRenderbuffer(a.depth);return a.L}E.prototype.c=function(){this.a.deleteFramebuffer(this.Be);this.a.deleteTexture(this.L);null!==this.depth&&this.a.deleteRenderbuffer(this.depth)};function cb(a,b,c,e,f,g,h){this.Cb=0;this.width=Math.ceil(c*f);this.height=Math.ceil(e*f);this.Ua=new db(b.a,b.f,this.width,this.height,f);this.P=[new E(a,this.width,this.height,h,!1,a.NEAREST),new E(a,this.width,this.height,h,!1,a.NEAREST)];a.clearColor(g.r,g.C,g.B,g.Qb);b=n(this.P);for(c=b.next();!c.done;c=b.next())c.value.target(),a.clear(a.COLOR_BUFFER_BIT)}cb.prototype.Ia=function(){this.Cb=1-this.Cb};cb.prototype.c=function(){for(var a=n(this.P),b=a.next();!b.done;b=a.next())b.value.c();this.Ua.c()};function eb(a,b,c,e){cb.call(this,a,b,c,e,this.na,new Va(.5,.5,0),a.RGB)}eb.prototype=Object.create(cb.prototype);eb.prototype.na=17;eb.prototype.ab=function(a,b,c,e){this.Ua.ab(a,b,c,0,0,e)};function fb(a,b,c,e,f){cb.call(this,a,b,c,e,this.na,new Va(.5,0,0,.5),a.RGBA);this.a=a;this.Tc=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.Tc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.pixelStorei(a.UNPACK_ALIGNMENT,1);a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,this.width,this.height,0,a.LUMINANCE,a.UNSIGNED_BYTE,new Uint8Array(gb(this,this.width*this.height,f)));a.pixelStorei(a.UNPACK_ALIGNMENT,4)}fb.prototype=Object.create(cb.prototype);fb.prototype.na=4;fb.prototype.ph=.2;fb.prototype.rl=.4;function gb(a,b,c){for(var e=Array(b),f=0;f<b;++f)e[f]=Math.floor(256*(a.ph+(a.rl-a.ph)*q(c)));return e}fb.prototype.c=function(){cb.prototype.c.call(this);this.a.deleteTexture(this.Tc)};function hb(a,b,c,e,f,g,h,k,l){g=void 0===g?null:g;h=void 0===h?null:h;k=void 0===k?null:k;l=void 0===l?null:l;this.width=a;this.height=b;this.cn=c;this.ea=[];b=n(e);for(a=b.next();!a.done;a=b.next())this.ea.push(a.value|this.Og);f=n(f);for(a=f.next();!a.done;a=f.next())this.ea.push(a.value|this.Pg);if(g)for(g=n(g),a=g.next();!a.done;a=g.next())this.ea.push(a.value|this.Mg);if(h)for(h=n(h),a=h.next();!a.done;a=h.next())this.ea.push(a.value|this.Ng);if(k)for(k=n(k),a=k.next();!a.done;a=k.next())this.ea.push(a.value|this.Qg);if(l)for(l=n(l),a=l.next();!a.done;a=l.next())this.ea.push(a.value|this.Rg);this.ea.sort(function(m,w){return(m&255)-(w&255)})}d=hb.prototype;d.Og=256;d.Pg=512;d.Mg=1024;d.Ng=2048;d.Qg=4096;d.Rg=8192;d.apply=function(a){for(var b=a.length,c=2/this.width,e=-2/this.height,f=1/this.width,g=1/this.height,h=0;h<b;h+=this.cn)for(var k=n(this.ea),l=k.next();!l.done;l=k.next()){l=l.value;var m=l&255;switch(l&65280){case this.Og:a[h+m]=a[h+m]*c-1;break;case this.Pg:a[h+m]=a[h+m]*e+1;break;case this.Mg:a[h+m]*=c;break;case this.Ng:a[h+m]*=e;break;case this.Qg:a[h+m]*=f;break;case this.Rg:a[h+m]*=g}}};function ib(a,b){a=void 0===a?[]:a;b=void 0===b?[]:b;this.Ma=a;this.ea=b}function jb(a,b,c){c=void 0===c?!1:c;this.a=a;this.Ge=c?a.UNSIGNED_INT:a.UNSIGNED_SHORT;this.Ma=a.createBuffer();this.ea=a.createBuffer();this.ze=b.ea.length;a.b.bindVertexArrayOES(null);a.bindBuffer(a.ARRAY_BUFFER,this.Ma);a.bufferData(a.ARRAY_BUFFER,new Float32Array(b.Ma),a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.ea);c?a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint32Array(b.ea),a.STATIC_DRAW):a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(b.ea),a.STATIC_DRAW)}jb.prototype.c=function(){this.a.deleteBuffer(this.Ma);this.a.deleteBuffer(this.ea)};function G(a,b){this.a=a;this.dn=b;this.hb=null;this.Ge=this.ze=-1}function mb(a,b){this.b=a;this.$l=b}mb.prototype.zb=function(a,b){a.b.bindVertexArrayOES(this.b);b.a.bindBuffer(b.a.ARRAY_BUFFER,b.Ma);b.a.bindBuffer(b.a.ELEMENT_ARRAY_BUFFER,b.ea);this.$l()};G.prototype.$a=function(a){this.ze=a.ze;this.Ge=a.Ge;for(var b=n(this.dn),c=b.next();!c.done;c=b.next())c.value.zb(this.a,a)};function ab(a){a.a.drawElements(a.a.TRIANGLES,a.ze,a.Ge,0)}function nb(a,b){this.a=a;this.om=1/b;this.Ah=a.createBuffer();this.yh=a.createBuffer();this.gg=this.zh=this.Bh=0;this.Da=this.Ea=this.Kb;this.vf=this.wf=this.Oa=this.Tb=0;this.Sb=new Float32Array(this.Ea);this.Rb=new Uint16Array(this.Da)}d=nb.prototype;d.Kb=512;d.lh=nb.prototype.Kb<<2;d.mh=16;d.xb=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=b.length;if(this.Tb+c>this.Ea){var e=this.Sb;this.Ea+=this.Kb;this.Sb=new Float32Array(this.Ea);this.Sb.set(e,0)}this.Sb.set(b,this.Tb);this.Tb+=c};d.wa=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=b.length;if(this.Oa+c>this.Da){var e=this.Rb;this.Da+=this.Kb;this.Rb=new Uint16Array(this.Da);this.Rb.set(e,0)}this.Rb.set(b,this.Oa);this.Oa+=c};d.Gc=function(){return this.Tb*this.om};d.bind=function(){this.a.bindBuffer(this.a.ARRAY_BUFFER,this.Ah);this.a.bindBuffer(this.a.ELEMENT_ARRAY_BUFFER,this.yh)};d.upload=function(){this.gg=this.Oa;0!==this.Oa&&(this.bind(),this.Ea>this.Bh?(this.a.bufferData(this.a.ARRAY_BUFFER,this.Sb,this.a.DYNAMIC_DRAW),this.Bh=this.Ea):this.a.bufferSubData(this.a.ARRAY_BUFFER,0,this.Sb),this.Da>this.zh?(this.a.bufferData(this.a.ELEMENT_ARRAY_BUFFER,this.Rb,this.a.DYNAMIC_DRAW),this.zh=this.Da):this.a.bufferSubData(this.a.ELEMENT_ARRAY_BUFFER,0,this.Rb),this.Ea>this.Tb+this.lh?++this.wf===this.mh&&(this.Ea-=this.Kb,this.Sb=new Float32Array(this.Ea),this.wf=0):this.wf=0,this.Da>this.Oa+this.lh?++this.vf===this.mh&&(this.Da-=this.Kb,this.Rb=new Uint16Array(this.Da),this.vf=0):this.vf=0,this.Tb=this.Oa=0)};d.v=function(){0!==this.gg&&this.a.drawElements(this.a.TRIANGLES,this.gg,this.a.UNSIGNED_SHORT,0)};d.c=function(){this.a.deleteBuffer(this.Ah);this.a.deleteBuffer(this.yh)};function ob(a,b){this.a=a;this.L=this.createTexture(b)}ob.prototype.me=128;ob.prototype.createTexture=function(a){for(var b=this.a.createTexture(),c=Array(this.me*this.me),e=0;e<c.length;++e)c[e]=Math.floor(256*q(a));this.a.bindTexture(this.a.TEXTURE_2D,b);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.REPEAT);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.REPEAT);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.LUMINANCE,this.me,this.me,0,this.a.LUMINANCE,this.a.UNSIGNED_BYTE,new Uint8Array(c));return b};ob.prototype.c=function(){this.a.deleteTexture(this.L)};function pb(a,b,c,e,f,g,h,k){this.a=a;a=Math.ceil(b*this.na);b=Math.ceil(c*this.na);c=new E(this.a,a,b,this.a.RGBA,!0);a=new E(this.a,a,b,this.a.RGBA,!0);c.target();this.a.clearColor(this.be.r,this.be.C,this.be.B,this.be.Qb);this.a.clear(this.a.COLOR_BUFFER_BIT);this.a.enable(this.a.DEPTH_TEST);qb(f);qb(g);this.a.disable(this.a.DEPTH_TEST);a.target();h.kc.use();h.a.b.bindVertexArrayOES(h.ig);h.a.uniform2f(h.kc.uTargetSize,c.width,c.height);h.a.uniform2f(h.kc.uDirection,1,0);h.a.activeTexture(h.a.TEXTURE0);h.a.bindTexture(h.a.TEXTURE_2D,c.L);h.a.texParameteri(h.a.TEXTURE_2D,h.a.TEXTURE_MIN_FILTER,h.a.NEAREST);h.a.texParameteri(h.a.TEXTURE_2D,h.a.TEXTURE_MAG_FILTER,h.a.NEAREST);h.a.drawArrays(h.a.TRIANGLE_FAN,0,4);c.target();h.a.uniform2f(h.kc.uDirection,0,1);h.a.bindTexture(h.a.TEXTURE_2D,a.L);h.a.texParameteri(h.a.TEXTURE_2D,h.a.TEXTURE_MIN_FILTER,h.a.NEAREST);h.a.texParameteri(h.a.TEXTURE_2D,h.a.TEXTURE_MAG_FILTER,h.a.NEAREST);h.a.drawArrays(h.a.TRIANGLE_FAN,0,4);this.a.enable(this.a.BLEND);this.a.blendFunc(this.a.ZERO,this.a.SRC_COLOR);k.v(e.L);this.a.disable(this.a.BLEND);this.a.bindTexture(this.a.TEXTURE_2D,c.L);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR);a.c();this.L=bb(c)}pb.prototype.na=17;pb.prototype.be=z("--h");pb.prototype.c=function(){this.a.deleteTexture(this.L)};function rb(a,b,c,e,f,g){this.a=a;a=Math.ceil(b*this.na);b=Math.ceil(c*this.na);c=new E(this.a,a,b,this.a.RGBA,!1,this.a.LINEAR);c.target();this.a.clearColor(0,0,0,0);this.a.clear(this.a.COLOR_BUFFER_BIT);var h=this.kj;f.Ld.use();f.a.b.bindVertexArrayOES(f.jg);f.a.uniform4f(f.Ld.uColor,h.r,h.C,h.B,h.Qb);ab(f);f=this.lj;e.ib.use();e.a.b.bindVertexArrayOES(e.Yc);e.a.uniform4f(e.ib.uColor,f.r,f.C,f.B,f.Qb);ab(e);e=c.L;f=Math.round(this.na*this.vb);h=[new E(g.a,a,b,g.a.RGBA,!1,g.a.NEAREST),new E(g.a,a,b,g.a.RGBA,!1,g.a.NEAREST)];var k=0;g.f.use();g.a.b.bindVertexArrayOES(g.b);g.a.uniform2f(g.f.uSize,a,b);g.a.uniform1f(g.f.uRange,1/f);for(a=0;a<f;++a)h[k].target(),g.a.activeTexture(g.a.TEXTURE0),0===a?g.a.bindTexture(g.a.TEXTURE_2D,e):g.a.bindTexture(g.a.TEXTURE_2D,h[1-k].L),g.a.drawArrays(g.a.TRIANGLE_FAN,0,4),k=1-k;h[k].c();g.a.bindTexture(g.a.TEXTURE_2D,h[1-k].L);g.a.texParameteri(g.a.TEXTURE_2D,g.a.TEXTURE_MIN_FILTER,g.a.LINEAR);g.a.texParameteri(g.a.TEXTURE_2D,g.a.TEXTURE_MAG_FILTER,g.a.LINEAR);g=bb(h[1-k]);c.c();this.L=g}d=rb.prototype;d.na=pb.prototype.na;d.vb=.24;d.kj=new Va(1,1,1,1);d.lj=new Va(0,0,0,0);d.c=function(){this.a.deleteTexture(this.L)};function sb(a){this.f=new C(a,this.J,this.H,["position"],[])}sb.prototype.c=function(){this.f.c()};sb.prototype.J="#version 100\nattribute vec2 position;varying vec2 iUv;void main(){iUv=position*.5+.5;gl_Position=vec4(position,.0,1.);}";sb.prototype.H="#version 100\nuniform sampler2D source;varying mediump vec2 iUv;void main(){gl_FragColor=texture2D(source,iUv);}";function Za(a,b){var c=za.prototype.bf;this.a=a;this.Oc=b;this.ag=new x;this.xf=null;a=Math.ceil(Math.sqrt(Math.ceil(c/(this.Na+1))));b=a*this.M*(this.Na+1);c=new E(this.a,b,b,this.a.RGBA,!1,this.a.LINEAR);this.ag.x=this.M*this.Na/b;this.ag.y=this.M/b;this.xf=this.Af(a,b,b);this.kb=c}d=Za.prototype;d.M=64;d.Na=4;d.Af=function(a,b,c){for(var e=[],f=0;f<a;++f)for(var g=0;g<a;++g)for(var h=0;h<=this.Na;++h)e.push(new x(g*(this.Na+1)*this.M/b,(f*(this.Na+1)+h)*this.M/c));return e};d.write=function(a,b){a.region=new Ya(this.xf.pop(),this.ag);this.kb.target();this.Oc.write(a,b,a.region,1/this.kb.width)};d.c=function(){this.kb.c()};function tb(a){var b=this;this.f=new C(a,this.VERTEX_SHADER,this.FRAGMENT_SHADER,["position","depth"],["meter"],[new D("shadowDepth","f",[this.cl])]);this.b=a.b.createVertexArrayOES();G.call(this,a,[new mb(this.b,function(){a.enableVertexAttribArray(b.f.aPosition);a.vertexAttribPointer(b.f.aPosition,2,a.FLOAT,!1,16,0);a.enableVertexAttribArray(b.f.aDepth);a.vertexAttribPointer(b.f.aDepth,2,a.FLOAT,!1,16,8)})])}tb.prototype=Object.create(G.prototype);d=tb.prototype;d.VERTEX_SHADER="#version 100\nattribute vec2 position;attribute vec2 depth;varying vec2 iDepth;varying vec2 iUv;void main(){iDepth=depth;iUv=.5*position+.5;gl_Position=vec4(position,.0,1.);}";d.FRAGMENT_SHADER="#version 100\nuniform sampler2D source;uniform mediump float meter;uniform mediump float shadowDepth;varying mediump vec2 iDepth;varying mediump vec2 iUv;void main(){mediump float depthFactor=iDepth.y*(.5-.5*cos(3.141592*sqrt(iDepth.x)));mediump float depth=depthFactor*meter*shadowDepth;gl_FragColor=texture2D(source,iUv+vec2(depth*.5,depth));}";d.cl=.35;d.v=function(a,b,c){this.f.use();this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,a.kb.L);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR);this.a.uniform1f(this.f.uMeter,c/b);this.a.b.bindVertexArrayOES(this.b);this.a.enable(this.a.BLEND);this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA);ab(this);this.a.disable(this.a.BLEND)};d.c=function(){this.f.c();this.a.b.deleteVertexArrayOES(this.b)};function ub(a){this.a=a;this.buffer=a.createBuffer();this.ib=vb.prototype.createShader(a);this.Yc=wb(this,a,this.ib);this.Of=xb.prototype.createShader(a);this.bi=wb(this,a,this.Of);this.Lf=yb.prototype.createShader(a);this.Yh=wb(this,a,this.Lf);this.Pf=zb.prototype.createShader(a);this.ci=wb(this,a,this.Pf);this.Mf=Ab.prototype.createShader(a);this.$h=wb(this,a,this.Mf);this.Nf=Bb.prototype.createShader(a);this.ai=wb(this,a,this.Nf);this.Kf=new Fb;a.bindBuffer(a.ARRAY_BUFFER,this.buffer);a.bufferData(a.ARRAY_BUFFER,64,a.DYNAMIC_DRAW)}function wb(a,b,c){var e=b.b.createVertexArrayOES();b.b.bindVertexArrayOES(e);b.bindBuffer(b.ARRAY_BUFFER,a.buffer);b.enableVertexAttribArray(c.aPosition);b.vertexAttribPointer(c.aPosition,2,b.FLOAT,!1,16,0);void 0!==c.aUv&&(b.enableVertexAttribArray(c.aUv),b.vertexAttribPointer(c.aUv,2,b.FLOAT,!1,16,8));return e}function Gb(a,b,c,e,f){f=void 0===f?null:f;c.use();b.zb(a.a,c,f);a.a.b.bindVertexArrayOES(e);void 0!==c.uSize&&a.a.uniform2f(c.uSize,Za.prototype.Na,1);a.a.drawArrays(a.a.TRIANGLE_FAN,0,4)}ub.prototype.write=function(a,b,c,e){var f=new Hb(this.Kf.Fa);this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,b.L);this.a.b.bindVertexArrayOES(this.b);this.a.bindBuffer(this.a.ARRAY_BUFFER,this.buffer);this.a.bufferSubData(this.a.ARRAY_BUFFER,0,new Float32Array([2*(c.Xc+e)-1,2*(c.va+e)-1,0,0,2*(c.Xc+e)-1,2*(c.ua-e)-1,0,1,2*(c.Jb-e)-1,2*(c.ua-e)-1,1,1,2*(c.Jb-e)-1,2*(c.va+e)-1,1,0]));Gb(this,a.Fa,this.ib,this.Yc,f.next(a.Fa));this.a.bufferSubData(this.a.ARRAY_BUFFER,0,new Float32Array([2*(c.Xc+e)-1,2*(c.va+e)-1,0,0,2*(c.Xc+e)-1,2*(c.ua-e)-1,0,1,2*c.Wc-1,2*(c.ua-e)-1,1,1,2*c.Wc-1,2*(c.va+e)-1,1,0]));this.a.enable(this.a.BLEND);this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA);b=n(a.Wa);for(var g=b.next();!g.done;g=b.next()){g=g.value;var h=f.next(g);if(!h)break;switch(g.id){case xb.prototype.Z:Gb(this,g,this.Of,this.bi,h);break;case yb.prototype.Z:Gb(this,g,this.Lf,this.Yh,h);break;case zb.prototype.Z:Gb(this,g,this.Pf,this.ci,h)}}this.a.blendFunc(this.a.ZERO,this.a.SRC_COLOR);Gb(this,a.Gb,this.Mf,this.$h);this.a.bufferSubData(this.a.ARRAY_BUFFER,0,new Float32Array([2*c.nb-1,2*(c.va+e)-1,0,0,2*c.nb-1,2*(c.ua-e)-1,0,1,2*(c.Jb-e)-1,2*(c.ua-e)-1,1,1,2*(c.Jb-e)-1,2*(c.va+e)-1,1,0]));Gb(this,a.Qd,this.Nf,this.ai);this.a.disable(this.a.BLEND)};ub.prototype.c=function(){this.ib.c();this.a.b.deleteVertexArrayOES(this.Yc);this.Of.c();this.a.b.deleteVertexArrayOES(this.bi);this.Lf.c();this.a.b.deleteVertexArrayOES(this.Yh);this.Pf.c();this.a.b.deleteVertexArrayOES(this.ci);this.Mf.c();this.a.b.deleteVertexArrayOES(this.$h);this.Nf.c();this.a.b.deleteVertexArrayOES(this.ai);this.a.deleteBuffer(this.buffer)};function Ib(a){var b=this;this.f=new C(a,this.J,this.H,["position","depth"],["scale"],[new D("colorDeep","f",Xa(this.cj)),new D("colorShallow","f",Xa(this.jj))]);this.b=a.b.createVertexArrayOES();G.call(this,a,[new mb(this.b,function(){a.enableVertexAttribArray(b.f.aPosition);a.vertexAttribPointer(b.f.aPosition,2,a.FLOAT,!1,16,0);a.enableVertexAttribArray(b.f.aDepth);a.vertexAttribPointer(b.f.aDepth,2,a.FLOAT,!1,16,8)})])}Ib.prototype=Object.create(G.prototype);d=Ib.prototype;d.cj=z("--a");d.jj=z("--b");d.J="#version 100\nattribute vec2 position;attribute vec2 depth;varying vec2 iDepth;void main(){iDepth=depth;gl_Position=vec4(position,.0,1.);}";d.H="#version 100\n uniform sampler2D noise;mediump float random2(mediump vec2 x){return texture2D(noise,x*.011).r;}mediump float random3(mediump vec3 x){return texture2D(noise,x.xy*.011-x.z*.017).r;}mediump float interpolate(mediump float a,mediump float b,mediump float c,mediump float d,mediump float x){mediump float p=(d-c)-(a-b);return x*(x*(x*p+((a-b)-p))+(c-a))+b;}mediump float sampleX(highp vec2 at){highp float floored=floor(at.x);return interpolate(random2(vec2(floored-1.,at.y)),random2(vec2(floored,at.y)),random2(vec2(floored+1.,at.y)),random2(vec2(floored+2.,at.y)),at.x-floored)*.5+.25;}mediump float cubicNoise(highp vec2 at){highp float floored=floor(at.y);return interpolate(sampleX(vec2(at.x,floored-1.)),sampleX(vec2(at.x,floored)),sampleX(vec2(at.x,floored+1.)),sampleX(vec2(at.x,floored+2.)),at.y-floored);}uniform mediump float scale;uniform lowp vec3 colorDeep;uniform lowp vec3 colorShallow;varying mediump vec2 iDepth;void main(){lowp float noise=pow(random2(gl_FragCoord.xy),9.);lowp float hill=cubicNoise(1.5*gl_FragCoord.xy/scale);lowp vec3 color=mix(colorShallow,colorDeep,iDepth.y*(.5-.5*cos(3.141592*sqrt(iDepth.x))));gl_FragColor=vec4(color*(noise*.3*hill+.85),1.);}";d.write=function(a,b){this.f.use();this.a.b.bindVertexArrayOES(this.b);this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,a.L);this.a.uniform1f(this.f.uScale,b);ab(this)};d.c=function(){this.a.b.deleteVertexArrayOES(this.b);this.f.c()};function Jb(a){var b=this;this.f=new C(a,this.J,this.H,["position"],["size"],[new D("damping","f",[this.af])]);this.b=a.b.createVertexArrayOES();G.call(this,a,[new mb(this.b,function(){a.enableVertexAttribArray(b.f.aPosition);a.vertexAttribPointer(b.f.aPosition,2,a.FLOAT,!1,8,0)})])}Jb.prototype=Object.create(G.prototype);d=Jb.prototype;d.af=.997;d.J="#version 100\nattribute vec2 position;varying vec2 iUv;void main(){iUv=.5*position+.5;gl_Position=vec4(position,.0,1.);}";d.H="#version 100\nuniform sampler2D source;uniform mediump vec2 size;uniform mediump float damping;varying mediump vec2 iUv;void main(){mediump vec2 step=1./size;mediump vec3 state=texture2D(source,iUv).rgb;mediump float hLeft=texture2D(source,vec2(iUv.x-step.x,iUv.y)).r;mediump float hRight=texture2D(source,vec2(iUv.x+step.x,iUv.y)).r;mediump float hUp=texture2D(source,vec2(iUv.x,iUv.y-step.y)).r;mediump float hDown=texture2D(source,vec2(iUv.x,iUv.y+step.y)).r;mediump float momentum=(state.g+state.b)*2.-1.;mediump float newHeight=(hLeft+hUp+hRight+hDown)-2.;gl_FragColor=vec4(((newHeight-momentum)*damping)*.5+.5,state.r,.0,.0);}";d.Qf=function(a,b){this.f.use();this.a.b.bindVertexArrayOES(this.b);a.Ia();a.P[a.Cb].target();this.a.clearColor(.5,.5,0,0);this.a.clear(this.a.COLOR_BUFFER_BIT);this.a.uniform2f(this.f.uSize,a.width,a.height);this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,a.P[1-a.Cb].L);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST);ab(this);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR);Kb(b,a.Ua)};d.c=function(){this.f.c();this.a.b.deleteVertexArrayOES(this.b)};function Lb(a){var b=this;this.f=new C(a,this.J,this.H,["position"],"depth height size waterSize wavePhase phase time filter".split(" "),[new D("background","i",[0]),new D("reflections","i",[1]),new D("water","i",[2]),new D("colorFilter","f",Xa(this.dj)),new D("colorHighlight","f",Xa(this.ij))]);this.Ld=new C(a,this.$k,this.Uk,["position"],["color"]);this.b=a.b.createVertexArrayOES();this.jg=a.b.createVertexArrayOES();this.filter=Wa;G.call(this,a,[new mb(this.b,function(){a.enableVertexAttribArray(b.f.aPosition);a.vertexAttribPointer(b.f.aPosition,2,a.FLOAT,!1,8,0)}),new mb(this.jg,function(){a.enableVertexAttribArray(b.Ld.aPosition);a.vertexAttribPointer(b.Ld.aPosition,2,a.FLOAT,!1,8,0)})])}Lb.prototype=Object.create(G.prototype);d=Lb.prototype;d.DEPTH=.2;d.la=.24;d.vh=2.4;d.dj=z("--c");d.ij=z("--d");d.J="#version 100\nattribute vec2 position;varying vec2 iUv;void main(){iUv=.5*position+.5;gl_Position=vec4(position,iUv.y,1.);}";d.$k="#version 100\nattribute vec2 position;void main(){gl_Position=vec4(position,.0,1.);}";d.H="#version 100\nuniform sampler2D background;uniform sampler2D reflections;uniform sampler2D water;uniform sampler2D random;uniform lowp vec3 colorFilter;uniform lowp vec3 colorHighlight;uniform lowp vec2 size;uniform lowp vec2 wavePhase;uniform lowp float depth;uniform lowp float height;uniform lowp vec2 waterSize;uniform lowp float phase;uniform lowp float time;uniform lowp vec3 filter;varying lowp vec2 iUv;lowp float get(mediump vec2 delta){lowp vec2 uv=iUv+delta/waterSize;lowp vec2 sample=texture2D(water,uv).gr;return(mix(sample.x,sample.y,time)-.5)*3.7;}void main(){lowp float dyx=get(vec2(1.,.0))-get(vec2(-1.,.0));lowp float dyz=get(vec2(.0,1.))-get(vec2(.0,-1.));lowp vec3 normal=cross(normalize(vec3(2.,dyx,.0)),normalize(vec3(.0,dyz,2.)));lowp vec3 pixel=texture2D(background,iUv-depth*normal.xz/size).rgb;lowp vec4 reflected=texture2D(reflections,iUv+height*normal.xz/size);lowp float shoreDistance=reflected.a;lowp float shift=sin(iUv.x*wavePhase.x*6.283185)*sin(iUv.y*wavePhase.y*6.283185)*sin(6.283185*phase+iUv.x*wavePhase.x*3.141592-iUv.y*wavePhase.y*1.256637);lowp float wave=max(cos(shift*6.+phase*25.132741-shoreDistance*6.)*.38+.58,(normal.x+normal.z)*2.+.3);lowp float overhead=wave-shoreDistance;gl_FragColor=vec4(vec3(mix(mix(colorFilter*pixel,reflected.rgb,.15+max(.0,(normal.x+normal.z)*.42)),colorHighlight,max(.0,min(.3,overhead/.1))))*filter,1.);}";d.Uk="#version 100\nuniform lowp vec4 color;void main(){gl_FragColor=color;}";d.Ca=function(a){this.filter=a};d.v=function(a,b,c,e,f,g,h,k){this.f.use();this.a.b.bindVertexArrayOES(this.b);this.a.uniform1f(this.f.uDepth,this.DEPTH*g);this.a.uniform1f(this.f.uHeight,this.la*g);this.a.uniform2f(this.f.uSize,e,f);this.a.uniform2f(this.f.uWavePhase,e/(g*this.vh),f/(g*this.vh));this.a.uniform2f(this.f.uWaterSize,c.width,c.height);this.a.uniform1f(this.f.uPhase,h);this.a.uniform1f(this.f.uTime,k);null!==this.filter&&(this.a.uniform3f(this.f.uFilter,this.filter.r,this.filter.C,this.filter.B),this.filter=null);this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,a);this.a.activeTexture(this.a.TEXTURE1);this.a.bindTexture(this.a.TEXTURE_2D,b);this.a.activeTexture(this.a.TEXTURE2);this.a.bindTexture(this.a.TEXTURE_2D,c.P[c.Cb].L);ab(this)};d.c=function(){this.f.c();this.Ld.c();this.a.b.deleteVertexArrayOES(this.b);this.a.b.deleteVertexArrayOES(this.jg)};function Mb(a){this.a=a;this.f=new C(a,this.J,this.H,["vertex","color"],["size"])}function db(a,b,c,e,f){this.a=a;this.width=c;this.height=e;this.scale=f;this.Aa=new nb(a,5);this.b=a.b.createVertexArrayOES();a.b.bindVertexArrayOES(this.b);this.Aa.bind();a.enableVertexAttribArray(b.aVertex);a.vertexAttribPointer(b.aVertex,2,a.FLOAT,!1,20,0);a.enableVertexAttribArray(b.aColor);a.vertexAttribPointer(b.aColor,3,a.FLOAT,!1,20,8)}db.prototype.ee=8;for(var Nb=db.prototype,Ob=[0,0,1,1,1],Pb=[],Qb=0;Qb<=db.prototype.ee;++Qb){var Rb=2*Math.PI*Qb/db.prototype.ee;Ob.push(Math.cos(Rb),Math.sin(Rb),0,0,0);Qb!==db.prototype.ee&&Pb.push(0,Qb+1,(Qb+1)%db.prototype.ee+1)}Nb.Mb=new ib(Ob,Pb);db.prototype.ab=function(a,b,c,e,f,g){for(var h=this.Aa.Gc(),k=0,l=this.Mb.Ma.length;k<l;k+=5)this.Aa.xb((this.Mb.Ma[k]*c+a)*this.scale,(this.Mb.Ma[k+1]*c+b)*this.scale,this.Mb.Ma[k+2]*e,this.Mb.Ma[k+3]*f,this.Mb.Ma[k+4]*g);a=n(this.Mb.ea);for(b=a.next();!b.done;b=a.next())this.Aa.wa(b.value+h)};db.prototype.v=function(){0!==this.Aa.Oa&&(this.a.b.bindVertexArrayOES(this.b),this.a.enable(this.a.BLEND),this.a.blendFunc(this.a.ONE,this.a.ONE),this.Aa.upload(),this.Aa.v(),this.a.disable(this.a.BLEND))};db.prototype.c=function(){this.Aa.c();this.a.b.deleteVertexArrayOES(this.b)};Mb.prototype.J="#version 100\nuniform vec2 size;attribute vec2 vertex;attribute vec3 color;varying vec3 iColor;void main(){iColor=color;gl_Position=vec4(vec2(2.,-2.)*vertex.xy/size+vec2(-1.,1.),.0,1.);}";Mb.prototype.H="#version 100\nvarying lowp vec3 iColor;void main(){gl_FragColor=vec4(iColor,.0);}";function Kb(a,b){0!==b.Aa.Oa&&(a.f.use(),a.a.uniform2f(a.f.uSize,b.width,b.height),b.v())}Mb.prototype.c=function(){this.f.c()};function Sb(a){this.a=a;this.buffer=new nb(a,4);this.f=new C(a,this.J,this.H,["position","uv"],["scale"]);this.lc=new C(a,this.Wk,this.Vk,["position","uv"],["scale"]);this.b=a.b.createVertexArrayOES();this.Zh=a.b.createVertexArrayOES();a.b.bindVertexArrayOES(this.b);this.buffer.bind();a.enableVertexAttribArray(this.f.aPosition);a.vertexAttribPointer(this.f.aPosition,2,a.FLOAT,!1,16,0);a.enableVertexAttribArray(this.f.aUv);a.vertexAttribPointer(this.f.aUv,2,a.FLOAT,!1,16,8);a.b.bindVertexArrayOES(this.Zh);this.buffer.bind();a.enableVertexAttribArray(this.lc.aPosition);a.vertexAttribPointer(this.lc.aPosition,2,a.FLOAT,!1,16,0);a.enableVertexAttribArray(this.lc.aUv);a.vertexAttribPointer(this.lc.aUv,2,a.FLOAT,!1,16,8)}d=Sb.prototype;d.J="#version 100\nuniform vec2 scale;attribute vec2 position;attribute vec2 uv;varying vec2 iUv;void main(){iUv=uv;gl_Position=vec4(position*scale+vec2(-1.,1.),.0,1.);}";d.H="#version 100\nuniform sampler2D atlas;uniform mediump vec2 shadow;varying mediump vec2 iUv;void main(){gl_FragColor=texture2D(atlas,iUv);}";d.Wk="#version 100\nuniform vec2 scale;attribute vec2 position;attribute vec2 uv;varying mediump vec2 iUv;void main(){iUv=uv;gl_Position=vec4(position*scale+vec2(-1.,1.),.0,1.);}";d.Vk="#version 100\nuniform sampler2D atlas;varying mediump vec2 iUv;void main(){gl_FragColor=vec4(vec3(.0),texture2D(atlas,iUv).a*.6);}";d.v=function(a,b,c,e,f){this.a.b.bindVertexArrayOES(this.b);f&&this.buffer.upload();this.a.enable(this.a.BLEND);this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA);this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,a.kb.L);e?(this.lc.use(),this.a.uniform2f(this.lc.uScale,2/b,-2/c)):(this.f.use(),this.a.uniform2f(this.f.uScale,2/b,-2/c));this.buffer.v();this.a.disable(this.a.BLEND)};d.c=function(){this.buffer.c();this.f.c();this.lc.c();this.a.b.deleteVertexArrayOES(this.b);this.a.b.deleteVertexArrayOES(this.Zh)};function Tb(a,b){this.a=a;this.Ga=b;this.buffer=a.createBuffer();this.b=a.b.createVertexArrayOES();a.b.bindVertexArrayOES(this.b);a.bindBuffer(a.ARRAY_BUFFER,this.buffer);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),a.STATIC_DRAW);a.enableVertexAttribArray(this.Ga.f.aPosition);a.vertexAttribPointer(this.Ga.f.aPosition,2,a.FLOAT,!1,8,0)}Tb.prototype.v=function(a){this.Ga.f.use();this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,a);this.a.b.bindVertexArrayOES(this.b);this.a.drawArrays(this.a.TRIANGLE_FAN,0,4)};Tb.prototype.c=function(){this.a.deleteBuffer(this.buffer);this.a.b.deleteVertexArrayOES(this.b)};function Ub(a){var b=this;this.f=new C(a,this.J,this.H,["color","position","flex","windPosition"],["time","filter"]);this.Ba=new C(a,this.kf,this.jf,["color","position"],[]);this.b=a.b.createVertexArrayOES();this.Zc=a.b.createVertexArrayOES();this.filter=Wa;G.call(this,a,[new mb(this.b,function(){a.enableVertexAttribArray(b.f.aColor);a.vertexAttribPointer(b.f.aColor,3,a.FLOAT,!1,40,0);a.enableVertexAttribArray(b.f.aPosition);a.vertexAttribPointer(b.f.aPosition,3,a.FLOAT,!1,40,12);a.enableVertexAttribArray(b.f.aFlex);a.vertexAttribPointer(b.f.aFlex,2,a.FLOAT,!1,40,24);a.enableVertexAttribArray(b.f.aWindPosition);a.vertexAttribPointer(b.f.aWindPosition,2,a.FLOAT,!1,40,32)}),new mb(this.Zc,function(){a.enableVertexAttribArray(b.Ba.aColor);a.vertexAttribPointer(b.Ba.aColor,3,a.FLOAT,!1,40,0);a.enableVertexAttribArray(b.Ba.aPosition);a.vertexAttribPointer(b.Ba.aPosition,3,a.FLOAT,!1,40,12)})])}Ub.prototype=Object.create(G.prototype);d=Ub.prototype;d.J="#version 100\nuniform sampler2D air;uniform float time;attribute vec3 color;attribute vec3 position;attribute vec2 flex;attribute vec2 windPosition;varying vec3 iColor;void main(){iColor=color;vec2 states=texture2D(air,vec2(windPosition.x,1.-windPosition.y)).ar;float displacement=mix(states.x,states.y,time)*2.-1.;gl_Position=vec4((vec2(position.x,position.y-position.z)+flex*displacement),.5*position.y+.5,1.);}";d.kf="#version 100\nattribute vec3 color;attribute vec3 position;varying vec3 iColor;void main(){iColor=color;gl_Position=vec4(vec2(position.x,position.y+position.z),position.y*.5+.5,1.);}";d.H="#version 100\nuniform lowp vec3 filter;varying lowp vec3 iColor;void main(){gl_FragColor=vec4(iColor*filter,1.);}";d.jf="#version 100\nvarying lowp vec3 iColor;void main(){gl_FragColor=vec4(iColor,1.);}";d.Ca=function(a){this.filter=a};d.v=function(a,b){this.f.use();this.a.b.bindVertexArrayOES(this.b);this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,a.P[a.Cb].L);this.a.uniform1f(this.f.uTime,b);null!==this.filter&&(this.a.uniform3f(this.f.uFilter,this.filter.r,this.filter.C,this.filter.B),this.filter=null);ab(this)};function qb(a){a.Ba.use();a.a.b.bindVertexArrayOES(a.Zc);ab(a)}d.c=function(){this.f.c();this.Ba.c();this.a.b.deleteVertexArrayOES(this.b);this.a.b.deleteVertexArrayOES(this.Zc)};function Vb(a){var b=this;this.f=new C(a,this.J,this.H,["color","position"],["filter"]);this.Ba=new C(a,this.kf,this.jf,["color","position"],[]);this.ib=new C(a,this.Xk,this.Tk,["position"],["color"]);this.b=a.b.createVertexArrayOES();this.Zc=a.b.createVertexArrayOES();this.Yc=a.b.createVertexArrayOES();this.filter=Wa;G.call(this,a,[new mb(this.b,function(){a.enableVertexAttribArray(b.f.aColor);a.vertexAttribPointer(b.f.aColor,3,a.FLOAT,!1,24,0);a.enableVertexAttribArray(b.f.aPosition);a.vertexAttribPointer(b.f.aPosition,3,a.FLOAT,!1,24,12)}),new mb(this.Zc,function(){a.enableVertexAttribArray(b.Ba.aColor);a.vertexAttribPointer(b.Ba.aColor,3,a.FLOAT,!1,24,0);a.enableVertexAttribArray(b.Ba.aPosition);a.vertexAttribPointer(b.Ba.aPosition,3,a.FLOAT,!1,24,12)}),new mb(this.Yc,function(){a.enableVertexAttribArray(b.ib.aPosition);a.vertexAttribPointer(b.ib.aPosition,3,a.FLOAT,!1,24,12)})]);this.Ca(Wa)}Vb.prototype=Object.create(G.prototype);d=Vb.prototype;d.J="#version 100\nattribute vec3 color;attribute vec3 position;varying vec3 iColor;void main(){iColor=color;gl_Position=vec4(position.x,position.y-position.z,.5*position.y+.5,1.);}";d.kf="#version 100\nattribute vec3 color;attribute vec3 position;varying vec3 iColor;void main(){iColor=color;gl_Position=vec4(vec2(position.x,position.y+position.z),.5*position.y+.5,1.);}";d.Xk="#version 100\nattribute vec3 position;void main(){gl_Position=vec4(vec2(position.x,position.y),.0,1.);}";d.H="#version 100\nuniform lowp vec3 filter;varying lowp vec3 iColor;void main(){gl_FragColor=vec4(iColor*filter,1.);}";d.jf="#version 100\nvarying lowp vec3 iColor;void main(){gl_FragColor=vec4(iColor,1.);}";d.Tk="#version 100\nuniform lowp vec4 color;void main(){gl_FragColor=color;}";d.Ca=function(a){this.filter=a};d.v=function(){this.f.use();this.a.b.bindVertexArrayOES(this.b);null!==this.filter&&(this.a.uniform3f(this.f.uFilter,this.filter.r,this.filter.C,this.filter.B),this.filter=null);ab(this)};d.c=function(){this.f.c();this.Ba.c();this.ib.c();this.a.b.deleteVertexArrayOES(this.b);this.a.b.deleteVertexArrayOES(this.Zc);this.a.b.deleteVertexArrayOES(this.Yc)};function Wb(a,b){var c=this;this.jc=new C(a,this.Yk,this.H,["position"],["targetSize","direction"]);this.kc=new C(a,this.Zk,this.H,["position"],["targetSize","direction"]);this.hg=a.b.createVertexArrayOES();this.ig=a.b.createVertexArrayOES();a.b.bindVertexArrayOES(this.ig);a.bindBuffer(a.ARRAY_BUFFER,b.buffer);a.enableVertexAttribArray(this.kc.aPosition);a.vertexAttribPointer(this.kc.aPosition,2,a.FLOAT,!1,8,0);G.call(this,a,[new mb(this.hg,function(){a.enableVertexAttribArray(c.jc.aPosition);a.vertexAttribPointer(c.jc.aPosition,2,a.FLOAT,!1,8,0)})])}Wb.prototype=Object.create(G.prototype);Wb.prototype.Yk="#version 100\nattribute vec2 position;void main(){gl_Position=vec4(position,.0,1.);}";Wb.prototype.Zk="#version 100\nattribute vec2 position;void main(){gl_Position=vec4(position,.0,1.);}";Wb.prototype.H="#version 100\nuniform sampler2D source;uniform mediump vec2 targetSize;uniform mediump vec2 direction;lowp vec4 get(int delta){return texture2D(source,(gl_FragCoord.xy+direction*float(delta))/targetSize);}void main(){gl_FragColor=(get(-2)+get(2))*.06136+(get(-1)+get(1))*.24477+get(0)*.38774;}";Wb.prototype.c=function(){this.a.b.deleteVertexArrayOES(this.hg);this.a.b.deleteVertexArrayOES(this.ig);this.jc.c();this.kc.c()};function Xb(a,b){this.a=a;this.f=new C(a,this.J,this.H,["position"],[],[new D("springs","i",[0]),new D("source","i",[1]),new D("damping","f",[this.af])]);this.b=a.b.createVertexArrayOES();a.b.bindVertexArrayOES(this.b);a.bindBuffer(a.ARRAY_BUFFER,b.buffer);a.enableVertexAttribArray(this.f.aPosition);a.vertexAttribPointer(this.f.aPosition,2,a.FLOAT,!1,8,0)}d=Xb.prototype;d.af=.98;d.J="#version 100\nattribute vec2 position;varying mediump vec2 iUv;void main(){iUv=position*.5+.5;gl_Position=vec4(position,.0,1.);}";d.H="#version 100\nuniform sampler2D source;uniform sampler2D springs;uniform mediump float damping;varying mediump vec2 iUv;void main(){lowp vec3 previous=texture2D(source,iUv).rgb;mediump float previousState=previous.r*2.-1.;mediump float previousLeft=previous.g;mediump float previousRight=previous.b;mediump float motion=previousRight-previousLeft;mediump float state=previousState+motion*.4;motion=(motion-state*texture2D(springs,iUv).r)*damping;if(motion<.0)gl_FragColor=vec4(state*.5+.5,-motion,.0,previous.r);else gl_FragColor=vec4(state*.5+.5,.0,motion,previous.r);}";d.Qf=function(a,b){this.f.use();this.a.b.bindVertexArrayOES(this.b);a.Ia();a.P[a.Cb].target();this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,a.Tc);this.a.activeTexture(this.a.TEXTURE1);this.a.bindTexture(this.a.TEXTURE_2D,a.P[1-a.Cb].L);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST);this.a.drawArrays(this.a.TRIANGLE_FAN,0,4);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR);Kb(b,a.Ua)};d.c=function(){this.f.c();this.a.b.deleteVertexArrayOES(this.b)};function Yb(a,b){this.a=a;this.f=new C(a,this.J,this.H,["position"],["size","range"]);this.b=a.b.createVertexArrayOES();a.b.bindVertexArrayOES(this.b);a.bindBuffer(a.ARRAY_BUFFER,b.buffer);a.enableVertexAttribArray(this.f.aPosition);a.vertexAttribPointer(this.f.aPosition,2,a.FLOAT,!1,8,0)}Yb.prototype.J="#version 100\nattribute vec2 position;void main(){gl_Position=vec4(position,.0,1.);}";Yb.prototype.H="#version 100\nuniform sampler2D source;uniform mediump vec2 size;uniform mediump float range;mediump float get(int dx,int dy){return texture2D(source,(gl_FragCoord.xy+vec2(float(dx),float(dy)))/size).a;}void main(){mediump float nearest=min(min(min(get(-1,-1),get(1,-1)),min(get(-1,1),get(1,1)))+1.414213*range,min(min(get(0,-1),get(1,0)),min(get(0,1),get(-1,0)))+range);gl_FragColor=vec4(min(texture2D(source,gl_FragCoord.xy/size).r,nearest));}";Yb.prototype.c=function(){this.f.c();this.a.b.deleteVertexArrayOES(this.b)};function Zb(a){this.a=a;this.b=a.b.createVertexArrayOES();this.f=new C(a,this.J,this.H,["position","origin","alpha","threshold"],["window","windowWidth","transparency"],[new D("color","f",Xa(this.COLOR))])}d=Zb.prototype;d.J="#version 100\nuniform float window;uniform float windowWidth;uniform float transparency;attribute vec3 position;attribute vec2 origin;attribute float alpha;attribute float threshold;varying float iAlpha;void main(){mediump float age=mod(window-threshold,1.)/windowWidth;iAlpha=transparency*alpha*age;gl_Position=vec4(mix(vec2(origin.x,position.y-origin.y),vec2(position.x,position.y-position.z),age),.5*position.y+.5,1.);}";d.H="#version 100\nuniform lowp vec3 color;varying lowp float iAlpha;void main(){gl_FragColor=vec4(color,iAlpha);}";d.COLOR=z("--i");d.$a=function(a){this.a.b.bindVertexArrayOES(this.b);this.a.bindBuffer(this.a.ARRAY_BUFFER,a);this.a.enableVertexAttribArray(this.f.aPosition);this.a.vertexAttribPointer(this.f.aPosition,3,this.a.FLOAT,!1,28,0);this.a.enableVertexAttribArray(this.f.aOrigin);this.a.vertexAttribPointer(this.f.aOrigin,2,this.a.FLOAT,!1,28,12);this.a.enableVertexAttribArray(this.f.aAlpha);this.a.vertexAttribPointer(this.f.aAlpha,1,this.a.FLOAT,!1,28,20);this.a.enableVertexAttribArray(this.f.aThreshold);this.a.vertexAttribPointer(this.f.aThreshold,1,this.a.FLOAT,!1,28,24)};d.v=function(a,b,c,e){this.f.use();this.a.uniform1f(this.f.uWindow,b);this.a.uniform1f(this.f.uWindowWidth,c);this.a.uniform1f(this.f.uTransparency,e);this.a.b.bindVertexArrayOES(this.b);this.a.depthMask(!1);b>c?this.a.drawArrays(this.a.LINES,Math.floor(a*(b-c))<<1,Math.ceil(a*c)<<1):(this.a.drawArrays(this.a.LINES,0,Math.ceil(a*b)<<1),this.a.drawArrays(this.a.LINES,Math.floor(a*(b-c+1))<<1,Math.ceil(a*(1-(b-c+1)))<<1));this.a.depthMask(!0)};d.c=function(){this.f.c();this.a.b.deleteVertexArrayOES(this.b)};function $b(){var a=ac,b=bc.clientWidth,c=bc.clientHeight;this.a=a;this.width=b;this.height=c;this.Ga=new sb(a);this.Md=new Tb(a,this.Ga);this.Yf=new Ib(a);this.kg=new Jb(a);this.Kd=new Lb(a);this.Dd=new Mb(a);this.ue=new Sb(a);this.Zd=new Ub(a);this.Uc=new Vb(a);this.$f=new tb(a);this.blur=new Wb(a,this.Md);this.di=new Xb(a,this.Md);this.Oc=new ub(a);this.Pa=new Za(a,this.Oc);this.Fh=new Yb(a,this.Md);this.Bf=new Zb(a)}$b.prototype.resize=function(a,b){this.width=a;this.height=b};$b.prototype.c=function(){this.Pa.c();this.Ga.c();this.Oc.c();this.Yf.c();this.kg.c();this.Kd.c();this.Dd.c();this.ue.c();this.Md.c();this.Zd.c();this.Uc.c();this.$f.c();this.blur.c();this.di.c();this.Fh.c();this.Bf.c()};function cc(){}function dc(a){return Math.min(255,Math.max(0,Math.round(a)))}function ec(a){this.zf=a}function sc(a,b){this.color=a;this.Nc=void 0===b?null:b}function Fb(){var a=z("--s"),b=z("--t"),c=z("--v"),e=z("--w"),f=z("--u"),g=z("--x");this.Fa=new ec([new sc(a,new ec([new sc(c),new sc(f),new sc(e,new ec([new sc(f)]))])),new sc(b,new ec([new sc(g)]))])}function Hb(a){this.Nc=a;this.g=this.Je=null}Hb.prototype.next=function(a){if(this.Je){if(-1!==a.R&&!(this.Je.flags&this.Je.Fg&&a.flags&a.Gg)){if(null===(this.Nc=this.g.Nc)||a.R>=this.Nc.zf.length)return null;this.g=this.Nc.zf[a.R]}}else this.g=this.Nc.zf[a.R];this.Je=a;return this.g.color};function I(a,b){this.min=a;this.max=b}I.prototype.g=function(a){return this.min+(this.max-this.min)*a};function v(a,b,c){this.K=c;I.call(this,a,b)}v.prototype=Object.create(I.prototype);v.prototype.g=function(a){return this.min+(this.max-this.min)*Math.pow(a,this.K)};function tc(a,b){this.zm=b;this.Zl=(1-a)*(1+1/b);I.call(this,a,1)}tc.prototype=Object.create(I.prototype);tc.prototype.g=function(a){return this.min+this.Zl*(1-1/(this.zm*a+1))};function J(a,b,c,e){this.width=e;this.K=Math.log((b-a)/(c-a))/Math.log(.5);I.call(this,a,c)}J.prototype=Object.create(I.prototype);J.prototype.g=function(a){var b=a-.5;return this.min+(this.max-this.min)*Math.pow(4*b*b*b*Math.pow(1-Math.sin(Math.PI*a),this.width)+.5,this.K)};function K(a,b,c){this.K=c;I.call(this,a,b)}K.prototype=Object.create(I.prototype);K.prototype.g=function(a){return.5>a?this.min+.5*(this.max-this.min)*Math.pow(a+a,this.K):this.min+(this.max-this.min)*(1-.5*Math.pow(2-a-a,this.K))};function uc(a,b){this.anchor=a;this.x=b}uc.prototype=Object.create(cc.prototype);d=uc.prototype;d.Ac=-256;d.lf=256;function vc(a){var b=(new Ma).O(a);a=(new Ma).O(a);var c=uc.prototype.Ac,e=uc.prototype.lf;if(!(b.x>=c&&b.y>=c&&b.z>=c&&b.x<=e&&b.y<=e&&b.z<=e))throw new RangeError;if(!(.01>Math.abs(a.length()-1)))throw new RangeError;return new uc(b,a)}d.m=function(a){this.anchor.m(a);this.x.m(a)};d.za=function(a,b){return new uc(this.anchor.za(a.anchor,b),this.x.za(a.x,b).normalize())};function wc(a){var b=a.anchor,c=a.Ac;a=a.lf;b.x<c?b.x=c:b.x>a&&(b.x=a);b.y<c?b.y=c:b.y>a&&(b.y=a);b.z<c?b.z=c:b.z>a&&(b.z=a)}d.F=function(){return new uc(this.anchor.F(),this.x.F())};function xc(a){var b=Na(a.x),c=Oa(a.x,b);return[a.x.x,a.x.y,a.x.z,c.x,c.y,c.z,b.x,b.y,b.z]}function Q(a,b,c,e,f,g){this.id=void 0===a?-1:a;this.Gh=void 0===g?1:g;this.R=void 0===b?-1:b;this.flags=0;if(void 0===c||c)this.flags|=this.Fg;if(void 0===e||e)this.flags|=this.Gg;if(void 0===f?0:f)this.flags|=this.Lb}Q.prototype.Fg=1;Q.prototype.Gg=2;Q.prototype.Lb=4;Q.prototype.F=function(){return null};function vb(a){Q.call(this,-1,a,!1)}vb.prototype=Object.create(Q.prototype);d=vb.prototype;d.J="#version 100\nattribute vec2 position;void main(){gl_Position=vec4(position,.0,1.);}";d.H="#version 100\nuniform lowp vec3 color;void main(){gl_FragColor=vec4(color,1.);}";d.m=function(a){R(a,this.R)};d.zb=function(a,b,c){a.uniform3f(b.uColor,c.r,c.C,c.B)};d.createShader=function(a){return new C(a,this.J,this.H,["position"],["color"])};function xb(a,b,c,e,f,g,h,k){this.I=a;this.scale=c;this.stretch=e;this.threshold=f;this.rc=g;this.sc=h;this.K=k;Q.call(this,this.Z,b,!0,!1,!1,this.ad)}xb.prototype=Object.create(Q.prototype);d=xb.prototype;d.ad=.25;d.ca=new J(.5,1.8,6,11);d.da=new J(.25,.5,.75,2);d.od=new J(.37,1,2.5,1);d.gf=new J(0,.4,1,1);d.hf=new J(0,.5,1,15);d.ha=new v(0,1,2);d.J="#version 100\nattribute vec2 position;attribute vec2 uv;varying vec2 iUv;void main(){iUv=uv;gl_Position=vec4(position,.0,1.);}";d.H="#version 100\n uniform sampler2D noise;mediump float random2(mediump vec2 x){return texture2D(noise,x*.011).r;}mediump float random3(mediump vec3 x){return texture2D(noise,x.xy*.011-x.z*.017).r;}mediump float interpolate(mediump float a,mediump float b,mediump float c,mediump float d,mediump float x){mediump float p=(d-c)-(a-b);return x*(x*(x*p+((a-b)-p))+(c-a))+b;}mediump float sampleX(highp vec3 at){highp float floored=floor(at.x);return interpolate(random3(vec3(floored-1.,at.yz)),random3(vec3(floored,at.yz)),random3(vec3(floored+1.,at.yz)),random3(vec3(floored+2.,at.yz)),at.x-floored)*.5+.25;}mediump float sampleY(highp vec3 at){highp float floored=floor(at.y);return interpolate(sampleX(vec3(at.x,floored-1.,at.z)),sampleX(vec3(at.x,floored,at.z)),sampleX(vec3(at.x,floored+1.,at.z)),sampleX(vec3(at.x,floored+2.,at.z)),at.y-floored);}mediump float cubicNoise(highp vec3 at){highp float floored=floor(at.z);return interpolate(sampleY(vec3(at.xy,floored-1.)),sampleY(vec3(at.xy,floored)),sampleY(vec3(at.xy,floored+1.)),sampleY(vec3(at.xy,floored+2.)),at.z-floored);}uniform lowp vec3 color;uniform mediump float scale;uniform mediump float stretch;uniform mediump float threshold;uniform mediump vec2 focus;uniform mediump float power;uniform mediump vec2 size;uniform highp vec3 anchor;uniform highp mat3 rotate;varying mediump vec2 iUv;void main(){highp vec2 at=vec2(iUv.x*stretch-.5,iUv.y-.5)*size*scale;mediump float noise=cubicNoise(anchor+vec3(at,.0)*rotate);mediump float strength=pow(max(.0,1.-1.5*length(iUv-focus)),power);if(noise>threshold*strength)discard;gl_FragColor=vec4(color,1.);}";function yc(a){return new xb(vc(a),S(a),S(a),S(a),S(a),S(a),S(a),S(a))}d.m=function(a){this.I.m(a);R(a,this.R);R(a,this.scale);R(a,this.stretch);R(a,this.threshold);R(a,this.rc);R(a,this.sc);R(a,this.K)};d.F=function(){return new xb(this.I.F(),this.R,this.scale,this.stretch,this.threshold,this.rc,this.sc,this.K)};d.zb=function(a,b,c){a.uniform3f(b.uColor,c.r,c.C,c.B);a.uniform1f(b.uScale,this.ca.g(this.scale/255));a.uniform1f(b.uStretch,this.od.g(this.stretch/255));a.uniform1f(b.uThreshold,this.da.g(this.threshold/255));a.uniform2f(b.uFocus,this.gf.g(this.rc/255),this.hf.g(this.sc/255));a.uniform1f(b.uPower,this.ha.g(this.K/255));a.uniform3f(b.uAnchor,this.I.anchor.x,this.I.anchor.y,this.I.anchor.z);a.uniformMatrix3fv(b.uRotate,!1,xc(this.I))};d.createShader=function(a){return new C(a,this.J,this.H,["position","uv"],"scale stretch threshold size anchor rotate color focus power".split(" "))};function yb(a,b,c,e,f,g,h){this.I=a;this.R=b;this.scale=c;this.K=e;this.threshold=f;this.focus=g;this.dc=h;Q.call(this,this.Z,b,!0,!1,!0,this.ad)}yb.prototype=Object.create(Q.prototype);d=yb.prototype;d.ad=.65;d.ca=new J(1.8,4,5.5,3);d.ha=new J(.73,2.15,3.5,5);d.da=new J(.3,.5,.7,1);d.ma=new J(0,.5,1,3);d.fd=new v(.4,.6,10);d.J="#version 100\nattribute vec2 position;attribute vec2 uv;varying mediump vec2 iUv;void main(){iUv=uv;gl_Position=vec4(position,.0,1.);}";d.H="#version 100\n uniform sampler2D noise;mediump float random2(mediump vec2 x){return texture2D(noise,x*.011).r;}mediump float random3(mediump vec3 x){return texture2D(noise,x.xy*.011-x.z*.017).r;}mediump float interpolate(mediump float a,mediump float b,mediump float c,mediump float d,mediump float x){mediump float p=(d-c)-(a-b);return x*(x*(x*p+((a-b)-p))+(c-a))+b;}mediump float sampleX(highp vec3 at){highp float floored=floor(at.x);return interpolate(random3(vec3(floored-1.,at.yz)),random3(vec3(floored,at.yz)),random3(vec3(floored+1.,at.yz)),random3(vec3(floored+2.,at.yz)),at.x-floored)*.5+.25;}mediump float sampleY(highp vec3 at){highp float floored=floor(at.y);return interpolate(sampleX(vec3(at.x,floored-1.,at.z)),sampleX(vec3(at.x,floored,at.z)),sampleX(vec3(at.x,floored+1.,at.z)),sampleX(vec3(at.x,floored+2.,at.z)),at.y-floored);}mediump float cubicNoise(highp vec3 at){highp float floored=floor(at.z);return interpolate(sampleY(vec3(at.xy,floored-1.)),sampleY(vec3(at.xy,floored)),sampleY(vec3(at.xy,floored+1.)),sampleY(vec3(at.xy,floored+2.)),at.z-floored);}uniform lowp vec3 color;uniform mediump float scale;uniform mediump float power;uniform mediump float threshold;uniform mediump float focus;uniform mediump float focusPower;uniform mediump vec2 size;uniform highp vec3 origin;uniform highp mat3 rotate;varying mediump vec2 iUv;void main(){mediump float phaseThreshold=pow(1.-1.4*abs(iUv.y-.5),power);highp vec2 at=(iUv-vec2(.5))*size*scale;mediump float noise=cubicNoise(origin+vec3(at,.0)*rotate);mediump float strength=pow(max(.0,1.-2.*abs(iUv.x-focus)),focusPower);if(noise>phaseThreshold*strength)discard;gl_FragColor=vec4(color,1.);}";function zc(a){return new yb(vc(a),S(a),S(a),S(a),S(a),S(a),S(a))}d.m=function(a){this.I.m(a);R(a,this.R);R(a,this.scale);R(a,this.K);R(a,this.threshold);R(a,this.focus);R(a,this.dc)};d.F=function(){return new yb(this.I.F(),this.R,this.scale,this.K,this.threshold,this.focus,this.dc)};d.zb=function(a,b,c){a.uniform3f(b.uColor,c.r,c.C,c.B);a.uniform1f(b.uPower,this.ha.g(this.K/255));a.uniform1f(b.uScale,this.ca.g(this.scale/255));a.uniform1f(b.uThreshold,this.da.g(this.threshold/255));a.uniform1f(b.uFocus,this.ma.g(this.focus/255));a.uniform1f(b.uFocusPower,this.fd.g(this.dc/255));a.uniform3f(b.uOrigin,this.I.anchor.x,this.I.anchor.y,this.I.anchor.z);a.uniformMatrix3fv(b.uRotate,!1,xc(this.I))};d.createShader=function(a){return new C(a,this.J,this.H,["position","uv"],"scale power threshold focus focusPower size origin rotate color".split(" "))};function zb(a,b,c,e,f,g,h,k,l,m){this.I=a;this.R=b;this.scale=c;this.Zb=e;this.oc=f;this.threshold=g;this.pc=h;this.qc=k;this.focus=l;this.K=m;Q.call(this,this.Z,b,!0,!1,!1,this.ad)}zb.prototype=Object.create(Q.prototype);d=zb.prototype;d.ad=.9;d.ca=new J(2.8,4.3,8.5,5);d.dd=new J(3,7,12,4);d.ld=new I(2,4.3);d.da=new K(.4,.6,1);d.Ob=new v(0,1.6,10);d.pd=new v(.3,2,2);d.ma=new J(0,.3,1,3);d.ha=new v(.4,.6,10);d.J="#version 100\nattribute vec2 position;attribute vec2 uv;varying vec2 iUv;void main(){iUv=uv;gl_Position=vec4(position,.0,1.);}";d.H="#version 100\n uniform sampler2D noise;mediump float random2(mediump vec2 x){return texture2D(noise,x*.011).r;}mediump float random3(mediump vec3 x){return texture2D(noise,x.xy*.011-x.z*.017).r;}mediump float interpolate(mediump float a,mediump float b,mediump float c,mediump float d,mediump float x){mediump float p=(d-c)-(a-b);return x*(x*(x*p+((a-b)-p))+(c-a))+b;}mediump float sampleX(highp vec3 at){highp float floored=floor(at.x);return interpolate(random3(vec3(floored-1.,at.yz)),random3(vec3(floored,at.yz)),random3(vec3(floored+1.,at.yz)),random3(vec3(floored+2.,at.yz)),at.x-floored)*.5+.25;}mediump float sampleY(highp vec3 at){highp float floored=floor(at.y);return interpolate(sampleX(vec3(at.x,floored-1.,at.z)),sampleX(vec3(at.x,floored,at.z)),sampleX(vec3(at.x,floored+1.,at.z)),sampleX(vec3(at.x,floored+2.,at.z)),at.y-floored);}mediump float cubicNoise(highp vec3 at){highp float floored=floor(at.z);return interpolate(sampleY(vec3(at.xy,floored-1.)),sampleY(vec3(at.xy,floored)),sampleY(vec3(at.xy,floored+1.)),sampleY(vec3(at.xy,floored+2.)),at.z-floored);}uniform lowp vec3 color;uniform mediump float scale;uniform mediump float distortion;uniform mediump float roughness;uniform mediump float threshold;uniform mediump float slant;uniform mediump float suppression;uniform mediump float focus;uniform mediump float power;uniform mediump vec2 size;uniform highp vec3 anchor;uniform highp mat3 rotate;varying mediump vec2 iUv;void main(){highp vec2 at=(iUv-.5)*size*roughness;mediump float dx=cubicNoise(anchor+vec3(at,.0)*rotate);mediump float dy=2.*abs(iUv.y-.5);mediump float x=2.*scale*iUv.x+dx*distortion/scale-dy*dy*slant;mediump float strength=pow(max(.0,1.-2.*abs(iUv.x-focus)),power);if(min(mod(x,2.),2.-mod(x,2.))+dy*dy*suppression>threshold*strength)discard;gl_FragColor=vec4(color,1.);}";function Ac(a){return new zb(vc(a),S(a),S(a),S(a),S(a),S(a),S(a),S(a),S(a),S(a))}d.m=function(a){this.I.m(a);R(a,this.R);R(a,this.scale);R(a,this.Zb);R(a,this.oc);R(a,this.threshold);R(a,this.pc);R(a,this.qc);R(a,this.focus);R(a,this.K)};d.F=function(){return new zb(this.I.F(),this.R,this.scale,this.Zb,this.oc,this.threshold,this.pc,this.qc,this.focus,this.K)};d.zb=function(a,b,c){a.uniform3f(b.uColor,c.r,c.C,c.B);a.uniform1f(b.uScale,this.ca.g(this.scale/255));a.uniform1f(b.uDistortion,this.dd.g(this.Zb/255));a.uniform1f(b.uRoughness,this.ld.g(this.oc/255));a.uniform1f(b.uThreshold,this.da.g(this.threshold/255));a.uniform1f(b.uSlant,this.Ob.g(this.pc/255));a.uniform1f(b.uSuppression,this.pd.g(this.qc/255));a.uniform1f(b.uFocus,this.ma.g(this.focus/255));a.uniform1f(b.uPower,this.ha.g(this.K/255));a.uniform3f(b.uAnchor,this.I.anchor.x,this.I.anchor.y,this.I.anchor.z);a.uniformMatrix3fv(b.uRotate,!1,xc(this.I))};d.createShader=function(a){return new C(a,this.J,this.H,["position","uv"],"scale distortion roughness threshold slant suppression color anchor rotate size focus power".split(" "))};function Ab(a,b,c){this.Vb=a;this.mc=b;this.Fc=c;Q.call(this)}Ab.prototype=Object.create(Q.prototype);d=Ab.prototype;d.bl=1.8;d.ak=.5;d.ji=.5;d.tb=new J(.5,.6,1,2);d.zc=new J(.6,.7,1.2,1);d.ed=new I(.07,.115);d.J="#version 100\nattribute vec2 position;attribute vec2 uv;varying vec2 iUv;void main(){iUv=uv;gl_Position=vec4(position,.0,1.);}";d.H="#version 100\nuniform mediump float centerPower;uniform mediump float radiusPower;uniform mediump float eyePosition;uniform mediump float shadePower;uniform mediump float lightPower;uniform mediump float ambient;uniform mediump vec2 size;varying mediump vec2 iUv;mediump float getRadius(mediump float x){return pow(cos(3.141592*(pow(x,centerPower)-.5)),radiusPower);}void main(){lowp float radius=2.*abs(iUv.y-.5);lowp float edge=getRadius(iUv.x);if(radius>edge)gl_FragColor=vec4(.0);else{lowp float shade=pow(max(.0,1.-pow(radius/edge,shadePower)),lightPower);lowp float eyeY=.5*getRadius(eyePosition);lowp float eyeDist=min(length((vec2(eyePosition,.5+eyeY)-iUv)*size),length((vec2(eyePosition,.5-eyeY)-iUv)*size));if(eyeDist<.1)gl_FragColor=vec4(vec3(.2),1.);else gl_FragColor=vec4(vec3(shade)*(1.-ambient)+ambient,1.);}}";d.m=function(a){R(a,this.Vb);R(a,this.mc);R(a,this.Fc)};d.g=function(a){var b=this.tb.g(this.Vb/255),c=this.zc.g(this.mc/255);return Math.pow(Math.cos(Math.PI*(Math.pow(a,b)-.5)),c)};d.zb=function(a,b){a.uniform1f(b.uCenterPower,this.tb.g(this.Vb/255));a.uniform1f(b.uRadiusPower,this.zc.g(this.mc/255));a.uniform1f(b.uEyePosition,this.ed.g(this.Fc/255))};d.createShader=function(a){return new C(a,this.J,this.H,["position","uv"],["centerPower","radiusPower","eyePosition","size"],[new D("shadePower","f",[this.bl]),new D("lightPower","f",[this.ak]),new D("ambient","f",[this.ji])])};function Bb(a){this.Rc=a;Q.call(this)}Bb.prototype=Object.create(Q.prototype);d=Bb.prototype;d.md=new v(.25,3,2);d.J="#version 100\nattribute vec2 position;attribute vec2 uv;varying vec2 iUv;void main(){iUv=uv;gl_Position=vec4(position,.0,1.);}";d.H="#version 100\nuniform mediump float roundness;varying mediump vec2 iUv;void main(){mediump float angle=atan(iUv.y,iUv.x)/1.570796;if(length(iUv)>pow(sin(pow(angle,roundness)*3.141593),.15))gl_FragColor=vec4(.0);else gl_FragColor=vec4(.8);}";d.m=function(a){R(a,this.Rc)};d.zb=function(a,b){a.uniform1f(b.uRoundness,this.md.g(this.Rc/255))};d.createShader=function(a){return new C(a,this.J,this.H,["position","uv"],["roundness"])};xb.prototype.Z=1;yb.prototype.Z=2;zb.prototype.Z=3;function Bc(a,b,c,e){this.Fa=a;this.Wa=b;this.Gb=c;this.Qd=e;this.region=null}Bc.prototype.m=function(a){for(var b=n(this.Wa),c=b.next();!c.done;c=b.next())c=c.value,R(a,c.Z),c.m(a);R(a,0);this.Fa.m(a);this.Gb.m(a);this.Qd.m(a)};Bc.prototype.trim=function(a){a=new Hb(a);a.next(this.Fa);for(var b=0,c=n(this.Wa),e=c.next();!e.done&&null!==a.next(e.value);e=c.next())++b;this.Wa=this.Wa.slice(0,b)};Bc.prototype.c=function(a){this.region&&a.xf.unshift(this.region.slot)};function Cc(){}Cc.prototype=Object.create(cc.prototype);function T(a,b,c){return dc(a+b.g(c))}function Dc(a,b,c){var e=2*Math.PI*q(c);b=b.g(q(c));c=Na(a);var f=Oa(a,c);a.x+=Math.cos(e)*b*c.x+Math.sin(e)*b*f.x;a.y+=Math.cos(e)*b*c.y+Math.sin(e)*b*f.y;a.z+=Math.cos(e)*b*c.z+Math.sin(e)*b*f.z;a.normalize()}function Ec(a){this.Dm=new Fc(a.body)}Ec.prototype=Object.create(Cc.prototype);Ec.prototype.W=function(a){this.Dm.W(a)};function Fc(a){this.body=a;this.Fm=new Gc(a.pattern);this.Em=new Hc(a.Sa);this.Gm=new Ic(a.ia)}Fc.prototype=Object.create(Cc.prototype);d=Fc.prototype;d.qa=new J(-40,0,40,1.5);d.kd=new J(-40,0,40,1);d.ff=new J(-3,0,3,1.5);d.gd=new J(-5,0,5,.5);d.hd=new J(-15,0,15,1);d.W=function(a){this.body.length=T(this.body.length,this.qa,q(a));this.body.l=T(this.body.l,this.kd,q(a));this.body.Cd=T(this.body.Cd,this.ff,q(a));this.body.Lc=T(this.body.Lc,this.gd,q(a));this.body.Mc=T(this.body.Mc,this.hd,q(a));this.Fm.W(a);this.Em.W(a);this.Gm.W(a)};function Gc(a){this.pattern=a;this.Am=new Jc(a.Fa);this.Bm=new Kc(a.Gb);this.Cm=new Lc(a.Qd)}Gc.prototype=Object.create(Cc.prototype);Gc.prototype.W=function(a){for(var b=n(this.pattern.Wa),c=b.next();!c.done;c=b.next()){c=c.value;var e=a;switch(c.id){case xb.prototype.Z:(new Mc(c)).W(e);break;case yb.prototype.Z:(new Nc(c)).W(e);break;case zb.prototype.Z:(new Oc(c)).W(e)}}this.Am.W(a);this.Bm.W(a);this.Cm.W(a)};function Hc(a){this.Sa=a}Hc.prototype=Object.create(Cc.prototype);Hc.prototype.W=function(){};function Ic(a){this.ia=a}Ic.prototype=Object.create(Cc.prototype);Ic.prototype.qa=new J(-15,0,15,1);Ic.prototype.nd=Ic.prototype.qa;Ic.prototype.W=function(a){this.ia.length=T(this.ia.length,this.qa,q(a));this.ia.Rd=T(this.ia.Rd,this.nd,q(a))};function Jc(a){this.u=a}Jc.prototype=Object.create(Cc.prototype);Jc.prototype.W=function(){};function Kc(a){this.u=a}Kc.prototype=Object.create(Cc.prototype);Kc.prototype.tb=new J(-10,0,10,.5);Kc.prototype.zc=new J(-15,0,15,.6);Kc.prototype.ed=new J(-12,0,12,1);Kc.prototype.W=function(a){this.u.Vb=T(this.u.Vb,this.tb,q(a));this.u.mc=T(this.u.mc,this.zc,q(a));this.u.Fc=T(this.u.Fc,this.ed,q(a))};function Lc(a){this.u=a}Lc.prototype=Object.create(Cc.prototype);Lc.prototype.md=new J(-8,0,8,1);Lc.prototype.W=function(a){this.u.Rc=T(this.u.Rc,this.md,q(a))};function Mc(a){this.u=a}Mc.prototype=Object.create(Cc.prototype);d=Mc.prototype;d.cd=new v(0,2.5,5);d.qd=new v(0,2,4);d.ca=new J(-7,0,7,1);d.da=new J(-10,0,10,1.5);d.od=new J(-8,0,8,1);d.gf=new J(-5,0,5,3);d.hf=new J(-6,0,6,3);d.ha=new J(-9,0,9,2.3);d.W=function(a){var b=this.cd;this.u.I.anchor.add(Pa(a).multiply(b.g(q(a))));Dc(this.u.I.x,this.qd,a);wc(this.u.I);this.u.stretch=T(this.u.stretch,this.od,q(a));this.u.scale=T(this.u.scale,this.ca,q(a));this.u.threshold=T(this.u.threshold,this.da,q(a));this.u.rc=T(this.u.rc,this.gf,q(a));this.u.sc=T(this.u.sc,this.hf,q(a));this.u.K=T(this.u.K,this.ha,q(a))};function Nc(a){this.u=a}Nc.prototype=Object.create(Cc.prototype);d=Nc.prototype;d.cd=new v(0,3,4);d.qd=new v(0,.6,4);d.ca=new J(-9,0,9,1.5);d.da=new J(-6.5,0,6.5,2);d.ma=new J(-7,0,7,4);d.fd=new J(-6,0,6,2.6);d.W=function(a){var b=this.cd;this.u.I.anchor.add(Pa(a).multiply(b.g(q(a))));Dc(this.u.I.x,this.qd,a);wc(this.u.I);this.u.scale=T(this.u.scale,this.ca,q(a));this.u.threshold=T(this.u.threshold,this.da,q(a));this.u.focus=T(this.u.focus,this.ma,q(a));this.u.dc=T(this.u.dc,this.fd,q(a))};function Oc(a){this.u=a}Oc.prototype=Object.create(Cc.prototype);d=Oc.prototype;d.cd=new v(0,4,5);d.qd=new v(0,.6,4);d.ca=new J(-8,0,8,1);d.da=new J(-6,0,6,1.4);d.Ob=new J(-4,0,4,2);d.ld=new J(-7,0,7,1.5);d.dd=new J(-6,0,6,1);d.pd=new J(-9,0,9,2);d.ma=new J(-5,0,5,3);d.ha=new J(-5,0,5,2.7);d.W=function(a){var b=this.cd;this.u.I.anchor.add(Pa(a).multiply(b.g(q(a))));Dc(this.u.I.x,this.qd,a);wc(this.u.I);this.u.scale=T(this.u.scale,this.ca,q(a));this.u.threshold=T(this.u.threshold,this.da,q(a));this.u.pc=T(this.u.pc,this.Ob,q(a));this.u.oc=T(this.u.oc,this.ld,q(a));this.u.Zb=T(this.u.Zb,this.dd,q(a));this.u.qc=T(this.u.qc,this.pd,q(a));this.u.focus=T(this.u.focus,this.ma,q(a));this.u.K=T(this.u.K,this.ha,q(a))};function Pc(){}Pc.prototype=Object.create(cc.prototype);function X(a,b,c,e){return dc(a+(b-a)*c.g(e))}function Qc(a,b,c,e){return a<b?dc(a+(b-a)*c.g(e)):dc(b+(a-b)*c.g(e))}function Rc(a,b){this.s=a;this.A=b;this.vm=new Sc(a.body,b.body)}Rc.prototype=Object.create(Pc.prototype);Rc.prototype.V=function(a,b){return new Tc(this.vm.V(a,b),this.s.Ce().F(),La(new x,q(b)*Math.PI*2))};function Sc(a,b){this.s=a;this.A=b;this.xm=new Uc(a.pattern,b.pattern);this.wm=new Vc(a.Sa,b.Sa);this.ym=new Wc(a.ia,b.ia)}Sc.prototype=Object.create(Pc.prototype);d=Sc.prototype;d.qa=new v(0,1,1.5);d.kd=Sc.prototype.qa;d.ff=new I(0,1);d.gd=new v(0,1,3);d.hd=new v(0,1,4);d.V=function(a,b){var c=q(b);return new Xc(this.xm.V(a,b),this.wm.V(b),this.ym.V(b),Qc(this.s.length,this.A.length,this.qa,c),Qc(this.s.l,this.A.l,this.kd,c),X(this.s.Cd,this.A.Cd,this.ff,q(b)),Qc(this.s.Lc,this.A.Lc,this.gd,q(b)),Qc(this.s.Mc,this.A.Mc,this.hd,q(b)))};function Uc(a,b){this.s=a;this.A=b}Uc.prototype=Object.create(Pc.prototype);Uc.prototype.Sg=.06;Uc.prototype.Tg=.02;function Yc(a,b,c){switch(a.id){case xb.prototype.Z:return(new Zc(a,b)).V(c);case yb.prototype.Z:return(new $c(a,b)).V(c);case zb.prototype.Z:return(new ad(a,b)).V(c)}}Uc.prototype.V=function(a,b){for(var c=[],e=this.s.Wa.length,f=this.A.Wa.length,g=q(b)<this.Tg?1:0,h=q(b)<this.Tg?1:0;g<e||h<f;){var k=g>=e?null:this.s.Wa[g],l=h>=f?null:this.A.Wa[h];null===k?.5>q(b)&&c.push(l.F()):null===l?.5>q(b)&&c.push(k.F()):k.id===l.id?c.push(Yc(k,l,b)):(k.flags&k.Lb)===k.Lb===((l.flags&l.Lb)===l.Lb)?Math.pow(q(b),k.Gh)>Math.pow(q(b),l.Gh)?c.push(k.F()):c.push(l.F()):(k.flags&k.Lb)===k.Lb?c.push(l.F()):c.push(k.F());q(b)<this.Sg?g+=2:++g;q(b)<this.Sg?h+=2:++h}b=new Bc((new bd(this.s.Fa,this.A.Fa)).V(b),c,(new cd(this.s.Gb,this.A.Gb)).V(b),(new dd(this.s.Qd,this.A.Qd)).V(b));b.trim(a.Kf.Fa);return b};function Vc(a,b){this.s=a;this.A=b}Vc.prototype=Object.create(Pc.prototype);Vc.prototype.V=function(){for(var a=[],b=0;b<.5*this.s.length;++b)a.push(new ed(this.s[b].Ub,this.s[b].l));return a};function Wc(a,b){this.s=a;this.A=b}Wc.prototype=Object.create(Pc.prototype);Wc.prototype.qa=new I(0,1);Wc.prototype.nd=new I(0,1);Wc.prototype.V=function(a){a=q(a);return new fd(X(this.s.length,this.A.length,this.qa,a),X(this.s.Rd,this.A.Rd,this.nd,a))};function bd(a,b){this.s=a;this.A=b}bd.prototype=Object.create(Pc.prototype);bd.prototype.V=function(a){return new vb(.5>q(a)?this.s.R:this.A.R)};function cd(a,b){this.s=a;this.A=b}cd.prototype=Object.create(Pc.prototype);cd.prototype.tb=new K(0,1,20);cd.prototype.zc=cd.prototype.tb;cd.prototype.ed=cd.prototype.tb;cd.prototype.V=function(a){a=q(a);return new Ab(X(this.s.Vb,this.A.Vb,this.tb,a),X(this.s.mc,this.A.mc,this.zc,a),X(this.s.Fc,this.A.Fc,this.ed,a))};function dd(a,b){this.s=a;this.A=b}dd.prototype=Object.create(Pc.prototype);dd.prototype.md=new K(0,1,15);dd.prototype.V=function(a){return new Bb(X(this.s.Rc,this.A.Rc,this.md,q(a)))};function Zc(a,b){this.s=a;this.A=b}Zc.prototype=Object.create(Pc.prototype);d=Zc.prototype;d.jd=new K(0,1,16);d.ca=new K(0,1,15);d.od=new K(0,1,5);d.da=new K(0,1,2);d.ma=new I(0,1);d.ha=new K(0,1,4);d.V=function(a){a=q(a);return new xb(this.s.I.za(this.A.I,this.jd.g(a)),.5>a?this.s.R:this.A.R,X(this.s.scale,this.A.scale,this.ca,a),X(this.s.stretch,this.A.stretch,this.od,a),X(this.s.threshold,this.A.threshold,this.da,a),X(this.s.rc,this.A.rc,this.ma,a),X(this.s.sc,this.A.sc,this.ma,a),X(this.s.K,this.A.K,this.ha,a))};function $c(a,b){this.s=a;this.A=b}$c.prototype=Object.create(Pc.prototype);d=$c.prototype;d.jd=new K(0,1,8);d.ca=new K(0,1,15);d.ha=new K(0,1,2);d.da=new K(0,1,2);d.ma=new K(0,1,10);d.fd=new K(0,1,11);d.V=function(a){a=q(a);return new yb(this.s.I.za(this.A.I,this.jd.g(a)),.5>a?this.s.R:this.A.R,X(this.s.scale,this.A.scale,this.ca,a),X(this.s.K,this.A.K,this.ha,a),X(this.s.threshold,this.A.threshold,this.da,a),X(this.s.focus,this.A.focus,this.ma,a),X(this.s.dc,this.A.dc,this.fd,a))};function ad(a,b){this.s=a;this.A=b}ad.prototype=Object.create(Pc.prototype);d=ad.prototype;d.jd=new K(0,1,8);d.ca=new K(0,1,6);d.dd=new K(0,1,5);d.ld=new K(0,1,3);d.da=new K(0,1,9);d.Ob=new K(0,1,6);d.pd=new K(0,1,10);d.ma=new K(0,1,10);d.ha=new K(0,1,11);d.V=function(a){a=q(a);return new zb(this.s.I.za(this.A.I,this.jd.g(a)),.5>a?this.s.R:this.A.R,X(this.s.scale,this.A.scale,this.ca,a),X(this.s.Zb,this.A.Zb,this.dd,a),X(this.s.oc,this.A.oc,this.ld,a),X(this.s.threshold,this.A.threshold,this.da,a),X(this.s.pc,this.A.pc,this.Ob,a),X(this.s.qc,this.A.qc,this.pd,a),X(this.s.focus,this.A.focus,this.ma,a),X(this.s.K,this.A.K,this.ha,a))};function gd(a,b){this.s=a;this.A=b;this.um=new Rc(this.s,this.A)}function ed(a,b,c){this.Ub=a;this.l=b;this.sign=void 0===c?1:c;this.anchor=new x;this.sd=this.anchor.F();this.start=new x;this.Vd=this.start.F();this.end=new x;this.yd=new x;this.Df=this.Ef=this.tf=0;this.pattern=null}d=ed.prototype;d.ki=.95;d.fl=.1;d.Hl=.2;d.xh=.6;d.rd=.4;d.nk=2;d.mj=.4;d.zk=Math.fround(.3);d.yk=2;d.m=function(a){Da(a,this.Ub);Da(a,this.l)};d.connect=function(a,b){this.pattern=a;this.tf=this.ki*b;this.Ef=this.l*b};d.shift=function(a,b){this.anchor.x+=a;this.anchor.y+=b;this.start.x+=a;this.start.y+=b;this.end.x+=a;this.end.y+=b;this.Ib()};d.Ib=function(){this.sd.set(this.anchor);this.Vd.set(this.start);this.yd.set(this.end)};d.update=function(a,b,c,e,f){this.Ib();this.Df=this.Ef*this.mj*f;var g=this.Ef*f,h=this.sign*c*f,k=this.sign*-b*f;f=h*g*this.xh;var l=k*g*this.xh;this.anchor.x=a.x+h*this.tf;this.anchor.y=a.y+k*this.tf;a=Math.sin(e+this.Ub*this.nk)*this.Hl+this.fl;this.start.x+=(this.anchor.x+f+g*b*a-this.start.x)*this.rd;this.start.y+=(this.anchor.y+l+g*c*a-this.start.y)*this.rd;this.end.x=this.anchor.x+g*b;this.end.y=this.anchor.y+g*c};d.v=function(a,b){var c=a.buffer.Gc(),e=this.sd.x+(this.anchor.x-this.sd.x)*b,f=this.sd.y+(this.anchor.y-this.sd.y)*b,g=this.Vd.x+(this.start.x-this.Vd.x)*b,h=this.Vd.y+(this.start.y-this.Vd.y)*b,k=this.yd.x+(this.end.x-this.yd.x)*b;b=this.yd.y+(this.end.y-this.yd.y)*b;a.buffer.xb(e,f,this.pattern.region.nb,this.pattern.region.va,g,h+this.Df,this.pattern.region.Jb,this.pattern.region.va,k,b,this.pattern.region.nb,this.pattern.region.ua,g+(k-e),h+(b-f)+this.Df,this.pattern.region.Jb,this.pattern.region.ua);a.buffer.wa(c,c+1,c+2,c+1,c+2,c+3)};function fd(a,b){this.length=a;this.Rd=b;this.Wh=this.nd.g(b/255);this.anchors=0;this.ve=this.$b=this.ga=null}d=fd.prototype;d.rd=.55;d.qa=new J(.1,.33,.5,1.5);d.nd=new J(.3,.6,1.33,1);d.m=function(a){R(a,this.length);R(a,this.Rd)};d.connect=function(a,b){var c=this.qa.g(this.length/255);this.anchors=Math.min(a.length-1,Math.max(2,Math.round(a.length*c)));this.Hb=a.length-this.anchors;this.ga=Array(this.anchors);this.$b=Array(this.anchors);this.ve=Array(this.anchors);for(c=0;c<this.anchors;++c)this.ga[c]=a[this.Hb+c].F(),this.$b[c]=this.ga[c].F(),this.ve[c]=-b*Math.cos(.5*Math.PI*(1+(c+1)/this.anchors));return this.Hb-1};d.shift=function(a,b){for(var c=0;c<this.anchors;++c)this.ga[c].x+=a,this.ga[c].y+=b;this.Ib()};d.Ib=function(){for(var a=0;a<this.anchors;++a)this.$b[a].set(this.ga[a])};d.update=function(a){this.Ib();for(var b=0;b<this.anchors;++b){var c=a[this.Hb+b].y+(a[this.Hb+b].y-a[this.Hb+b-1].y)*this.Wh-this.ga[b].y;this.ga[b].x+=(a[this.Hb+b].x+(a[this.Hb+b].x-a[this.Hb+b-1].x)*this.Wh-this.ga[b].x)*this.rd;this.ga[b].y+=c*this.rd}};d.Gc=function(){return this.anchors<<1};function Xc(a,b,c,e,f,g,h,k,l){l=void 0===l?0:l;this.pattern=a;a=0;for(var m=b.length;a<m;++a){var w=b[a];b.push(new ed(w.Ub,w.l,-w.sign))}this.Sa=b;this.ia=c;this.length=e;this.Le=this.qa.g(e/255);this.l=f;this.Nd=this.Le*this.kd.g(f/255);this.Cd=g;this.Lc=h;this.Mc=k;this.oe=l;this.Vh=new tc(this.el,this.Jk.g(g/255));this.size=this.Vh.g(this.oe/65535);this.h=Array(Math.ceil(this.Le/this.M));this.cg=this.h.length-1;b=this.h.length;c=Array(b).fill(null);e=n(this.Sa);for(f=e.next();!f.done;f=e.next())f=f.value,g=Math.max(1,Math.round(b*f.Ub)),c[g]||(c[g]=[]),c[g].push(f),f.connect(this.pattern,this.pattern.Gb.g(g/(b-1))*this.Nd);this.Ae=c;this.Y=Array(this.h.length);b=this.Pk.g(this.l/255);c=this.Ok.g(this.l/255);e=new v(b,c,this.sl);f=Array(this.h.length-1);for(g=0;g<this.h.length-1;++g)f[g]=b+(c-b)*e.g(g/(this.h.length-2));this.Tc=f;this.Ad=this.Xa=0;this.mb=this.M;this.Fd=1/this.mb}d=Xc.prototype;d.vj=0;d.uj=8;d.M=.12;d.ul=11;d.vl=6;d.nl=.01;d.nf=.055;d.ik=1.8;d.Gl=.15;d.El=.05;d.Fl=2;d.wh=.4;d.wj=.4;d.el=.1;d.qa=new v(.62,1.3,3);d.kd=new J(.1,.13,.18,4);d.hd=new J(1,5,12,2.5);d.gd=new v(30,450,.3);d.Jk=new v(50,100,4);d.Pk=new J(.15,.85,.95,1.5);d.Ok=new J(.05,.6,.7,1.5);d.sl=1.7;d.gk=.3;d.Tj=22;function hd(a,b,c){b=void 0===b?null:b;c=void 0===c?null:c;var e=[];for(var f;f=S(a);)switch(f){case xb.prototype.Z:e.push(yc(a));break;case yb.prototype.Z:e.push(zc(a));break;case zb.prototype.Z:e.push(Ac(a));break;default:throw new RangeError;}f=new vb(S(a));var g=new Ab(S(a),S(a),S(a));e=new Bc(f,e,g,new Bb(S(a)));b&&b.write(e,c);b=Array(S(a));if(!(b.length>=Xc.prototype.vj&&b.length<=Xc.prototype.uj))throw new RangeError;for(c=0;c<b.length;++c){f=c;var h=a;g=Ea(h);if(!(0<=g&&1>=g))throw new RangeError;h=Ea(h);if(!(h>=ed.prototype.zk&&h<=ed.prototype.yk))throw new RangeError;b[f]=new ed(g,h)}c=new fd(S(a),S(a));return new Xc(e,b,c,S(a),S(a),S(a),S(a),S(a),id(a))}d.m=function(a){this.pattern.m(a);R(a,this.Sa.length>>1);for(var b=0,c=this.Sa.length>>1;b<c;++b)this.Sa[b].m(a);this.ia.m(a);R(a,this.length);R(a,this.l);R(a,this.Cd);R(a,this.Lc);R(a,this.Mc);jd(a,this.oe)};d.De=function(a){return.5*Math.PI*this.Le*a*this.Nd*a*this.Tj};d.Ce=function(){return this.h[Math.round((this.h.length-1)*this.gk)]};d.moveTo=function(a){var b=a.x-this.h[0].x;a=a.y-this.h[0].y;for(var c=n(this.h),e=c.next();!e.done;e=c.next())e=e.value,e.x+=b,e.y+=a;this.Ib();c=n(this.Sa);for(e=c.next();!e.done;e=c.next())e.value.shift(b,a);this.ia.shift(b,a)};d.Ib=function(){for(var a=0;a<this.h.length;++a)this.Y[a].set(this.h[a])};d.update=function(a,b,c,e,f,g){f=void 0===f?null:f;g=void 0===g?null:g;(void 0===e?0:e)&&65535!==this.oe&&(this.size=this.Vh.g(++this.oe/65535));this.Ib();this.h[0].set(a);this.mb=this.size*this.Le/(this.h.length-1);this.Fd=1/this.mb;a=c-this.nl;a=b.angle()+Math.PI+Math.cos(this.Xa)*a*this.ul;b=Math.cos(a);a=Math.sin(a);e=1;for(var h=this.h.length;e<h;++e){var k=this.h[e].x-this.h[e-1].x,l=this.h[e].y-this.h[e-1].y,m=Math.sqrt(k*k+l*l),w=this.Tc[e-1]+(1-this.Tc[e-1])*(1-this.size),t=this.h[e-1].x+b*this.mb-this.h[e].x,r=this.h[e-1].y+a*this.mb-this.h[e].y,y=b,B=a;b=k/m;a=l/m;k+=t*w;l+=r*w;m=Math.sqrt(k*k+l*l);this.h[e].set(this.h[e-1]);this.h[e].x+=this.mb*k/m;this.h[e].y+=this.mb*l/m;if(this.Ae[e])for(k=n(this.Ae[e]),l=k.next();!l.done;l=k.next())l.value.update(this.h[e],y,B,this.Ad,this.size)}this.ia.update(this.h);(this.Xa+=this.vl*c/this.size)>Math.PI+Math.PI&&(this.Xa-=Math.PI+Math.PI);0>(this.Ad-=this.wj)&&(this.Ad+=Math.PI+Math.PI);f&&(c=this.h.length-2,b=this.h[c].x-this.Y[c].x,a=this.h[c].y-this.Y[c].y,b=b*b+a*a,b>this.nf*this.nf&&f.ab(this.h[c].x,this.h[c].y,this.Gl,(this.El+(Math.sqrt(b)-this.nf)*this.Fl)*(q(g)*this.wh+(1-this.wh))))};d.v=function(a,b){for(var c=n(this.Sa),e=c.next();!e.done;e=c.next())e.value.v(a,b);c=a.buffer.Gc();var f=c+this.ia.Gc();e=f+(this.cg+1<<1);var g=this.ia,h=this.size,k=this.pattern,l=k.region.nb+.02;k=k.region.ua-.02;a.buffer.wa(e,e+3,c);for(var m=0;m<g.anchors;++m){var w=g.$b[m].x+(g.ga[m].x-g.$b[m].x)*b,t=g.$b[m].y+(g.ga[m].y-g.$b[m].y)*b;a.buffer.xb(w,t+g.ve[m]*h,l,k,w,t-g.ve[m]*h,l,k);m!==g.anchors-1&&(m===g.anchors-2?a.buffer.wa(e+3*(m+2)-1,e+3*(m+1),c+(m<<1),c+(m<<1),c+(m+1<<1),e+3*(m+2)-1):a.buffer.wa(e+3*(m+2),e+3*(m+1),c+(m<<1),c+(m<<1),c+(m+1<<1),e+3*(m+2)))}g=this.Y[0].x+(this.h[0].x-this.Y[0].x)*b;h=this.Y[0].y+(this.h[0].y-this.Y[0].y)*b;k=f;m=1;for(w=this.h.length;m<w;++m){f=g;l=h;g=this.Y[m].x+(this.h[m].x-this.Y[m].x)*b;h=this.Y[m].y+(this.h[m].y-this.Y[m].y)*b;if(1===m){var r=g-f;var y=h-l}var B=r;var F=y;r=g-f;y=h-l;t=this.Nd*this.size;B=.5*(r+B);F=.5*(y+F);var A=this.pattern.region.Xc+(this.pattern.region.Wc-this.pattern.region.Xc)*(m-1)/(w-1);a.buffer.xb(f-t*F*this.Fd,l+t*B*this.Fd,A,this.pattern.region.va,f+t*F*this.Fd,l-t*B*this.Fd,A,this.pattern.region.ua);m>this.cg?(a.buffer.xb(f,l,this.pattern.region.nb+.5*(this.pattern.region.Jb-this.pattern.region.nb),this.pattern.region.va+.5*(this.pattern.region.ua-this.pattern.region.va)),m===w-1?a.buffer.wa(k,k+1,k+3):a.buffer.wa(k,k+1,k+4,k+4,k+3,k),k+=3):(a.buffer.wa(k,k+1,k+3,k+3,k+2,k),k+=2)}a.buffer.xb(this.Y[this.h.length-1].x+(this.h[this.h.length-1].x-this.Y[this.h.length-1].x)*b,this.Y[this.h.length-1].y+(this.h[this.h.length-1].y-this.Y[this.h.length-1].y)*b,this.pattern.region.Wc,.5*(this.pattern.region.va+this.pattern.region.ua));a.buffer.xb(this.Y[this.h.length-1].x+(this.h[this.h.length-1].x-this.Y[this.h.length-1].x)*b,this.Y[this.h.length-1].y+(this.h[this.h.length-1].y-this.Y[this.h.length-1].y)*b,this.pattern.region.nb+.5*(this.pattern.region.Jb-this.pattern.region.nb),.5*(this.pattern.region.va+this.pattern.region.ua));b=this.ia;a.buffer.wa(e,e+3,c+1);for(r=0;r<b.anchors-1;++r)r===b.anchors-2?a.buffer.wa(e+3*(r+2)-1,e+3*(r+1),c+(r<<1)+1,c+(r<<1)+1,c+(r+1<<1)+1,e+3*(r+2)-1):a.buffer.wa(e+3*(r+2),e+3*(r+1),c+(r<<1)+1,c+(r<<1)+1,c+(r+1<<1)+1,e+3*(r+2))};d.c=function(a){this.pattern.c(a)};function Tc(a,b,c){this.position=b.F();this.Ya=b.F();this.direction=c.F();this.o=c.F();this.body=a;this.speed=this.ne;this.yb=0;this.ja=new x;this.U=0;this.Hd=this.df;this.rm=a.gd.g(a.Lc/255);this.Ie=this.Kc=this.La=0;this.Ic=null;a=this.body;a.h[0]=b.F();a.Y[0]=b.F();for(b=1;b<a.h.length;++b)if(a.h[b]=Fa(a.h[b-1].F(),c.F().multiply(a.mb*a.size)),a.Y[b]=a.h[b].F(),a.Ae[b])for(var e=n(a.Ae[b]),f=e.next();!f.done;f=e.next()){f=f.value;var g=a.h[b];f.anchor.set(g);f.start.set(g);f.end.set(g)}a.cg=a.ia.connect(a.h,a.Nd)}d=Tc.prototype;d.yj=.6;d.Hg=.45;d.fe=.05;d.ge=.05;d.gh=.6;d.wk=1.25;d.fh=1.5;d.df=20;d.Xg=40;d.ek=.1;d.dk=.25;d.fk=.07;d.nh=.4;d.ne=Math.fround(.015);d.mf=Math.fround(.078);d.ll=.0155;d.ml=.025;d.kl=.06;d.jl=.996;d.oh=.0045;d.oi=.003;d.pi=.0015;d.og=5;d.Te=30;d.zl=.0013;d.qf=Math.fround(.06);d.Bl=.4;d.Al=.94;d.Cl=.005;d.sh=.95;d.th=.025;d.yl=.4*Math.PI;d.dl=.2;d.ie=120;function yd(a,b,c,e){c=hd(a,c,e);e=(new x).O(a);if(!(.01>Math.abs(e.length()-1)))throw new RangeError;b=new Tc(c,b,e);b.Kc=id(a);b.La=S(a);if(b.La>Tc.prototype.ie)throw new RangeError;b.Hd=S(a);if(b.Hd>Tc.prototype.Xg)throw new RangeError;b.speed=Ea(a);if(!(b.speed>=Tc.prototype.ne&&b.speed<=Tc.prototype.mf))throw new RangeError;b.yb=S(a);if(b.yb>Tc.prototype.Te)throw new RangeError;b.U=Ea(a);if(!(0<=b.U&&b.U<=Tc.prototype.qf))throw new RangeError;if(0!==b.U&&(b.ja.O(a),!(.01>Math.abs(b.ja.length()-1))))throw new RangeError;return b}d.m=function(a){this.body.m(a);this.direction.m(a);jd(a,Math.min(65535,this.Kc));R(a,this.La);R(a,this.Hd);Da(a,this.speed);R(a,this.yb);Da(a,this.U);0!==this.U&&this.ja.m(a)};d.De=function(){return this.body.De(this.body.size)};d.moveTo=function(a){this.body.moveTo(a);this.position.set(a);this.Ya.set(this.position)};d.Ce=function(){return this.body.Ce()};d.xd=function(a){this.moveTo(a);this.speed=this.kl};function zd(a,b){b=a.direction.angle()+Math.PI+a.yl*(2*q(b)-1);La(a.ja,b);a.U=a.qf}d.Wb=function(a,b){this.yb=Math.floor(this.Te*b);this.U=this.qf;Fa(this.ja.set(this.position),a).normalize()};d.He=function(a,b){var c=this.position.x-a.position.x,e=this.position.y-a.position.y;if(0!==c||0!==e){var f=c*c+e*e;if(f<this.fh*this.fh)if(f=Math.sqrt(f),++this.Ie,++a.Ie,this.Ic=a,a.Ic=this,this.speed<a.speed?this.speed+=(a.speed-this.speed)*this.oh:a.speed<this.speed&&(a.speed+=(this.speed-a.speed)*this.oh),f<this.gh){var g=1-f/this.gh;c=g*this.Hg*c/f;e=g*this.Hg*e/f;this.o.x+=this.speed*c;this.o.y+=this.speed*e;a.o.x-=a.speed*c;a.o.y-=a.speed*e;0===this.U&&0!==a.U&&q(b)<this.th?(this.ja.set(a.ja),this.U=a.U*this.sh):0!==this.U&&0===a.U&&q(b)<this.th&&(a.ja.set(this.ja),a.U=this.U*a.sh)}else f<this.wk?(this.o.x+=this.speed*this.fe*a.direction.x,this.o.y+=this.speed*this.fe*a.direction.y,a.o.x+=a.speed*this.fe*this.direction.x,a.o.y+=a.speed*this.fe*this.direction.y):(0<-c*this.direction.x-e*this.direction.y&&(this.o.x-=this.speed*this.ge*c/f,this.o.y-=this.speed*this.ge*e/f),0<c*a.direction.x+e*a.direction.y&&(a.o.x+=a.speed*this.ge*c/f,a.o.y+=a.speed*this.ge*e/f))}};d.cb=function(a){var b=a.g(this.position);if(0<b)if(1<b)this.o.set(a.ba),a.cb(this.position);else return b*=this.yj,0>this.o.wd(a.ba)?0<this.o.y*a.ba.x-this.o.x*a.ba.y?(this.o.x+=this.speed*this.direction.y*b,this.o.y-=this.speed*this.direction.x*b):(this.o.x-=this.speed*this.direction.y*b,this.o.y+=this.speed*this.direction.x*b):(this.o.x+=this.speed*a.ba.x*b,this.o.y+=this.speed*a.ba.y*b),this.U=0,!1;else if(-1===b)return!0};function Ad(a,b){a.yb=a.og+Math.floor(q(b)*(a.Te-a.og))}d.update=function(a,b,c){if(this.cb(a))return!0;++this.Kc;this.Kc>this.rm&&this.body.size>this.dl?this.La<this.ie&&++this.La:this.La=0;this.ja&&(a=this.speed*Math.pow(this.U,this.Bl),this.o.normalize().multiply(this.speed),0<this.direction.wd(this.ja)?(this.o.x+=this.ja.x*a,this.o.y+=this.ja.y*a):0<this.direction.y*this.ja.x-this.direction.x*this.ja.y?(this.o.x+=this.direction.y*a,this.o.y-=this.direction.x*a):(this.o.x-=this.direction.y*a,this.o.y+=this.direction.x*a),this.U=this.U<this.Cl?0:this.U*this.Al);this.speed*=this.jl;this.speed<this.ne&&(this.speed=this.ne);this.yb&&(--this.yb,this.speed+=this.pi,this.speed>this.mf&&(this.speed=this.mf));this.direction.set(this.o).normalize();this.o.set(this.direction);this.speed<this.ml&&(0===this.yb&&q(c)<this.oi?Ad(this,c):0===this.U&&q(c)<this.zl?zd(this,c):this.speed<this.ll&&0===--this.Hd&&(this.Hd=this.df+Math.floor((this.Xg-this.df)*q(c)),b.ab(this.position.x,this.position.y,this.ek,this.dk),a=2*(q(c)-.5)*this.fk,this.o.x+=this.direction.y*a,this.o.y-=this.direction.x*a,this.o.normalize()));a=this.speed*(this.nh+(1-this.nh)*this.body.size);this.Ya.set(this.position);this.position.add(this.o.multiply(a));this.body.update(this.position,this.direction,a,!0,b,c);return!1};d.v=function(a,b){this.body.v(a,b)};d.c=function(a){this.body.c(a)};function Bd(a){this.border=a=void 0===a?this.pg:a;this.ba=new x(0,0)}Bd.prototype.pg=1.25;Bd.prototype.Wg=.3;Bd.prototype.cf=Lb.prototype.DEPTH;function Cd(a,b){this.position=a;this.l=b;Bd.call(this)}Cd.prototype=Object.create(Bd.prototype);d=Cd.prototype;d.DEPTH=1;d.Eh=function(a){var b=Ea(a);a=Ea(a);if(!(0<=a&&2>=a))throw new RangeError;return new Dd(b,a)};d.Gf=function(a){var b=a.x-this.position.x;a=a.y-this.position.y;return new Dd(Math.atan2(a,b),Math.sqrt(b*b+a*a)/this.l)};d.Ff=function(a){return new x(this.position.x+Math.cos(a.angle)*a.Yb*this.l,this.position.y+Math.sin(a.angle)*a.Yb*this.l)};d.cb=function(a){var b=a.x-this.position.x,c=a.y-this.position.y,e=b*b+c*c;if(e<this.l*this.l)return!0;e=Math.sqrt(e);a.x=this.position.x+this.l*b/e;a.y=this.position.y+this.l*c/e;return!0};d.Dc=function(a,b){a-=this.position.x;b-=this.position.y;b=a*a+b*b;return b<this.l*this.l?0:Math.sqrt(b)-this.l};d.contains=function(a,b){a-=this.position.x;b-=this.position.y;return a*a+b*b<this.l*this.l?this:null};d.g=function(a){var b=this.l-this.border,c=a.x-this.position.x;a=a.y-this.position.y;var e=c*c+a*a;if(e<b*b)return 0;e=Math.sqrt(e);this.ba.x=c;this.ba.y=a;this.ba.Ec(-e);return(e-b)/this.border};d.Bd=function(){return Math.ceil(2*Math.PI*this.l/this.Wg)};d.te=function(a,b){var c=a.length>>1,e=this.Bd();a.push(this.position.x,this.position.y);for(var f=0;f<e;++f){var g=2*Math.PI*f/e;a.push(this.position.x+Math.cos(g)*this.l,this.position.y+Math.sin(g)*this.l);b.push(c,c+f+1,c+(f+1)%e+1)}};d.se=function(a,b){var c=a.length>>2,e=this.Bd();a.push(this.position.x,this.position.y,1,this.DEPTH);for(var f=0;f<e;++f){var g=2*Math.PI*f/e,h=this.l+this.cf;a.push(this.position.x+Math.cos(g)*h,this.position.y+Math.sin(g)*h,0,this.DEPTH);b.push(c,c+f+1,c+(f+1)%e+1)}};function Ed(a,b,c){this.position=a;this.l=b;this.ya=.5*c;Bd.call(this,Math.min(this.pg,this.ya))}Ed.prototype=Object.create(Bd.prototype);Ed.prototype.DEPTH=.5;Ed.prototype.cb=function(a,b,c,e){e>this.l-this.ya&&e<this.l+this.ya||(e<this.l-this.ya?(a.x=this.position.x+(this.l-this.ya)*b/e,a.y=this.position.y+(this.l-this.ya)*c/e):(a.x=this.position.x+(this.l+this.ya)*b/e,a.y=this.position.y+(this.l+this.ya)*c/e))};Ed.prototype.contains=function(a,b){a-=this.position.x;b-=this.position.y;b=Math.sqrt(a*a+b*b);return b>this.l-this.ya&&b<this.l+this.ya?this:null};Ed.prototype.g=function(a,b,c){var e=this.l-this.ya+this.border,f=this.l+this.ya-this.border;return c<e?(this.ba.x=a,this.ba.y=b,this.ba.Ec(c),(e-c)/this.border):c>f?(this.ba.x=a,this.ba.y=b,this.ba.Ec(-c),(c-f)/this.border):0};function Fd(a,b){this.j=a;this.width=b;this.ba=null;b=Array(a.length);for(var c=0;c<a.length;++c)b[c]=new Ed(a[c].N,a[c].l,this.width);this.Za=b}function Gd(a,b,c,e){this.N=a;this.l=b;this.Rf=e-c;this.start=c;this.end=e;this.td=Math.cos(.5*this.Rf);this.direction=La(new x,c+.5*this.Rf)}d=Fd.prototype;d.Eh=function(a){var b=S(a),c=Ea(a);if(!(-1<=c&&2>=c))throw new RangeError;a=Ea(a);if(!(0<=a&&1>=a))throw new RangeError;return new Hd(b,c,a)};d.Gf=function(a){for(var b=0;b<this.j.length;++b){var c=a.x-this.j[b].N.x,e=a.y-this.j[b].N.y,f=Math.sqrt(c*c+e*e);if(c*this.j[b].direction.x+e*this.j[b].direction.y>=this.j[b].td*f)return new Hd(b,(f-(this.j[b].l-.5*this.width))/this.width,Math.acos((c*Math.cos(this.j[b].start)+e*Math.sin(this.j[b].start))/f)/this.j[b].Rf)}return null};d.Ff=function(a){var b=this.j[a.index].start+(this.j[a.index].end-this.j[a.index].start)*a.progress,c=this.j[a.index].l+this.width*(a.l-.5);return new x(this.j[a.index].N.x+Math.cos(b)*c,this.j[a.index].N.y+Math.sin(b)*c)};d.cb=function(a){for(var b=0;b<this.j.length;++b){var c=a.x-this.j[b].N.x,e=a.y-this.j[b].N.y,f=Math.sqrt(c*c+e*e);if(c*this.j[b].direction.x+e*this.j[b].direction.y>=this.j[b].td*f)return this.Za[b].cb(a,c,e,f),!0}return!1};d.Dc=function(a,b){for(var c=0;c<this.j.length;++c){var e=a-this.j[c].N.x,f=b-this.j[c].N.y,g=Math.sqrt(e*e+f*f);if(e*this.j[c].direction.x+f*this.j[c].direction.y>=this.j[c].td*g)return g>this.j[c].l-.5*this.width&&g<this.j[c].l+.5*this.width?0:g<this.j[c].l-.5*this.width?this.j[c].l-.5*this.width-g:g-this.j[c].l-.5*this.width}return Infinity};d.contains=function(a,b){for(var c=0;c<this.j.length;++c){var e=a-this.j[c].N.x,f=b-this.j[c].N.y;if(e*this.j[c].direction.x+f*this.j[c].direction.y>=this.j[c].td*Math.sqrt(e*e+f*f)&&(e=this.Za[c].contains(a,b)))return e}return null};d.g=function(a){for(var b=0;b<this.j.length;++b){var c=a.x-this.j[b].N.x,e=a.y-this.j[b].N.y,f=Math.sqrt(c*c+e*e);if(c*this.j[b].direction.x+e*this.j[b].direction.y>=this.j[b].td*f)return a=this.Za[b].g(c,e,f),this.ba=this.Za[b].ba,a}return-1};d.Bd=function(a){return Math.ceil((this.j[a].end-this.j[a].start)*this.j[a].l/this.Za[a].Wg)};d.te=function(a,b){for(var c=this.j.length;0<c--;)for(var e=a.length>>1,f=this.Bd(c),g=0;g<=f;++g){var h=this.j[c].start+(this.j[c].end-this.j[c].start)*g/f,k=this.j[c].l-.5*this.width,l=this.j[c].l+.5*this.width;a.push(this.j[c].N.x+Math.cos(h)*k,this.j[c].N.y+Math.sin(h)*k,this.j[c].N.x+Math.cos(h)*l,this.j[c].N.y+Math.sin(h)*l);g!==f&&b.push(e+(g<<1),e+(g<<1)+1,e+(g<<1)+2,e+(g<<1)+2,e+(g<<1)+3,e+(g<<1)+1)}};d.se=function(a,b){for(var c=this.j.length;0<c--;)for(var e=a.length>>2,f=this.Bd(c),g=0;g<=f;++g){var h=this.j[c].start+(this.j[c].end-this.j[c].start)*g/f,k=this.j[c].l-.5*this.width-this.Za[c].cf,l=this.j[c].l,m=this.j[c].l+.5*this.width+this.Za[c].cf;a.push(this.j[c].N.x+Math.cos(h)*k,this.j[c].N.y+Math.sin(h)*k,0,this.Za[c].DEPTH,this.j[c].N.x+Math.cos(h)*l,this.j[c].N.y+Math.sin(h)*l,1,this.Za[c].DEPTH,this.j[c].N.x+Math.cos(h)*m,this.j[c].N.y+Math.sin(h)*m,0,this.Za[c].DEPTH);g!==f&&b.push(e+3*g,e+3*g+1,e+3*g+4,e+3*g+4,e+3*g+3,e+3*g,e+3*g+1,e+3*g+2,e+3*g+5,e+3*g+5,e+3*g+4,e+3*g+1)}};function Dd(a,b){this.angle=a;this.Yb=b}Dd.prototype.m=function(a){Da(a,this.angle);Da(a,this.Yb)};function Hd(a,b,c){this.index=a;this.l=b;this.progress=c}Hd.prototype.m=function(a){R(a,this.index);Da(a,this.l);Da(a,this.progress)};function Id(a,b,c,e,f,g,h){var k=this;this.a=a;this.Ga=c;this.bottom=new E(a,e,f,a.RGB,!1,a.NEAREST);this.bottom.target();this.b=a.b.createVertexArrayOES();b.write(g,h);G.call(this,a,[new mb(this.b,function(){a.enableVertexAttribArray(k.Ga.f.aPosition);a.vertexAttribPointer(k.Ga.f.aPosition,2,a.FLOAT,!1,16,0)})])}Id.prototype=Object.create(G.prototype);Id.prototype.v=function(){this.Ga.f.use();this.a.b.bindVertexArrayOES(this.b);this.a.activeTexture(this.a.TEXTURE0);this.a.bindTexture(this.a.TEXTURE_2D,this.bottom.L);ab(this)};Id.prototype.c=function(){this.bottom.c();this.a.b.deleteVertexArrayOES(this.b)};function Jd(a,b,c,e){this.width=Math.ceil(a/this.M);this.height=Math.ceil(b/this.M);this.pa=Array(this.width*this.height);for(a=0;a<this.height;++a)for(b=0;b<this.width;++b){var f=(b+q(e)*this.hh)*this.M,g=(a+q(e)*this.hh)*this.M;this.pa[b+a*this.width]=c.contains(f,g)?null:new x(f,g)}}Jd.prototype.M=.18;Jd.prototype.hh=.8;Jd.prototype.sort=function(){this.pa=this.pa.sort(function(a,b){return a===b?0:null===a?100:null===b?-100:b.y-a.y})};function Kd(a,b,c,e,f){for(var g=Math.max(0,Math.min(a.width-1,Math.floor((b-e)/a.M))),h=Math.max(0,Math.min(a.width-1,Math.floor((b+e)/a.M))),k=Math.max(0,Math.min(a.height-1,Math.floor((c+f)/a.M))),l=Math.max(0,Math.min(a.height-1,Math.floor((c-f)/a.M)));l<=k;++l)for(var m=g;m<=h;++m){var w=a.pa[m+l*a.width];if(w){var t=w.x-b;w=e/f*(w.y-c);t*t+w*w<e*e&&(a.pa[m+l*a.width]=null)}}}function Ld(a,b,c,e,f,g){this.hb=Md(this,a,b,c,e,f,g)}function Nd(a,b,c,e){this.x=a;this.y=b;this.l=c;this.height=e}d=Ld.prototype;d.$e=z("--f");d.tc=z("--g");d.Pb=6;d.sk=.15;d.bd=.11;d.qk=.4;d.rk=1.5;d.eh=1.2;d.uk=1.6;d.bh=1;d.pk=2;d.ah=.07;d.tk=.06;d.sb=1.18;d.dh=.6;d.ef=.8;function Md(a,b,c,e,f,g,h){var k=[],l=[],m=[];Od(a,m,c.big.G.position.x,c.big.G.position.y,c.big.G.l,0,2*Math.PI,c.width,c.height,g.Vf.bind(g),h);Od(a,m,c.small.G.position.x,c.small.G.position.y,c.small.G.l,0,2*Math.PI,c.width,c.height,g.Vf.bind(g),h);for(var w=n(c.T.G.j),t=w.next();!t.done;t=w.next())t=t.value,Od(a,m,t.N.x,t.N.y,t.l-.5*c.T.G.width,t.start,t.end,c.width,c.height,g.Wf.bind(g),h),Od(a,m,t.N.x,t.N.y,t.l+.5*c.T.G.width,t.start,t.end,c.width,c.height,g.Wf.bind(g),h);m.sort(function(r,y){return y.y-r.y});g=n(m);for(m=g.next();!m.done;m=g.next())m=m.value,Pd(a,k,l,m.x,m.y,m.l,m.height,f,h),Kd(e,m.x,m.y,m.l*a.sb,m.l*f*a.sb);(new hb(c.width,c.height,a.Pb,[3],[4],[],[5])).apply(k);return new jb(b,new ib(k,l),65535<a.fc(k)-1)}d.fc=function(a){return a.length/this.Pb};function Od(a,b,c,e,f,g,h,k,l,m,w){var t=2*Math.PI*f;h-=g;var r=-1;for(g+=2*Math.PI*a.bd/t;0<h;){var y=(2*q(w)-1)*a.tk,B=c+Math.cos(g)*(f+y);y=e+Math.sin(g)*(f+y);var F=void 0;if(0>B||B>k||0>y||y>l||0>=(F=m(B,y)))g+=a.bd,h-=a.bd;else{F=a.bd+(a.qk-a.bd)*Math.pow(q(w),a.rk)*F;var A=F*(a.bh+(a.pk-a.bh)*q(w));Math.abs(A-r)<a.ah&&(A=r+Math.sign(A-r)*a.ah);r=2*Math.PI*F/t*(a.eh+(a.uk-a.eh)*q(w));b.push(new Nd(B,y,F,A));g+=r;h-=r;r=A}}}function Pd(a,b,c,e,f,g,h,k,l){var m=a.fc(b),w=Math.ceil(2*Math.PI*g/a.sk),t=q(l)*Math.PI/w;l=.5*(-.5+q(l));for(var r=.8-.4*l,y=m,B=y,F=0;F<w;++F){var A=F<=w>>1,Qa=A?3:1,O=2*Math.PI*F/w+t,M=Math.cos(O)*g;O=Math.sin(O)*g*k;b.push(a.$e.r*r,a.$e.C*r,a.$e.B*r,e+M*a.sb,f+O*a.sb,h+M*l*a.sb);if(A){var P=Math.sqrt(M*M+O*O);P=a.dh+(1-a.dh)*Math.max(0,M/P*(1/Math.sqrt(2))+O/P*(1/Math.sqrt(2)));b.push(a.tc.r*P*a.ef,a.tc.C*P*a.ef,a.tc.B*P*a.ef,e+M,f+O,0,a.tc.r*P,a.tc.C*P,a.tc.B*P,e+M*a.sb,f+O*a.sb,h+M*l*a.sb)}A&&0!==F&&c.push(B+1,B+2,y+2,y+2,y+1,B+1);1<F&&c.push(m,B,y);B=y;y+=Qa}}d.c=function(){this.hb.c()};function Qd(a,b,c,e,f){this.Pc=new Rd(b.width,b.height);this.hb=this.Jf(a,b,new Sd(c,e,this.Pc,f))}function Td(a,b,c,e){this.fn=a;this.hn=0;this.flex=b;this.K=c;this.length=e}Td.prototype.g=function(a,b){a-=this.fn;b-=this.hn;var c=Math.sqrt(a*a+b*b)/this.length;return new x(b*this.flex*Math.pow(c,this.K),a*this.flex*Math.pow(c,this.K))};function Ud(a,b,c,e){for(;c<=e;++c){var f=c*Qd.prototype.Pb,g=a.g(b[f+3],b[f+5]);b[f+6]+=g.x;b[f+7]+=g.y}}d=Qd.prototype;d.Pb=10;d.Sl=.6;d.Jf=function(a,b,c){for(var e=[],f=[],g=n(c.pa.pa),h=g.next();!h.done;h=g.next()){var k=h.value;if(k){var l=c.yf,m=k.x,w=k.y,t=Math.floor(m*l.ub),r=Math.floor(w*l.ub),y=m*l.ub-t,B=l.Sc[r*l.lb+t]+(l.Sc[r*l.lb+t+1]-l.Sc[r*l.lb+t])*y,F=B+(l.Sc[(r+1)*l.lb+t]+(l.Sc[(r+1)*l.lb+t+1]-l.Sc[(r+1)*l.lb+t])*y-B)*(w*l.ub-r),A=Math.min(c.yf.Vf(k.x,k.y),c.yf.Wf(k.x,k.y)),Qa=Math.max(0,Math.min(1,-A/c.mi))*(1-Math.max(0,Math.min(1,(F-c.qg)/(c.Di-c.qg))));if(q(c.random)<Qa*c.zi){var O=k.x,M=k.y,P=c.random,kb=Vd(this,O,M,P),Aa=this.rg+(this.Gi-this.rg)*Math.pow(Qa*q(P),this.Hi),le=Aa*this.yi,me=Aa*this.vi,ne=Aa*this.Qi,oe=Aa*this.Li,pe=.5*Math.PI+(2*q(P)-1)*this.ui,Cb=Math.cos(pe),Db=Math.sin(pe),kd=new Td(O,this.Ei,this.Fi,Aa),Kf=new Wd(O+Cb*ne,Db*ne,O+Cb*oe,Db*oe,this.Ki,this.Ji,this.Ii,this.Oi,this.Pi,this.Ri,this.Ni,this.Mi,P),ld=O+Cb*le,md=Db*le,qe=O+Cb*me,re=Db*me,fc=M,Lf=this.wi*Aa,Ga=kb,ma=this.Ai,Ba=this.xi,Mf=kd,Z=this.fc(e),gc=qe-ld,hc=re-md,nd=Math.sqrt(gc*gc+hc*hc),se=-hc/nd,te=gc/nd,Ra=Math.max(this.ti,Math.round(nd/this.si)+1);e.push(.5*ma.r*(Ba+1),.5*ma.C*(Ba+1),.5*ma.B*(Ba+1),ld,fc,md,0,0,Ga.x,Ga.y);f.push(Z,Z+1,Z+2);for(var xa=1;xa<Ra-1;++xa){var od=xa/(Ra-1),ue=ld+gc*od,ve=md+hc*od,ic=Lf*Math.pow(Math.cos(Math.PI*(od-.5)),this.ri);e.push(ma.r*Ba,ma.C*Ba,ma.B*Ba,ue+se*ic,fc,ve+te*ic,0,0,Ga.x,Ga.y);e.push(ma.r,ma.C,ma.B,ue-se*ic,fc,ve-te*ic,0,0,Ga.x,Ga.y);xa!==Ra-2&&f.push(Z+(xa<<1)-1,Z+(xa<<1),Z+(xa<<1)+2,Z+(xa<<1)+2,Z+(xa<<1)+1,Z+(xa<<1)-1)}e.push(.5*ma.r*(Ba+1),.5*ma.C*(Ba+1),.5*ma.B*(Ba+1),qe,fc,re,0,0,Ga.x,Ga.y);f.push(Z+(Ra-2<<1)-1,Z+(Ra-2<<1),Z+(Ra-2<<1)+1);Ud(Mf,e,Z,Z+(Ra-1<<1)-1);Xd(this,O,O+Cb*Aa,Db*Aa,M,this.Si*Aa,this.Ti,kb,this.Ci,this.Ui,kd,e,f);for(var U=Kf,Nf=M,Of=kb,Pf=this.Bi,Qf=kd,jc=P,pd=.5>q(jc)?-1:1,xe=n(U.Ke),qd=xe.next();!qd.done;qd=xe.next()){var rd=qd.value,sd=U.en+U.eb*rd,td=U.gn+U.ye*rd,Rf=Qf.g(sd,td),ye=U.Qh+(U.qm-U.Qh)*rd,ze=U.direction+pd*(U.Rh+(U.sm-U.Rh)*q(jc)),Sf=U.Nh+(U.lm-U.Nh)*q(jc),Tf=.5>q(jc)?-1:1;pd=-pd;var V=Rf,Ha=sd,Ia=td,ud=sd+Math.cos(ze)*ye,vd=td+Math.sin(ze)*ye,Ja=Nf,Uf=U.width,Ae=Sf*Tf,W=Of,L=Pf,H=this.fc(e),Sa=ud-Ha,Ta=vd-Ia,kc=Math.sqrt(Sa*Sa+Ta*Ta),Ua=Sa/kc,Eb=Ta/kc,lc=Math.max(this.Xj,Math.round(kc/this.Wj)+1),na=0>Ua?this.Vg:1,oa=0>Ua?1:this.Vg,mc=(0>Ua?this.Ug:-this.Ug)*(1-Math.abs(Eb));e.push(L.r*na,L.C*na,L.B*na,Ha,Ja,Ia,V.x,V.y,W.x,W.y,L.r*oa,L.C*oa,L.B*oa,Ha,Ja,Ia,V.x,V.y,W.x,W.y);f.push(H,H+2,H+3,H+1,H+4,H+5);for(var N=1;N<lc-1;++N){var Ca=N/(lc-1),Ka=kc*Uf*.5*Math.cos(Math.PI*(Ca-.5));e.push(L.r*na,L.C*na,L.B*na,Ha+Sa*Ca+Eb*Ka*mc,Ja,Ia+Ta*Ca-Ua*Ka*mc,V.x,V.y,W.x,W.y,L.r*oa,L.C*oa,L.B*oa,Ha+Sa*Ca+Eb*Ka,Ja,Ia+Ta*Ca-Ua*Ka,V.x,V.y,W.x,W.y);e.push(L.r*oa,L.C*oa,L.B*oa,Ha+Sa*Ca+Eb*Ka*mc,Ja,Ia+Ta*Ca-Ua*Ka*mc,V.x,V.y,W.x,W.y,L.r*na,L.C*na,L.B*na,Ha+Sa*Ca-Eb*Ka,Ja,Ia+Ta*Ca+Ua*Ka,V.x,V.y,W.x,W.y);N!==lc-2?f.push(H+(N<<2)-2,H+(N<<2)-1,H+(N<<2)+3,H+(N<<2)+3,H+(N<<2)+2,H+(N<<2)-2,H+(N<<2),H+(N<<2)+1,H+(N<<2)+5,H+(N<<2)+5,H+(N<<2)+4,H+(N<<2)):f.push(H+(N<<2)-2,H+(N<<2)-1,H+(N<<2)+2,H+(N<<2),H+(N<<2)+1,H+(N<<2)+3)}e.push(L.r*na,L.C*na,L.B*na,ud,Ja,vd,V.x,V.y,W.x,W.y,L.r*oa,L.C*oa,L.B*oa,ud,Ja,vd,V.x,V.y,W.x,W.y);for(var wd=H;wd<=H+(lc-1<<2)-1;++wd){var lb=wd*this.Pb,Be=e[lb+3]-Ha,Ce=e[lb+5]-Ia,De=0===Be&&0===Ce?new x:new x(Ce*Ae,Be*Ae);e[lb+6]+=De.x;e[lb+7]+=De.y}}}else for(var nc=k.x,Ee=k.y,oc=c.random,pc=this.Kg+(this.Jj-this.Kg)*q(oc),Vf=this.Dj.F().multiply(1-this.Fj*q(oc)-this.Ej*A),Wf=new Td(nc,this.Jg+(this.Hj-this.Jg)*q(oc),this.Ij,pc),xd=0;xd<this.Ig;++xd){var Fe=.5*Math.PI+(xd/(this.Ig-1)*2-1)*this.Gj;Xd(this,nc,nc+Math.cos(Fe)*pc,Math.sin(Fe)*pc,Ee,this.Kj*pc,this.Lj,Vd(this,nc,Ee,oc),Vf,this.Mj,Wf,e,f)}c.Pc.add(k.x,k.y)}}for(var qc=c.Pc,rc=0,Xf=qc.cells.length;rc<Xf;++rc)qc.cells[rc]=Math.min(1,qc.cells[rc]/qc.tm);(new hb(b.width,b.height,this.Pb,[3],[4],[6],[5,7],[8],[9])).apply(e);return new jb(a,new ib(e,f),65535<this.fc(e)-1)};d.fc=function(a){return a.length/this.Pb};function Vd(a,b,c,e){var f=q(e)*Math.PI*2;a=Math.sqrt(q(e))*a.Sl;return new x(b+Math.cos(f)*a,c+Math.sin(f)*a)}d.c=function(){this.hb.c()};d.tl=.3;function Xd(a,b,c,e,f,g,h,k,l,m,w,t,r){var y=a.fc(t),B=c-b,F=e-0,A=Math.sqrt(B*B+F*F),Qa=-F/A,O=B/A;a=Math.max(2,Math.round(A/a.tl)+1);for(A=0;A<a-1;++A){var M=A/(a-1),P=b+B*M,kb=F*M;M=g*Math.pow(1-M,h);t.push(l.r*m,l.C*m,l.B*m,P+Qa*M,f,kb+O*M,0,0,k.x,k.y,l.r,l.C,l.B,P-Qa*M,f,kb-O*M,0,0,k.x,k.y);A!==a-2?r.push(y+(A<<1),y+(A<<1)+1,y+(A<<1)+3,y+(A<<1)+3,y+(A<<1)+2,y+(A<<1)):r.push(y+(A<<1),y+(A<<1)+1,y+(A<<1)+2)}t.push(l.r*(1-.5*(1-m)),l.C*(1-.5*(1-m)),l.B*(1-.5*(1-m)),c,f,e,0,0,k.x,k.y);Ud(w,t,y,y+(a-1<<1))}function Wd(a,b,c,e,f,g,h,k,l,m,w,t,r){this.en=a;this.gn=b;this.eb=c-a;this.ye=e-b;this.direction=Math.atan2(this.ye,this.eb);this.Rh=g;this.sm=h;this.Qh=k;this.qm=l;this.width=m;this.Nh=w;this.lm=t;a=Math.sqrt(this.eb*this.eb+this.ye*this.ye);this.Ke=Array(Math.round(a/f));for(f=0;f<this.Ke.length;++f)this.Ke[f]=q(r)*a;this.Ke.sort(function(y,B){return B-y})}d.Wj=.15;d.Xj=5;d.Ug=.5;d.Vg=.8;d.ti=3;d.si=.11;d.ri=.25;d.Dj=z("--o");d.Fj=.15;d.Ej=.4;d.Jg=.2;d.Hj=.4;d.Ij=1.7;d.Kg=.5;d.Jj=.7;d.Ig=3;d.Gj=.23;d.Mj=.85;d.Kj=.19;d.Lj=.8;d.Ci=z("--q");d.Ai=z("--r");d.Bi=z("--p");d.ui=.05;d.Ei=.15;d.Fi=1.5;d.rg=1.5;d.Gi=2.1;d.Hi=1.5;d.Si=.02;d.Ti=.7;d.Ui=.7;d.Qi=.1;d.Li=.55;d.Ki=.36;d.Ji=.8;d.Ii=1.5;d.Oi=.8;d.Pi=.35;d.Ri=.6;d.Ni=.04;d.Mi=.22;d.yi=.65;d.vi=.95;d.wi=.04;d.xi=.65;function Rd(a,b){var c=Jd.prototype.M;this.$d=Math.ceil(a/this.M);this.mg=Math.ceil(b/this.M);this.cells=Array(this.$d*this.mg).fill(0);this.tm=this.M/c*(this.M/c)}Rd.prototype.M=.4;Rd.prototype.add=function(a,b){++this.cells[Math.max(0,Math.min(this.$d-1,Math.floor(a/this.M)))+Math.max(0,Math.min(this.mg-1,Math.floor(b/this.M)))*this.$d]};Rd.prototype.g=function(a,b){return this.cells[Math.max(0,Math.min(this.$d-1,Math.floor(a/this.M)))+Math.max(0,Math.min(this.mg-1,Math.floor(b/this.M)))*this.$d]};function Sd(a,b,c,e){a.sort();this.pa=a;this.yf=b;this.Pc=c;this.random=e}Sd.prototype.mi=.1;Sd.prototype.zi=.2;Sd.prototype.qg=.2;Sd.prototype.Di=1.1;function Yd(a,b,c,e){e=this.Uh=new Zd(Math.ceil(b*this.yc),Math.ceil(c*this.yc),e);this.Hm=new Zd(e.width,e.height,e.Km);this.lb=Math.ceil(b*this.ub)+1;b=Math.ceil(c*this.ub)+1;c=Array(this.lb*b);for(e=0;e<b;++e)for(var f=0;f<this.lb;++f)c[f+e*this.lb]=a.Dc(f/this.ub,e/this.ub);this.Sc=c}d=Yd.prototype;d.yc=.9;d.le=.36;d.ub=3;d.Vf=function(a,b){return(this.Uh.g(a*this.yc,b*this.yc)-this.le)/(1-this.le)};d.Wf=function(a,b){return(this.Hm.g(a*this.yc,b*this.yc)-this.le)/(1-this.le)};function $d(a,b,c){var e=new Jd(b.width,b.height+this.Tl,b,c),f=new Yd(b,e.width,e.height,c);this.a=a;this.Uf=new Ld(a,b,e,this.wb,f,c);this.Me=new Qd(a,b,e,f,c)}$d.prototype.wb=.74;$d.prototype.Tl=.3;$d.prototype.v=function(a,b,c,e){b.v();a.v(c,e)};$d.prototype.c=function(){this.Me.c();this.Uf.c()};function ae(a,b,c,e,f,g){this.Yb=c;this.speed=e;this.gb=f;this.Gd=0;this.from=a;this.eb=b.x-a.x;this.xe=b.y-a.y;this.Qc=Math.ceil(Math.sqrt(this.eb*this.eb+this.xe*this.xe)/this.vk)+1;a=Array(this.Qc);for(b=0;b<a.length;++b)a[b]=this.Uj*Math.pow(q(g),this.Vj);this.Im=a}d=ae.prototype;d.vk=2.5;d.xk=.8;d.Ak=.3;d.Uj=2;d.Vj=2.5;d.update=function(a){for(var b=a.Ua.scale,c=Math.sin(this.Gd/this.Yb*Math.PI)*this.gb,e=a.Ua.Aa.Gc(),f=0;f<=this.Qc;++f){var g=this.Im[f],h=this.from.x+this.eb*f/this.Qc+this.Gd,k=this.from.y+this.xe*f/this.Qc;a.Ua.Aa.xb((h-g-this.Ak)*b,k*b,0,0,0,(h-g)*b,k*b,0,0,Math.sin(f/this.Qc*Math.PI)*c,(h-g+this.xk)*b,k*b,0,0,0);f!==this.Qc&&a.Ua.Aa.wa(e+3*f,e+3*f+1,e+3*f+4,e+3*f+4,e+3*f+3,e+3*f,e+3*f+1,e+3*f+2,e+3*f+5,e+3*f+5,e+3*f+4,e+3*f+1)}this.Gd+=this.speed;return this.Gd>this.Yb};function be(a){this.gb=this.frequency=0;this.ei=1;this.D=a;this.Ja=[]}d=be.prototype;d.Qk=new I(10,15);d.Kk=new I(.9,1.6);d.Ob=new I(-.3,.3);d.Ik=new I(.6,1.4);d.Nk=new I(.15,.3);d.li=.16;d.update=function(a,b,c,e){if(0>--this.ei){if(q(e)<this.frequency){var f=this.Ob.g(q(e)),g=this.Kk.g(q(e))*this.D.height,h=this.Ik.g(q(e))*this.D.width,k=new x(-.5*h+this.D.width*q(e),-.5*g+this.D.height*q(e));f=new ae(k,new x(k.x+g*f,k.y+g),h,this.Nk.g(q(e)),this.gb,e);g=f.from.x+.5*(f.eb+f.Yb);c=c.g(g,f.from.y+.5*f.xe);g=Math.max(-1,Math.min(1,g/this.D.width*2-1));this.Ja.push(f);c*this.gb>this.li&&b.Lh.play(va(b.Lh.fb,g))}this.ei=Math.round(this.Qk.g(q(e)))}for(b=this.Ja.length;0<b--;)this.Ja[b].update(a)&&this.Ja.splice(b,1)};function ce(a,b,c){this.a=a;a=Math.ceil((b.width+Math.abs(this.sg))/this.ae);for(var e=Math.ceil((b.height+this.Vi)/this.ae),f=Math.min(0,this.sg),g=[],h=0;h<e;++h)for(var k=0;k<a;++k)g.splice(Math.floor(q(c)*(g.length+1)),0,new x(this.ae*(k+q(c)*this.tg)+f,this.ae*(h+q(c)*this.tg)));this.Fb=g;this.Ab=this.Fb.length;this.hb=this.Jf(this.Fb,b.width,b.height,c);for(c=this.Hc=this.speed=this.amount=this.sf=this.window=this.lg=0;c<this.Ab;++c)b.contains(this.Fb[c].x,this.Fb[c].y)||(this.Fb[c]=null)}d=ce.prototype;d.vc=.6;d.uc=10;d.rj=1-ce.prototype.vc/ce.prototype.uc;d.nj=.7;d.ce=.55*Math.PI;d.Bg=.015*Math.PI;d.oj=new J(ce.prototype.ce-ce.prototype.Bg,ce.prototype.ce,ce.prototype.ce+ce.prototype.Bg,3);d.qj=.1;d.pj=.175;d.ae=.3;d.tg=.8;d.sg=-Math.cos(ce.prototype.ce)*ce.prototype.uc;d.Vi=ce.prototype.vc;d.Jf=function(a,b,c,e){var f=[],g=this.a.createBuffer();b=new hb(b,c,7,[0,3],[1],[],[2,4]);c=0;for(var h=a.length;c<h;++c){var k=c/(h+1),l=this.oj.g(q(e)),m=Math.cos(l);l=Math.sin(l);f.push(a[c].x-m*this.vc,a[c].y,-l*this.vc,a[c].x+m*(this.uc-this.vc),l*(this.uc-this.vc),this.nj,k,a[c].x,a[c].y,0,a[c].x+m*this.uc,l*this.uc,0,k)}b.apply(f);this.a.bindBuffer(this.a.ARRAY_BUFFER,g);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(f),this.a.STATIC_DRAW);return g};d.start=function(a,b){this.speed=a;this.amount=b;this.Hc=Math.round(this.Ab*(this.window-b));0>this.Hc&&(this.Hc+=this.Ab)};d.update=function(a,b){this.lg=this.window;this.sf=this.amount;1<(this.window+=this.speed*this.amount)&&--this.window;var c=this.window-this.amount*this.rj;0>c&&++c;c=Math.floor(this.Ab*c)%this.Ab;for(var e=(this.Hc+1)%this.Ab;e!==c;)this.Fb[e]&&a.ab(this.Fb[e].x,this.Fb[e].y,this.qj,this.pj*b),++e===this.Ab&&(e=0);this.Hc=c-1};d.v=function(a,b,c){var e=this.window-this.lg;Math.abs(e)>1-Math.abs(e)&&(e-=Math.sign(e));var f=this.sf+(this.amount-this.sf)*c;c=this.lg+e*c;1<f&&--f;1<c&&--c;a.v(this.Ab,c,f,b);return b};d.c=function(){this.a.deleteBuffer(this.hb)};function de(a,b,c,e,f,g){a=void 0===a?this.qb:a;b=void 0===b?this.qb:b;this.ic=a;this.state=b;this.time=void 0===c?0:c;this.dg=void 0===e?1:e;this.Vc=void 0===f?0:f;this.Cc=void 0===g?0:g;this.Ed=!1}d=de.prototype;d.pf=500;d.Ag=350;d.zg=4;d.qb=0;d.wc=1;d.Nb=2;d.xc=3;d.rb=4;d.kh=new v(20,150,.3);d.Mk=new I(-.8,.8);d.hk=.7;d.qh=[[.6,.3,.1,0,0],[.3,.25,.2,.15,.1],[.4,.4,.2,0,0],[.3,.4,0,.3,0],[.5,.2,0,0,.3]];function ee(a){var b=S(a),c=S(a),e=id(a),f=S(a),g=id(a);a=S(a);if(Math.max(b,c)>de.prototype.rb)throw new RangeError;if(e>de.prototype.pf)throw new RangeError;if(f>de.prototype.kh.max)throw new RangeError;if(g>de.prototype.Ag)throw new RangeError;if(a>de.prototype.zg)throw new RangeError;return new de(b,c,e,f,g,a)}d.m=function(a){R(a,this.ic);R(a,this.state);jd(a,this.time);R(a,this.dg);jd(a,this.Vc);R(a,this.Cc)};d.transition=function(a,b){for(var c=this.state,e=q(b),f=0,g=0,h=this.qh[this.state].length;g<h;++g)if(f+=this.qh[this.state][g],e<f){this.state=g;break}if(c!==this.state){this.ic=c;switch(c){case this.Nb:case this.xc:a.re.stop();break;case this.rb:this.Cc=Math.floor(q(b)*this.zg),this.Vc=this.Ag,a.pe[this.Cc].play(),a.qe.stop()}switch(this.state){case this.Nb:case this.xc:a.re.play();break;case this.rb:a.qe.play()}return!0}return!1};d.update=function(a,b){if(!this.Ed){0!==this.Vc&&ra(a.pe[this.Cc]);switch(this.state){case this.Nb:case this.xc:ra(a.re);break;case this.rb:ra(a.qe)}this.Ed=!0}a.pe[this.Cc].update(za.prototype.ra);a.re.update(za.prototype.ra);a.qe.update(za.prototype.ra);0!==this.Vc&&0===--this.Vc&&a.pe[this.Cc].stop();if(++this.time===this.pf)return this.time=0,this.transition(a,b);if(0===--this.dg){var c=this.Mk.g(q(b)),e=1-Math.abs(c)*this.hk;switch(this.state){case this.qb:case this.wc:case this.Nb:0===this.Vc&&a.Ul.play(c,e)}this.dg=Math.round(this.kh.g(q(b)))}return!1};function fe(a,b,c){this.a=a;this.Ja=new be(b);this.jb=new ce(a,b,c);this.state=new de;this.transition=this.Yd=this.fg=1;this.filter=new Va(1,1,1);this.sa=this.Bb=this.yg;this.Xh=this.Wd=this.Db=this.If=0;ge(this,this.state.state)}d=fe.prototype;d.rh=.01;d.Ze=new Va(1.5,1.5,2);d.ih=new v(0,1,4);d.jh=new v(1,22,2);d.Lk=new J(-.3,0,.3,2);d.Zj=.006;d.$j=.3;d.Yj=.8/fe.prototype.jh.max;d.yg=z("--j");d.fj=z("--k");d.ej=z("--l");d.gj=z("--m");d.hj=z("--n");d.Ll=.4;d.Jl=.7;d.Il=.5;d.Kl=.85;d.Ml=1;d.Ql=.05;d.Ol=.1;d.Nl=.1;d.Pl=.15;d.Rl=.2;d.Ek=.08;d.Fk=.09;d.Gk=.1;d.Bk=.06;d.Ck=.09;d.Dk=.15;d.Ne=function(a){this.state=a;ge(this,a.ic);ge(this,a.state);this.transition=this.Yd=Math.min(1,a.time*this.rh);this.filter.r=this.sa.r+(this.Bb.r-this.sa.r)*this.transition;this.filter.C=this.sa.C+(this.Bb.C-this.sa.C)*this.transition;this.filter.B=this.sa.B+(this.Bb.B-this.sa.B)*this.transition};d.getState=function(){return this.state};d.Ca=function(a){this.sa=this.Bb;this.Bb=a};function ge(a,b){a.transition=a.Yd=0;switch(b){case a.state.qb:a.Ca(a.yg);b=a.Ja;var c=a.Ql;b.frequency=a.Ll;b.gb=c;break;case a.state.wc:a.Ca(a.fj);b=a.Ja;c=a.Ol;b.frequency=a.Jl;b.gb=c;break;case a.state.Nb:a.Ca(a.ej);a.jb.start(a.Ek,a.Bk);b=a.Ja;c=a.Nl;b.frequency=a.Il;b.gb=c;break;case a.state.xc:a.Ca(a.gj);a.jb.start(a.Fk,a.Ck);b=a.Ja;c=a.Pl;b.frequency=a.Kl;b.gb=c;break;case a.state.rb:a.Ca(a.hj),a.jb.start(a.Gk,a.Dk),b=a.Ja,c=a.Rl,b.frequency=a.Ml,b.gb=c,a.Wd=0}}d.update=function(a,b,c,e,f){this.state.update(c,f)&&ge(this,this.state.state);this.Yd=this.transition;1>this.transition&&1<(this.transition+=this.rh)&&(this.transition=1);switch(this.state.state){case this.state.qb:case this.state.wc:this.state.ic!==this.state.qb&&this.state.ic!==this.state.wc&&1!==this.transition&&this.jb.update(b,1-this.transition);break;case this.state.rb:if(this.If=this.Db,0!==this.Db)0>(this.Db-=this.$j)&&(this.Db=0,he(this,1));else if(0!==this.Wd)0===--this.Wd&&c.Vl.play(this.Lk.g(q(f)),this.Xh);else{var g;if(g=q(f)<this.Zj)g=this.state,g=g.pf-g.time>this.ih.max;g&&(this.Db=1,this.Wd=Math.round(this.jh.g(q(f))),this.Xh=1-this.Wd*this.Yj)}case this.state.Nb:case this.state.xc:this.jb.update(b,this.transition)}this.Ja.update(a,c,e,f)};function he(a,b){a.filter.r=a.sa.r+(a.Bb.r-a.sa.r)*b;a.filter.C=a.sa.C+(a.Bb.C-a.sa.C)*b;a.filter.B=a.sa.B+(a.Bb.B-a.sa.B)*b}d.v=function(a,b){var c=this.Yd+(this.transition-this.Yd)*b;this.a.enable(this.a.BLEND);this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA);switch(this.state.state){case this.state.qb:case this.state.wc:this.state.ic!==this.state.qb&&this.state.ic!==this.state.wc&&1!==c&&this.jb.v(a,1-c,b);break;case this.state.Nb:case this.state.xc:case this.state.rb:this.jb.v(a,c,b)}this.a.disable(this.a.BLEND);if(0!==this.Db&&this.state.state===this.state.rb)return a=this.ih.g(this.If+(this.Db-this.If)*b),he(this,c),this.filter.r+=this.Ze.r*a,this.filter.C+=this.Ze.C*a,this.filter.B+=this.Ze.B*a,!0;if(c!==this.fg)return he(this,c),this.fg=c,!0;this.fg=c;return!1};d.c=function(){this.jb.c()};function ie(a){this.R=a}ie.prototype.fa=function(){return new vb(this.R)};function je(a){var b=new I(50,100),c=new I(120,136),e=new I(80,100),f=new I(120,136),g=new I(120,136),h=new I(30,50);this.R=a;this.Wm=b;this.Zm=c;this.$m=e;this.an=f;this.bn=g;this.Sm=h}je.prototype.fa=function(a){var b=uc.prototype.lf-uc.prototype.Ac;b=new uc(new Ma(uc.prototype.Ac+b*q(a),uc.prototype.Ac+b*q(a),uc.prototype.Ac+b*q(a)),Pa(a));return new xb(b,this.R,Math.round(this.Wm.g(q(a))),Math.round(this.Zm.g(q(a))),Math.round(this.$m.g(q(a))),Math.round(this.an.g(q(a))),Math.round(this.bn.g(q(a))),Math.round(this.Sm.g(q(a))))};function ke(a,b,c){this.Nm=a;this.Um=b;this.Om=c}ke.prototype.fa=function(a){return new Ab(this.Nm.g(q(a)),this.Um.g(q(a)),this.Om.g(q(a)))};function we(a){this.Vm=a}we.prototype.fa=function(a){return new Bb(Math.round(this.Vm.g(q(a))))};function Ge(a,b){this.Xf=a;this.Ym=b}Ge.prototype.fa=function(a){return new fd(Math.round(this.Xf.g(q(a))),Math.round(this.Ym.g(q(a))))};function He(){}He.prototype.fa=function(){return[new ed(.2,1.4,1),new ed(.5,.8,1)]};function Ie(a,b,c,e){this.cm=a;this.dm=b;this.em=c;this.pm=e}Ie.prototype.fa=function(a,b,c,e){for(var f=[],g=n(this.pm),h=g.next();!h.done;h=g.next())f.push(h.value.fa(e));e=new Bc(this.cm.fa(e),f,this.dm.fa(e),this.em.fa(e));e.trim(b.Kf.Fa);a.write(e,c);return e};function Je(a,b,c,e,f,g,h,k){var l=new He;this.Xf=a;this.Tm=b;this.Pm=c;this.Qm=e;this.Rm=f;this.Mm=g;this.bm=l;this.gm=h;this.fm=k}Je.prototype.fa=function(a,b,c,e){return new Xc(this.fm.fa(a,b,c,e),this.bm.fa(e),this.gm.fa(e),Math.round(this.Xf.g(q(e))),Math.round(this.Tm.g(q(e))),Math.round(this.Pm.g(q(e))),Math.round(this.Qm.g(q(e))),Math.round(this.Rm.g(q(e))),Math.round(this.Mm.g(q(e))))};function Ke(a,b){this.Xm=a;this.am=b}Ke.prototype.fa=function(a,b,c,e,f,g){return new Tc(this.am.fa(c,e,f,g),a,b)};function Le(a,b,c){this.time=void 0===a?0:a;this.Od=void 0===b?0:b;this.Ud=void 0===c?null:c}Le.prototype.ug=30;Le.prototype.pb=[new Ke(new J(1,2,5,1),new Je(new I(150,180),new I(80,100),new I(130,170),new I(150,160),new I(2,4),new I(2E4,25E3),new Ge(new I(100,140),new I(180,220)),new Ie(new ie(1),new ke(new I(50,100),new I(170,200),new I(160,170)),new we(new I(200,230)),[new je(0)]))),new Ke(new J(2,3,4,1),new Je(new I(160,200),new I(130,150),new I(170,200),new I(180,200),new I(4,6),new I(25E3,3E4),new Ge(new I(120,150),new I(100,120)),new Ie(new ie(0),new ke(new I(220,240),new I(120,140),new I(150,160)),new we(new I(60,90)),[new je(1)])))];function Me(a){var b=S(a),c=S(a);a=S(a);if(b>Le.prototype.ug)throw new RangeError;if(a>Le.prototype.pb.length)throw new RangeError;if(0!==c&&a===Le.prototype.pb.length)throw new RangeError;return new Le(b,c,a===Le.prototype.pb.length?null:Le.prototype.pb[a])}Le.prototype.m=function(a){R(a,this.time);R(a,this.Od);null===this.Ud?R(a,this.pb.length):R(a,this.pb.indexOf(this.Ud))};Le.prototype.update=function(a,b,c,e,f,g,h,k){++this.time===this.ug&&(this.time=0,0!==this.Od?(a.hc()+h<za.prototype.bf&&Ne(b,this.Ud.fa(a.Td.F(),a.Sd.F(),c,e,f,k)),--this.Od,console.log("Spawn")):b.hc()<g&&.1>q(k)&&(this.Ud=this.pb[Math.floor(this.pb.length*q(k))],this.Od=Math.round(this.Ud.Xm.g(q(k))),console.log("Primed "+this.Od)))};function Oe(a){var b=void 0===b?new Le:b;this.D=a;this.state=b;this.time=0}d=Oe.prototype;d.hl=8;d.gl=16;d.Ne=function(a){this.state=a};d.getState=function(){return this.state};d.update=function(a,b,c,e,f){this.state.update(this.D,this.D.T,b,c,e,this.gl,this.hl,f)};function Pe(){var a=document.getElementById("gui"),b=document.createElement("div");b.id=this.Pj;a.appendChild(b);this.w=new Qe(b)}d=Pe.prototype;d.O=function(a){this.w.O(a)};d.m=function(a){this.w.m(a)};d.Zf=function(a){this.w.Zf(a)};d.clear=function(){this.w.clear()};d.resize=function(){this.w.resize()};d.update=function(){this.w.update()};d.v=function(a){this.w.v(a)};d.Pj="cards";function Qe(a){var b=this;this.element=a;this.Ra=Re(this);this.Ha=new Se(a.clientWidth,a.clientHeight);this.aa=new Te(a.clientWidth,a.clientHeight,this.Ra);this.w=[];this.oa=null;this.Ee=new x;this.Oe=null;this.hidden=this.Qa=!1;this.Oh=0;this.Va=null;a.appendChild(Ue(this));a.appendChild(this.Ha.element);a.appendChild(this.Ra);a.addEventListener("mousemove",function(c){b.move(c.clientX,c.clientY)});a.addEventListener("touchmove",function(c){c.preventDefault();b.move(c.changedTouches[0].clientX,c.changedTouches[0].clientY)});a.addEventListener("mouseup",this.release.bind(this));a.addEventListener("touchend",this.release.bind(this));a.addEventListener("mouseleave",this.release.bind(this))}d=Qe.prototype;d.he=.9;d.Nj=10;d.xj=new x(1,0);d.Oj="button-book";d.Qj="drop-target";d.$i="card-shape hidden";d.sj=.2;d.O=function(a){this.aa.O(a,this);this.Ha.O(a,this)};d.m=function(a){this.aa.m(a);this.Ha.m(a)};function Re(a){var b=document.createElement("div");b.id=a.Qj;b.className=a.$i;return b}function Ue(a){var b=document.createElement("button");b.id=a.Oj;b.onclick=function(){a.Qa?a.Ka():a.show()};return b}function Ve(a,b){a=a.Ra.getBoundingClientRect();b.moveTo(.5*(a.right+a.left),.5*(a.bottom+a.top))}d.Zf=function(a){this.Va=a};d.ac=function(a,b){return this.Qa?this.Ha.ac(a,b):null};d.clear=function(){this.aa.clear();for(var a=n(this.w),b=a.next();!b.done;b=a.next())this.element.removeChild(b.value.element);this.w=[]};d.resize=function(){this.aa.resize(this.element.clientWidth,this.element.clientHeight);this.Ha.resize(this.element.clientWidth,this.element.clientHeight)};d.update=function(){this.Qa||0!==--this.Oh||(this.hidden=!0);this.aa.update();this.Ha.update();this.oa&&this.oa.rotate(0,this.he)};d.v=function(a){this.aa.v(a);this.Ha.v(a);this.oa&&this.oa.v(a)};d.move=function(a,b){this.oa&&(this.Oe=this.ac(a,b),this.oa.moveTo(a-this.Ee.x,b-this.Ee.y))};function We(a,b,c,e){if(a.aa.contains(b)){if(a.aa.remove(b),a.element.removeChild(b.element),a.element.appendChild(b.element),!a.Qa){a.aa.Ka();a.remove(b);var f=c/a.Va.scale,g=e/a.Va.scale*a.Va.D.wb,h=new Tc(b.body,new x(f,g),a.xj),k=h.body.Ce();h.moveTo(new x(2*f-k.x,2*g-k.y));a.Va.i.Pa.write(b.body.pattern,a.Va.nc);Xe(a.Va.Eb,h,f,g)}}else a.Tf(b);a.Qa&&(a.oa=b,a.Ee.x=c-b.position.x,a.Ee.y=e-b.position.y,a.Oe=a.ac(c,e),a.element.style.pointerEvents="auto")}d.Tf=function(a){this.Ha.Tf(a);this.element.appendChild(a.element)};d.rf=function(a,b){this.element.removeChild(a.element);this.Ha.rf(a,b)};d.release=function(){if(this.oa){this.element.style.pointerEvents="none";if(this.Qa)this.Oe?this.rf(this.oa,this.Oe):Ye(this.aa,this.element,this.aa.add(this.oa));else{var a=this.oa.element.getBoundingClientRect(),b=this.Ra.getBoundingClientRect();Math.max(0,Math.min(a.right,b.right)-Math.max(a.left,b.left))*Math.max(0,Math.min(a.bottom,b.bottom)-Math.max(a.top,b.top))/(Ze.prototype.vb*Ze.prototype.la)>this.sj&&(Ve(this,this.oa),Ye(this.aa,this.element,this.aa.add(this.oa)))}this.oa=null;this.aa.show()}};function $e(a,b,c){c=void 0===c?!0:c;b.element.addEventListener("mousedown",function(e){0===e.button&&We(a,b,e.clientX,e.clientY)});b.element.addEventListener("touchstart",function(e){return We(a,b,e.changedTouches[0].clientX,e.changedTouches[0].clientY)});b.element.addEventListener("touchmove",function(e){e.preventDefault();a.Va.Xd(e.changedTouches[0].clientX,e.changedTouches[0].clientY)});b.element.addEventListener("touchend",a.Va.eg.bind(a.Va));a.w.push(b);c&&a.element.appendChild(b.element)}d.add=function(a){$e(this,a);this.aa.add(a,!1)};d.remove=function(a){this.w.splice(this.w.indexOf(a),1);this.element.removeChild(a.element)};d.Ka=function(){this.Qa&&(this.Ha.Ka(),this.Oh=this.Nj,this.Qa=!1)};d.show=function(){this.Qa||(this.Ha.show(),this.Qa=!0,this.hidden=!1)};function Ze(a,b,c){this.body=a;this.position=b;this.Ya=b.F();this.angle=this.uf=void 0===c?0:c;this.element=this.createElement();af(this)}d=Ze.prototype;d.Ve="card-shape card";d.vb=ka("--B");d.la=ka("--C");d.Na=Ze.prototype.vb/Ze.prototype.la;function bf(a,b,c){b=void 0===b?new x:b;c=void 0===c?0:c;return new Ze(hd(a),b,c)}d.m=function(a){this.body.m(a)};d.v=function(a){af(this,a)};d.moveTo=function(a,b){this.position.x=a;this.position.y=b;this.Ya.set(this.position)};d.move=function(a,b,c){this.Ya.set(this.position);this.position.x+=(a-this.position.x)*c;this.position.y+=(b-this.position.y)*c};d.rotate=function(a,b){this.uf=this.angle;this.angle+=(a-this.angle)*b};d.setPosition=function(a){this.position.set(a);this.Ya.set(a)};function af(a,b){b=void 0===b?0:b;var c=a.uf+(a.angle-a.uf)*b;a.element.style.transform="translate("+Math.round(a.Ya.x+(a.position.x-a.Ya.x)*b)+"px,"+Math.round(a.Ya.y+(a.position.y-a.Ya.y)*b)+"px)";0!==a.angle&&(a.element.style.transform+="rotate("+c+"rad)")}d.createElement=function(){var a=document.createElement("div");a.className=this.Ve;return a};function Te(a,b,c){this.width=a;this.height=b;this.Ra=c;this.w=[];this.P=null;this.visible=!0;this.we=!1}d=Te.prototype;d.vb=.5;d.la=.3;d.Hk=Number.parseFloat(ja("--F"));d.he=.5;d.bk=.8;d.tj=-.03;d.Lg=1;d.We="hidden";d.Cg=Ze.prototype.vb;d.O=function(a,b){var c=S(a);this.P=this.Jc(c);for(var e=0;e<c;++e){var f=this.P[e];f=new x(f.x,f.y);f.y+=Ze.prototype.la*this.Lg;f=bf(a,f,this.P[e].z);this.w.push(f);$e(b,f)}};d.m=function(a){R(a,this.w.length);for(var b=n(this.w),c=b.next();!c.done;c=b.next())c.value.m(a)};d.resize=function(a,b){this.width=a;this.height=b;this.P=this.Jc(this.w.length)};d.contains=function(a){return-1!==this.w.indexOf(a)};d.Jc=function(a){var b=this.width*this.vb,c=Ze.prototype.la*this.la,e=1===a?0:this.tj;c=Math.PI-Math.atan(.5*b/c)-Math.atan(c/.5*b);b=.5*b/Math.sin(c);for(var f=Math.min(1,(a-1)/(2*c*b/(Ze.prototype.vb*this.bk))),g=Array(a),h=0;h<a;++h){var k=1-(1===a?.5:h/(a-1)),l=f*c*(1-2*k)-.5*Math.PI;g[h]=new Ma(.5*this.width+Math.cos(l)*b,this.height+(-.5-this.Hk)*Ze.prototype.la+b+Math.sin(l)*b,f*c*(1-2*k)+e)}return g};d.update=function(){for(var a=this.visible?0:this.Lg*Ze.prototype.la,b=0,c=this.w.length;b<c;++b)this.w[b].move(this.P[b].x,this.P[b].y+a,this.he),this.w[b].rotate(this.P[b].z,this.he)};d.v=function(a){for(var b=n(this.w),c=b.next();!c.done;c=b.next())c.value.v(a)};d.add=function(a,b){b=void 0===b?!0:b;this.P=this.Jc(this.w.length+1);if(b){b=-1;for(var c=Number.MAX_VALUE,e=0,f=this.P.length;e<f;++e){var g=a.position.x-this.P[e].x,h=a.position.y-this.P[e].y;g=g*g+h*h;g<c&&(c=g,b=e)}if(-1===b)return this.w.push(a),1;this.w.splice(b,0,a);return b+1}this.w.push(a);return this.w.length};function Ye(a,b,c){for(var e=a.w.length;c<e;++c)b.removeChild(a.w[c].element),b.appendChild(a.w[c].element)}d.remove=function(a){this.w.splice(this.w.indexOf(a),1);this.P=this.Jc(this.w.length)};d.clear=function(){this.w=[]};function cf(a,b,c){a=a.Ra.getBoundingClientRect();b=b>a.left&&b<a.right?0:Math.min(Math.abs(a.left-b),Math.abs(b-a.right));c=c>a.top&&c<a.bottom?0:Math.min(Math.abs(a.top-c),Math.abs(c-a.bottom));return Math.sqrt(b*b+c*c)}d.show=function(){this.visible=!0;this.Ra.classList.add(this.We);this.we=!1};d.Ka=function(){this.visible=!1};function df(a){this.w=Array(4).fill(null);this.element=this.createElement(a);this.pa=this.Af(this.element);var b=this.element,c=document.createElement("div");c.className=this.aj;-1===a?c.classList.add(this.vg):c.classList.add(this.wg);b.appendChild(c);this.Jm=c;this.P=this.rect=null;this.direction=a}d=df.prototype;d.Ve="page";d.bj="slot";d.vg="left";d.wg="right";d.xg="visible";d.aj="overlay";d.al=Number.parseFloat(ja("--K"));d.lk=-Number.parseFloat(ja("--M"));d.O=function(a,b){for(var c=S(a),e=0;4>e;++e)c&1<<e&&(this.w[e]=bf(a),$e(b,this.w[e],!1),this.pa[e].appendChild(this.w[e].element))};d.m=function(a){R(a,null!==this.w[0]|(null!==this.w[1])<<1|(null!==this.w[2])<<2|(null!==this.w[3])<<3);for(var b=n(this.w),c=b.next();!c.done;c=b.next())(c=c.value)&&c.m(a)};d.show=function(){this.element.classList.add(this.xg)};d.Ka=function(){this.element.classList.remove(this.xg)};function ef(a,b){var c=Math.sin(b*Math.PI*.5);a.element.style.transform="scaleX("+c.toString()+") skewY("+(a.direction*a.lk*(1-Math.abs(b))).toString()+"deg)";a.Jm.style.opacity=((1-Math.abs(c))*a.al).toString()}function ff(a){a.element.style.removeProperty("transform");a.element.style.removeProperty("opacity")}function gf(a){for(var b=Array(a.length),c=0,e=a.length;c<e;++c)b[c]=a[c].getBoundingClientRect();return b}d.Jc=function(a){for(var b=Array(a.length),c=0,e=a.length;c<e;++c)b[c]=new x(.5*(a[c].left+a[c].right),.5*(a[c].top+a[c].bottom));return b};function hf(a){a.rect=a.element.getBoundingClientRect();a.P=a.Jc(gf(a.pa))}d.ac=function(a,b){null===this.rect&&hf(this);return a>this.rect.left&&a<this.rect.right&&b>this.rect.top&&b<this.rect.bottom?(a=(a>.5*(this.rect.right+this.rect.left))+((b>.5*(this.rect.bottom+this.rect.top))<<1),this.w[a]?null:this.P[a]):null};function jf(a,b,c){for(var e=0,f=a.P.length;e<f;++e)if(c===a.P[e])return a.pa[e].appendChild(b.element),a.w[e]=b,b.element.style.removeProperty("transform"),!0;return!1}function kf(a,b){var c=a.w.indexOf(b);if(-1===c)return!1;null===a.rect&&hf(a);b.setPosition(a.P[c]);a.w[c]=null;a.pa[c].removeChild(b.element);return!0}d.createElement=function(a){var b=document.createElement("div");b.className=this.Ve;-1===a?b.classList.add(this.vg):b.classList.add(this.wg);return b};d.Af=function(a){for(var b=Array(4),c=0;4>c;++c){var e=document.createElement("div");e.className=this.bj;b[c]=e;a.appendChild(e)}return b};d.bc=function(a,b,c){this.element.style.width=2*a+3*c+"px";this.element.style.height=2*b+3*c+"px";c=n(this.pa);for(var e=c.next();!e.done;e=c.next())e=e.value,e.style.width=a+"px",e.style.height=b+"px";this.rect=null};function Se(a,b){var c=document.createElement("div");c.id=this.Rj;this.h=c;this.element=this.createElement(this.h);this.width=a;this.height=b;a=this.page=0;b=Array(this.ke);for(c=0;c<this.ke;++c)b[c]=new df(((c&1)<<1)-1),c!==a&&c!==a+1||b[c].show();this.X=b;this.$=[];this.ta=0;this.hm=lf(this,this.Yi,this.nm.bind(this));this.im=lf(this,this.Zi,this.mm.bind(this));for(a=0;a<this.ke;a+=2)this.h.appendChild(this.X[a].element);for(--a;0<=a;a-=2)this.h.appendChild(this.X[a].element);this.element.appendChild(this.hm);this.element.appendChild(this.im);this.bc()}d=Se.prototype;d.Z="book";d.Rj="spine";d.Xe="hidden";d.Xi="button-page";d.Yi="left";d.Zi="right";d.ke=8;d.kk=.07;d.Yg=.07;d.jk=.05;d.la=.65;function mf(){this.Ia=this.cc=1;this.Fe=!1}mf.prototype.il=.33;mf.prototype.update=function(){this.cc=this.Ia;return-1>(this.Ia-=this.il)?(this.Ia=-1,!0):!1};mf.prototype.reverse=function(){this.cc=-this.cc;this.Ia=-this.Ia;this.Fe=!this.Fe};mf.prototype.Hf=function(a){return Math.sin((this.cc+(this.Ia-this.cc)*a)*Math.PI*.5)};d=Se.prototype;d.O=function(a,b){for(var c=n(this.X),e=c.next();!e.done;e=c.next())e.value.O(a,b)};d.m=function(a){for(var b=n(this.X),c=b.next();!c.done;c=b.next())c.value.m(a)};d.Ka=function(){this.element.classList.add(this.Xe)};d.show=function(){this.element.classList.remove(this.Xe)};d.reverse=function(){for(var a=n(this.$),b=a.next();!b.done;b=a.next())b.value.reverse();this.$=this.$.reverse();this.page-=this.$.length*this.ta*2;this.ta=-this.ta};d.nm=function(){0!==this.$.length&&-1===this.ta?this.reverse():this.page!==2*this.$.length&&(this.X[this.page-2*(this.$.length+1)].show(),this.$.push(new mf),this.ta=1)};d.mm=function(){0!==this.$.length&&1===this.ta?this.reverse():this.page+2!==this.ke-2*this.$.length&&(this.X[this.page+2*this.$.length+3].show(),this.$.push(new mf),this.ta=-1)};d.update=function(){for(var a=this.$.length;0<a--;)this.$[a].update()&&(this.$.splice(a,1),1===this.ta?(this.X[this.page+2*a+1].Ka(),ff(this.X[this.page+2*a-1])):(this.X[this.page].Ka(),ff(this.X[this.page+2])),this.page-=2*this.ta)};d.v=function(a){if(0!==this.$.length)for(var b=-1===this.ta?this.page+1:this.page,c=n(this.$),e=c.next();!e.done;e=c.next()){e=e.value;var f=e.cc+(e.Ia-e.cc)*a;!e.Fe&&0>f&&(this.X[b].Ka(),this.X[b-this.ta].show(),e.Fe=!0);ef(this.X[b],f);ef(this.X[b-this.ta],-f);b-=2*this.ta}};function lf(a,b,c){var e=document.createElement("button");e.className=a.Xi;e.classList.add(b);e.onclick=c;return e}d.ac=function(a,b){return 0===this.$.length?this.X[this.page].ac(a,b)||this.X[this.page+1].ac(a,b):null};d.rf=function(a,b){jf(this.X[this.page],a,b)||jf(this.X[this.page+1],a,b)};d.Tf=function(a){kf(this.X[this.page],a)||kf(this.X[this.page+1],a)};d.bc=function(){var a=Math.round(this.height*this.la*(1-2*this.Yg)),b=Math.round(a*this.jk),c=Math.round(.5*(a-3*b)),e=Math.round(c*Ze.prototype.Na),f=2*(2*e+3*b)+Math.round(this.height*this.la*this.Yg*2);this.element.style.width=f+"px";this.element.style.height=this.height*this.la+"px";this.element.style.left=.5*(this.width-f)+"px";this.element.style.top=this.height*this.kk+"px";this.h.style.height=a+"px";a=n(this.X);for(f=a.next();!f.done;f=a.next())f.value.bc(e,c,b)};d.createElement=function(a){var b=document.createElement("div");b.id=this.Z;b.className=this.Xe;b.appendChild(a);return b};d.resize=function(a,b){this.width=a;this.height=b;this.bc()};function nf(a,b){this.G=a;this.jm=void 0===b?!0:b;this.S=[]}d=nf.prototype;d.Ue=1;d.Wi=.17;d.m=function(a){for(var b=Array(this.S.length),c=0,e=0;e<this.S.length;++e){var f=this.G.Gf(this.S[e].position);f&&++c;b[e]=f}jd(a,c);for(c=0;c<this.S.length;++c)b[c]&&(b[c].m(a),this.S[c].m(a))};d.O=function(a,b,c){for(var e=0,f=id(a);e<f;++e)this.S.push(yd(a,this.G.Ff(this.G.Eh(a)),b,c))};d.hc=function(){return this.S.length};d.Wb=function(a,b){for(var c=new x(a,b),e=n(this.S),f=e.next();!f.done;f=e.next()){f=f.value;var g=f.position.x-a,h=f.position.y-b;g*g+h*h<this.Ue*this.Ue&&f.Wb(c,this.Wi*Math.sqrt(g*g+h*h)/this.Ue)}};function of(a,b,c){for(var e=Array(a.S.length),f=a.S.length;0<f--;)if(e[f]=a.G.Gf(a.S[f].position),e[f]){var g=b.Ff(e[f]);g?a.S[f].moveTo(g):pf(a,f,c)}else pf(a,f,c);a.G=b}function Ne(a,b){a.S.splice(0,0,b)}function pf(a,b,c){a.S[b].c(c);a.S.splice(b,1)}d.Jd=function(a,b){if(!this.G.contains(a,b))return null;for(var c=this.S.length;0<c--;){a:{var e=this.S[c].body;var f=a,g=b,h=f-e.h[0].x,k=g-e.h[0].y,l=e.mb*(e.h.length-1);if(!(h*h+k*k>l*l))for(var m=1;m<e.h.length-1;++m)if(h=f-e.h[m].x,k=g-e.h[m].y,l=e.pattern.Gb.g(m/(e.h.length-1))*e.Nd*e.ik,h*h+k*k<l*l){e=!0;break a}e=!1}if(e)return a=this.S[c],this.S.splice(c,1),a}return null};d.update=function(a,b,c,e,f,g){for(var h=this.S.length;0<h--;){for(var k=this.S[h],l=h;0<l--;)k.He(this.S[l],g);if(k.update(this.G,e,g))pf(this,h,a);else{if(this.jm&&1===k.Ie){if(l=k.La===k.ie)l=k.Ic,l=l.La===l.ie;if(l){l=g;k.La=0;k.Kc=0;zd(k,l);Ad(k,l);l=k.Ic;var m=g;l.La=0;l.Kc=0;zd(l,m);Ad(l,m);l=.5>q(g)?new gd(k,k.Ic):new gd(k.Ic,k);m=a;var w=b,t=c,r=g,y=Array;var B=l.s.body;B=Math.round(B.hd.g(B.Mc/255));y=y(B);B=0;for(var F=y.length;B<F;++B){var A=l.um.V(w,r);(new Ec(A)).W(r);m.write(A.body.pattern,t);y[B]=A}l=n(y);for(m=l.next();!m.done;m=l.next())if(m=m.value,f.hc()<za.prototype.bf)Ne(this,m);else break}}else k.La=0;k.Ie=0}}};d.v=function(a,b){for(var c=n(this.S),e=c.next();!e.done;e=c.next())e.value.v(a,b)};function qf(a,b){this.width=a;this.height=b*this.wb;this.Sd=this.Td=this.T=this.small=this.big=null;this.bc()}d=qf.prototype;d.Dg=.14;d.Eg=.65;d.de=.55;d.wb=1.1;d.m=function(a){this.big.m(a);this.small.m(a);this.T.m(a)};d.O=function(a,b,c){this.big.O(a,b,c);this.small.O(a,b,c);this.T.O(a,b,c)};d.resize=function(a,b,c){this.width=a;this.height=b*this.wb;this.bc(c)};d.hc=function(){return this.big.hc()+this.small.hc()+this.T.hc()};d.bc=function(a){a=void 0===a?null:a;var b=.5*Math.min(this.width,this.height),c=this.width,e=this.height,f=this.Eg+1,g=(this.de+f)*(this.de+f)-2*f*f;f=(f+f)*(e+c);c=Math.min((Math.sqrt(f*f+4*g*(e*e+c*c))-f)/(g+g),b);g=this.Eg*c;f=new x(c,c);var h=new x(this.width-g,this.height-g);e=Fa(h.F(),f).length()-c-g;var k=Math.atan((h.y-f.y)/(h.x-f.x));b=c!==b;var l=new Cd(f,c*(1-this.Dg)),m=new Cd(h,g-c*this.Dg);this.width>this.height?(g=new Fd([new Gd(f,c+.5*e,k,b?Math.PI:.5*Math.PI),new Gd(h,g+.5*e,Math.PI+k,2*Math.PI)],c*this.de),b?(this.Td=new x(-.5*e,c+1E-6),this.Sd=new x(0,1)):(this.Td=new x(c+1E-6,this.height+.5*e),this.Sd=new x(1,0))):(g=new Fd([new Gd(f,c+.5*e,b?1.5*Math.PI:0,b?2*Math.PI+k:k),new Gd(h,g+.5*e,.5*Math.PI,Math.PI+k)],c*this.de),b?(this.Td=new x(c+1E-6,-.5*e),this.Sd=new x(1,0)):(this.Td=new x(this.width+.5*e,c+1E-6),this.Sd=new x(0,1)));this.big?(of(this.big,l,a),of(this.small,m,a),of(this.T,g,a)):(this.big=new nf(l),this.small=new nf(m),this.T=new nf(g,!1))};d.Jd=function(a,b){return this.big.Jd(a,b)||this.small.Jd(a,b)||this.T.Jd(a,b)||null};d.Wb=function(a,b){this.big.G.contains(a,b)?this.big.Wb(a,b):this.small.G.contains(a,b)?this.small.Wb(a,b):this.T.G.contains(a,b)&&this.T.Wb(a,b)};d.contains=function(a,b){return this.big.G.contains(a,b)||this.small.G.contains(a,b)||this.T.G.contains(a,b)};d.xd=function(a){if(this.big.G.contains(a.position.x,a.position.y))Ne(this.big,a);else if(this.small.G.contains(a.position.x,a.position.y))Ne(this.small,a);else if(this.T.G.contains(a.position.x,a.position.y))Ne(this.T,a);else{var b=a.position.F(),c=a.position.F(),e=a.position.F();this.big.G.cb(b);this.small.G.cb(c);var f=Fa(a.position.F(),b).length(),g=this.big,h=Fa(a.position.F(),c).length();h<f&&(f=h,b=c,g=this.small);this.T.G.cb(e)&&Fa(a.position.F(),e).length()<f&&(b=e,g=this.T);a.xd(b);Ne(g,a)}};d.Dc=function(a,b){return Math.min(Math.min(this.small.G.Dc(a,b),this.big.G.Dc(a,b)),this.T.G.Dc(a,b))};d.update=function(a,b,c,e,f){this.small.update(a,b,c,e,this,f);this.big.update(a,b,c,e,this,f);this.T.update(a,b,c,e,this,f)};d.v=function(a,b,c,e,f){if(void 0===f||f)this.big.v(a,c),this.small.v(a,c),this.T.v(a,c);a.v(b,this.width,this.height,e,e)};function rf(a,b,c){this.D=a;this.audio=b;this.Ta=c;this.move=null;this.cursor=new x;this.Dh=new x;this.Xb=new x;this.offset=new x;this.Ch=new x;this.Pe=!1}d=rf.prototype;d.ql=.13;d.ol=.4;d.pl=.1;d.ii=1.5;d.gi=.2;d.ng=.5;d.hi=1;d.ni=2;d.Cj=.2;d.Aj=.1;d.Bj=.75;d.update=function(a,b,c){this.move&&this.move.body.update(this.move.position,this.move.direction,this.move.speed);if(this.Pe){var e=this.cursor.x-this.Xb.x,f=this.cursor.y-this.Xb.y;if(0!==e){for(var g=Math.sqrt(e*e+f*f),h=Math.ceil(g/this.hi),k=e*this.gi,l=0;l<h;++l){var m=l/h,w=a,t=this.Xb.x+e*m;m=this.Xb.y+f*m+this.ng;var r=this.ii;0<k?w.Ua.ab(t,m,r,0,0,k):w.Ua.ab(t,m,r,0,-k,0)}a=Math.ceil(g/this.Bj);for(h=g=0;h<a;++h)k=h/a,g=Math.max(g,c.g(this.cursor.x+e*k,this.cursor.y+f*k+this.ng));g<this.Aj||b.Cf.set(va(b.Cf.effect.fb,2*Math.max(0,Math.min(1,this.cursor.x/this.D.width))-1),Math.min(1,Math.abs(e)*this.Cj))}}b.Cf.update(za.prototype.ra);this.Xb.set(this.cursor)};d.v=function(a,b,c,e,f){this.move&&(this.move.v(a,f),a.v(b,c,e,!1,!0))};d.Xd=function(a,b,c,e,f){this.Pe&&(this.Dh.set(this.cursor),this.cursor.x=a,this.cursor.y=b,f&&this.Xb.set(this.cursor),this.move&&(this.Ch.set(this.cursor).add(this.offset),this.move.moveTo(this.Ch),a=this.Ta.w.aa,a.we?cf(a,c,e)>a.Cg&&(a.we=!1,a.Ra.classList.add(a.We)):cf(a,c,e)<a.Cg&&(a.we=!0,a.Ra.classList.remove(a.We))))};function sf(a,b,c,e){for(var f=b.h.length;0<f--;){var g=2*Math.PI*q(e),h=b.pattern.Gb.g(f/(b.h.length-1)),k=a.pl*h;c.ab(b.h[f].x+Math.cos(g)*k,b.h[f].y+Math.sin(g)*k,a.ql*h,a.ol*h)}}function tf(a,b,c){a.cursor.x=b;a.cursor.y=c;a.Pe=!0;a.Dh.set(a.cursor);a.Xb.set(a.cursor)}function uf(a,b,c){b.De()>a.ni?a.audio.Ih.play(va(a.audio.Ih.fb,c)):a.audio.Jh.play(va(a.audio.Jh.fb,c))}function Xe(a,b,c,e,f,g){f=void 0===f?null:f;g=void 0===g?null:g;var h=2*b.position.x/a.D.width-1;a.move=b;a.offset.x=b.position.x-c;a.offset.y=b.position.y-e;f&&(a.audio.Kh.play(va(a.audio.Kh.fb,h)),uf(a,b,h),console.log(b.De().toFixed(2)+"kg"),console.log(b),sf(a,b.body,f,g),a.Ta.w.aa.Ka());tf(a,c,e)}d.dropEffect=function(a,b,c){var e=2*a.position.x/this.D.width-1;this.audio.Hh.play(va(this.audio.Hh.fb,e));uf(this,a,e);sf(this,a.body,b,c)};d.xd=function(a,b,c,e){if(this.move){var f=this.move.position.x*c,g=this.move.position.y*c/this.D.wb,h=this.Ta.w.Ra.getBoundingClientRect();f>h.left&&f<h.right&&g>h.top&&g<h.bottom?(a=new Ze(this.move.body,Fa(this.move.position.F(),this.offset).multiply(c).round()),this.Ta.w.add(a),Ve(this.Ta.w,a),this.move.c(b)):(this.dropEffect(this.move,a,e),this.D.xd(this.move));this.move=null;this.Ta.w.aa.show()}this.Pe=!1};function za(a,b,c){var e=vf,f=wf;this.i=e;this.audio=f;this.Ta=a;this.random=c;this.zd=b;this.scale=this.Hf(e.width,e.height);this.D=new qf(e.width/this.scale,e.height/this.scale);this.Eb=new rf(this.D,f,a);this.ka=this.Sf=this.nc=this.ud=this.vd=this.Bc=this.ob=this.Re=this.ec=this.background=this.Uf=this.Pd=null;this.Se=!1;this.bg=new Oe(this.D);this.time=this.ra;this.Xa=0;xf(this);a.Zf(this)}d=za.prototype;d.zj=1;d.ra=1/14;d.Rk=.051;d.Sk=50;d.bf=80;d.Ye=z("--e");d.$g=.005;d.xl=.1;d.wl=.5;d.m=function(a){this.D.m(a);this.bg.getState().m(a);this.ka.getState().m(a)};d.O=function(a){try{this.D.O(a,this.i.Pa,this.nc),this.bg.Ne(Me(a)),this.ka.Ne(ee(a)),this.Se=!0}catch(b){throw this.c(),b;}};function xf(a){var b=new ua(a.zd);a.nc=new ob(a.i.a,b);var c=a.D;var e=a.i.a,f=[],g=[];c.big.G.te(f,g);c.small.G.te(f,g);c.T.G.te(f,g);(new hb(c.width,c.height,2,[0],[1])).apply(f);c=new jb(e,new ib(f,g));a.vd=c;c=a.D;e=a.i.a;f=[];g=[];c.big.G.se(f,g);c.small.G.se(f,g);c.T.G.se(f,g);(new hb(c.width,c.height,4,[0],[1])).apply(f);c=new jb(e,new ib(f,g));a.ud=c;a.i.Yf.$a(a.ud);a.i.$f.$a(a.ud);a.i.blur.$a(a.vd);a.i.kg.$a(a.vd);a.i.Kd.$a(a.vd);a.ka=new fe(a.i.a,a.D,b);a.i.Bf.$a(a.ka.jb.hb);a.Pd=new $a(a.i.a,a.D.width,a.D.height);a.background=new Id(a.i.a,a.i.Yf,a.i.Ga,a.i.width,a.i.height,a.nc,a.scale);a.ec=new $d(a.i.a,a.D,b);a.Re=new E(a.i.a,a.i.width,a.i.height,a.i.a.RGB,!1,a.i.a.LINEAR);a.ob=new eb(a.i.a,a.i.Dd,a.D.width,a.D.height);a.Bc=new fb(a.i.a,a.i.Dd,a.D.width,a.D.height,a.random);a.background.$a(a.ud);a.i.Uc.$a(a.ec.Uf.hb);a.i.Zd.$a(a.ec.Me.hb);b=new rb(a.i.a,a.D.width,a.D.height,a.i.Uc,a.i.Kd,a.i.Fh);a.Sf=new pb(a.i.a,a.D.width,a.D.height,b,a.i.Uc,a.i.Zd,a.i.blur,a.i.Md);b.c()}function yf(a){a.nc.c();a.Pd.c();a.background.c();a.ec.c();a.Re.c();a.ob.c();a.Bc.c();a.Sf.c();a.ka.c();a.vd.c();a.ud.c()}function zf(a,b){var c=Af;a/=c.scale;b=b/c.scale*c.D.wb;var e=null!==c.Eb.move?null:c.D.Jd(a,b);e?Xe(c.Eb,e,a,b,c.ob,c.random):(c.D.contains(a,b)&&(c.ob.ab(a,b,c.xl,c.wl),c.D.Wb(a,b)),tf(c.Eb,a,b));c.Ta.w.Ka()}d.Xd=function(a,b,c){this.Eb.Xd(a/this.scale,b/this.scale*this.D.wb,a,b,void 0===c?!1:c)};d.eg=function(){this.Eb.xd(this.ob,this.i.Pa,this.scale,this.random)};d.Hf=function(a,b){return Math.max(this.Sk,Math.sqrt(a*a+b*b)*this.Rk)};d.resize=function(){this.scale=this.Hf(this.i.width,this.i.height);this.D.resize(this.i.width/this.scale,this.i.height/this.scale,this.i.Pa);var a=this.ka.state;yf(this);xf(this);this.ka.Ne(a);this.Se=!0};d.update=function(){this.audio.Xl.update(this.ra);this.audio.Wl.update(this.ra);this.audio.Yl.update(this.ra);this.Ta.update();this.bg.update(this.ra,this.i.Pa,this.i.Oc,this.nc,this.random);this.D.update(this.i.Pa,this.i.Oc,this.nc,this.ob,this.random);this.ka.update(this.Bc,this.ob,this.audio,this.ec.Me.Pc,this.random);this.Eb.update(this.Bc,this.audio,this.ec.Me.Pc);this.i.kg.Qf(this.ob,this.i.Dd);this.i.di.Qf(this.Bc,this.i.Dd);1<(this.Xa+=this.$g)&&--this.Xa};d.v=function(a){for(this.time+=Math.min(this.zj,a);this.time>this.ra;)this.time-=this.ra,this.update();a=this.time/this.ra;this.Ta.v(a);this.Se&&(this.i.Uc.Ca(this.ka.filter),this.i.Zd.Ca(this.ka.filter),this.i.Kd.Ca(this.ka.filter));this.Pd.target();this.D.v(this.i.ue,this.i.Pa,a,!0);this.Pd.blur(this.i.blur);this.Re.target();this.background.v();this.i.$f.v(this.Pd,this.i.height,this.scale);this.D.v(this.i.ue,this.i.Pa,a,!1,!1);var b=this.i;b.a.bindFramebuffer(b.a.FRAMEBUFFER,null);b.a.viewport(0,0,b.width,b.height);this.i.a.clearColor(this.Ye.r*this.ka.filter.r,this.Ye.C*this.ka.filter.C,this.Ye.B*this.ka.filter.B,1);this.i.a.clear(this.i.a.COLOR_BUFFER_BIT|this.i.a.DEPTH_BUFFER_BIT);this.i.a.enable(this.i.a.DEPTH_TEST);this.ec.v(this.i.Zd,this.i.Uc,this.Bc,a);this.i.Kd.v(this.Re.L,this.Sf.L,this.ob,this.i.width,this.i.height,this.scale,this.Xa+a*this.$g,a);this.Se=this.ka.v(this.i.Bf,a);this.i.a.disable(this.i.a.DEPTH_TEST);this.Eb.v(this.i.ue,this.i.Pa,this.D.width,this.D.height,a)};d.c=function(){yf(this)};function Bf(a){this.bb=(a=void 0===a?null:a)?Cf(a):[];this.Ub=0}Bf.prototype.toString=function(){return btoa(String.fromCharCode.apply(String,ba(this.bb)))};function Cf(a){return atob(a).split("").map(function(b){return b.charCodeAt(0)})}function S(a){return a.bb[a.Ub++]}function Df(a,b){a.bb.push(b&255);a.bb.push(b>>8&255);a.bb.push(b>>16&255);a.bb.push(b>>24&255)}function jd(a,b){a.bb.push(b&255);a.bb.push(b>>8&255)}function R(a,b){a.bb.push(b&255)}function Da(a,b){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=b;Df(a,(new Int32Array(c))[0])}function Ef(a){return S(a)|S(a)<<8|S(a)<<16|S(a)<<24}function Ff(a){a=Ef(a);return 0>a?2147483648+(a&2147483647):a}function id(a){return S(a)|S(a)<<8}function Ea(a){var b=new ArrayBuffer(4);(new Int32Array(b))[0]=Ef(a);return(new Float32Array(b))[0]}function Gf(){var a=void 0===a?new ua:a;var b=void 0===b?Math.floor(Math.random()*ua.prototype.je):b;this.random=a;this.zd=b;this.buffer=null}function Hf(){var a=If,b=Jf,c=new za(b,a.zd,a.random);if(a.buffer)c.O(a.buffer),b.O(a.buffer),a.buffer=null;else for(a=0;1500>a;++a)c.update();return c}Gf.prototype.O=function(a){this.buffer=a;this.random.O(a);this.zd=Ff(a)};Gf.prototype.m=function(a,b){var c=new Bf;this.random.m(c);Df(c,this.zd);a.m(c);b.m(c);return c};function Zd(a,b,c){this.width=a;this.height=b;this.Km=c;this.values=Array((a+2)*(b+2));for(a=0;a<this.values.length;++a)this.values[a]=q(c)}Zd.prototype.za=function(a,b,c,e,f){e=e-c-(a-b);return f*(f*(f*e+(a-b-e))+(c-a))+b};Zd.prototype.g=function(a,b){var c=Math.floor(a),e=Math.floor(b);return.5*this.za(this.za(this.values[e*this.width+c],this.values[e*this.width+c+1],this.values[e*this.width+c+2],this.values[e*this.width+c+3],a-c),this.za(this.values[(e+1)*this.width+c],this.values[(e+1)*this.width+c+1],this.values[(e+1)*this.width+c+2],this.values[(e+1)*this.width+c+3],a-c),this.za(this.values[(e+2)*this.width+c],this.values[(e+2)*this.width+c+1],this.values[(e+2)*this.width+c+2],this.values[(e+2)*this.width+c+3],a-c),this.za(this.values[(e+3)*this.width+c],this.values[(e+3)*this.width+c+1],this.values[(e+3)*this.width+c+2],this.values[(e+3)*this.width+c+3],a-c),b-e)+.25};function ua(a){this.n=a=void 0===a?Math.floor(Math.random()*ua.prototype.je):a}d=ua.prototype;d.ck=69069;d.je=Math.pow(2,32);d.Sj=1;function q(a){a.n=(a.ck*a.n+a.Sj)%a.je;return a.n/a.je}d.m=function(a){Df(a,this.n)};d.O=function(a){this.n=Ff(a)};var Yf={alpha:!1,antialias:!0,preserveDrawingBuffer:!0},Y=document.getElementById("renderer"),ac=Y.getContext("webgl",Yf)||Y.getContext("experimental-webgl",Yf);if(ac){ac.b=ac.getExtension("OES_vertex_array_object");ac.getExtension("OES_element_index_uint");var If=new Gf,bc=document.getElementById("wrapper"),Jf=new Pe,Zf=window.localStorage.getItem("session"),vf=new $b,ya=new ta,wf=new wa,$f=null,Af=null,ag=!0,bg=!1;Y.width=bc.clientWidth;Y.height=bc.clientHeight;window.onresize=function(){if(Y.width!==bc.offsetWidth||Y.height!==bc.offsetHeight)Y.width=bc.offsetWidth,Y.height=bc.offsetHeight,vf.resize(Y.width,Y.height),Jf.resize(),Af&&Af.resize()};var cg=function(){window.localStorage.setItem("session",If.m(Af,Jf).toString())};if(Zf)try{If.O(new Bf(Zf)),Af=Hf()}catch(a){Jf.clear(),If=new Gf,Af=Hf(),console.warn(a)}else If=new Gf,Af=Hf();$f=new Date;var dg=function(){if(ag){var a=new Date;Af.v(.001*(a-$f));$f=a;requestAnimationFrame(dg)}};requestAnimationFrame(dg);setInterval(function(){document.hidden||cg()},6E4);Y.addEventListener("mousedown",function(a){ya.He();a.preventDefault();zf(a.clientX,a.clientY)});Y.addEventListener("touchstart",function(a){ya.He();a.preventDefault();zf(a.changedTouches[0].clientX,a.changedTouches[0].clientY)});Y.addEventListener("mousemove",function(a){Af.Xd(a.clientX,a.clientY,bg);bg=!1});Y.addEventListener("touchmove",function(a){a.preventDefault();Af.Xd(a.changedTouches[0].clientX,a.changedTouches[0].clientY)});Y.addEventListener("mouseup",Af.eg.bind(Af));Y.addEventListener("touchend",function(a){a.preventDefault();Af.eg()});Y.addEventListener("mouseleave",function(){bg=!0});window.onbeforeunload=function(){cg();Af.c();vf.c();ag=!1}};</script></body></html>