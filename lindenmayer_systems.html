<!DOCTYPE html>
<html>
	<head>
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-109031298-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'UA-109031298-1');
		</script>
		<script src="posts/2017_11_12/js/lindenmayer.js"></script><script src="posts/2017_11_12/js/presets.js"></script>
		<title>Job Talle | Lindenmayer systems</title>
		<meta charset="UTF-8">
		<meta name="description" content="Lindenmayer systems (or L-systems) can be used to produce intricate patterns by repeatedly applying simple rules. Rendering these systems results in interesting fractals that can be useful in procedural generation."/>
		<meta name="keywords" content="game development, AI, algorithms, programming, job talle"/>
		<meta name="author" content="Job Talle"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta property="og:locale" content="en_US"/>
		<meta property="og:title" content="Lindenmayer systems"/><meta property="og:url" content="http://jobtalle.com/lindenmayer_systems.html"/><meta property="og:description" content="Lindenmayer systems (or L-systems) can be used to produce intricate patterns by repeatedly applying simple rules. Rendering these systems results in interesting fractals that can be useful in procedural generation."/><meta property="og:image" content="http://jobtalle.com/posts/2017_11_12/img/preview.jpg"/>
		<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet"/>
		<link rel="shortcut icon" type="image/gif" href="img/favicon.gif"/>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<link rel="stylesheet" type="text/css" href="posts/2017_11_12/css/style.css">
	</head>
	<body>
		<div id="container">
			<div id="menu-wrapper"><div id="menu-buttons"><a href="index.html"><div class="menu-button">Blog</div></a><a href="about.html"><div class="menu-button">About</div></a><a href="contact.html"><div class="menu-button">Contact</div></a></div></div>
			<div id="wrapper" class="container">
				<div id="header">
					<h1>Job Talle</h1>
					<h2>On game development, AI & Algorithms</h2>
				</div>
				<div id="content"><h1>Lindenmayer systems</h1><span class="date">12 Nov 2017</span><p><h2>Natural patterns</h2>
<p>Lindenmayer systems were originally conceived by Hungarian biologist Aristid Lindenmayer while studying algae growth. He developed L-systems as a way to describe the growth process. The result was a type of language in which these recursive properties can be expressed. Indeed, L-systems can be used to generate natural patterns, but well known mathematical patterns can also be written as an L-system. I will show examples of both cases in this article.</p>
<p>The language is very simple. It consists of symbols (the alphabet) and rules. The first state of the sentence is called the <em>axiom</em>. The rules can be applied repeatedly on this axiom to obtain a complex system. A simple example would be a system with the axiom <code>A</code>, and the rule <code>A = ABA</code>. After the first iteration (the first time the rule is applied), the sentence will be changed to <code>ABA</code>. After the second iteration, the sentence will be <code>ABABABA</code> and so forth. You can see how a self expanding sentence can be analogous to cell division in plants and other biological processes.</p>
<figure>
	<table class="alphabet">
		<tr>
			<td><pre>[A...Z]</pre></td>
			<td>Any letter in the alphabet will move the turtle forwards for a fixed distance</td>
		</tr>
		<tr>
			<td><pre>+</pre></td>
			<td>Turn the turtle to the right for a fixed amount of degrees</td>
		</tr>
		<tr>
			<td><pre>-</pre></td>
			<td>Turn the turtle to the left for a fixed amount of degrees</td>
		</tr>
		<tr>
			<td><pre>[</pre></td>
			<td>Push the current turtle position and direction on to a stack</td>
		</tr>
		<tr>
			<td><pre>]</pre></td>
			<td>Pop the last turtle position from the stack and move the turtle to this position</td>
		</tr>
	</table>
	<figcaption>Figure 1: Alphabet for drawing a 2D Lindenmayer system</figcaption>
</figure>
<h2>Rendering sentences</h2>
<p>After a system has been defined and iterated, we have a large sentence with interesting properties. To visualize these properties, a method to render them needs to be devised. In this article, I render the system using turtle graphics.</p>
<p>Turtle graphics are rendered by placing a "turtle" on a cartesian plane and passing instructions to this turtle. The turtle moves according to the instructions it receives. In this case, every symbol from an L-system sentence is sent to the turtle. In the short example above, my sentence is a bit simple. It only contains letters. It is hard to translate a string of letters to interesting turtle instructions. Therefore, special symbols are defined to encode turtle commands. Figure 1 shows the key for my turtle language.</p>
<p>I added an interactive L-system renderer below. A number of examples are provided, but custom systems can be defined for up to six rules. Note that I added the field <em>constants</em>, which can contain a string of symbols. When the turtle renders a string, symbols that are constants will be ignored. Symbols that are constants are still subject to the rules. The field <em>angle</em> denotes the number of degrees the turtle will rotate when either <code>+</code> or <code>-</code> is encountered. In the rule fields, the constant <code>AXIOM</code> can be used. It will be replaced by the original axiom. This is used in several examples.</p>
<div class="full-width">
	<canvas id="l-renderer" width=500 height=400></canvas>
	<div id="l-controls">
		<table>
			<tr>
				<td>Preset:</td>
				<td>
					<select id="l-preset" onchange="preset()" value="">
						<option value="l-preset-plant">Plant</option>
						<option value="l-preset-plant-2">Plant 2</option>
						<option value="l-preset-koch-snowflake">Koch snowflake</option>
						<option value="l-preset-sierpinski-arrowhead-curve">Sierpinsky arrowhead curve</option>
						<option value="l-preset-hilbert-curve">Hilbert curve</option>
						<option value="l-gosper-curve">Gosper curve</option>
						<option value="l-preset-mosaic">Mosaic</option>
						<option value="l-preset-squares-fractal">Squares fractal</option>
					</select>
				</td>
				<td/>
			</tr>
			<tr>
				<td>Axiom:</td>
				<td><input id="l-axiom" type="text" value="B[+A][-A]BA"></input></td>
			</tr>
			<tr>
				<td>Angle:</td>
				<td><input id="l-angle" type="text" value="26"></input></td>
			</tr>
			<tr>
				<td>Constants:</td>
				<td><input id="l-constants" type="text"></input></td>
			</tr>
			<tr>
				<td>Iterations:</td>
				<td><input id="l-iterations" type="text" value="6"></input></td>
			</tr>
			<tr>
				<td>Rule 1:</td>
				<td><input id="l-rule-1" type="text" value="A=AXIOM"></input></td>
			</tr>
			<tr>
				<td>Rule 2:</td>
				<td><input id="l-rule-2" type="text" value="B=BB"></input></td>
			</tr>
			<tr>
				<td>Rule 3:</td>
				<td><input id="l-rule-3" type="text"></input></td>
			</tr>
			<tr>
				<td>Rule 4:</td>
				<td><input id="l-rule-4" type="text"></input></td>
			</tr>
			<tr>
				<td>Rule 5:</td>
				<td><input id="l-rule-5" type="text"></input></td>
			</tr>
			<tr>
				<td>Rule 6:</td>
				<td><input id="l-rule-6" type="text"></input></td>
			</tr>
			<tr>
				<td/>
				<td><button id="l-render" onclick="render();">Render</button></td>
			</tr>
		</table>
	</div>
</div>
<p>The source code for this javascript example can be found <a href="https://github.com/jobtalle/LindenmayerSystems" target="_blank">in this repository</a>. The provided example systems show some possibilities of Lindenmayer systems, ranging from noisy random-like patterns to rigid geometric patterns. All systems show self-similarity; when the number of iterations becomes high, the small details they produce are no longer noticable. In theory however, one could zoom in indefinitely while increasing precision along the way. This is a well known property of <em>fractals</em>. Zooming in on fractals will often uncover patterns that were also visible at larger scales.</p>
<h2>Adding dimensions</h2>
<p>The example above is fully capable of demonstrating Lindenmayer systems, but I'd like to add a few more features to make the algorithm more powerful. I'm personally very interested in using L-systems to generate plants and natural systems. A very interesting source of information I've used for this phase is <a href="http://algorithmicbotany.org/" target="_blank">the website of the Biological Modeling and Visualization research group</a> at the university of Calgary. There are many papers available on this topic, which can be found at their website. I'd like to keep my system as simple as possible, but a small number of powerful features can greatly improve the outcomes. I settled on the following list of improvements:</p>
<ul>
	<li>Symbols have an age equal to the number of iterations they exist</li>
	<li>The turtle keeps track of the distance to the root, which is equal to the number of symbols between the root of the system and the current symbol</li>
	<li>The turtle moves in three dimensions, which allows for more complex shapes</li>
</ul>
<p>The age feature is especially useful for plant modelling. I could for example make a rule which will only be applied to cells between 3 and 4 iterations old, or I could only let young plant parts develop while keeping the old stem of the plant bare. Another extra possibility is defining a thickness graph for rendering; the age will determine the thickness of a rendered cell.</p>
<p>The distance to the root is analogous to a well known property of plants. The water and nutrients in a plant can only be transported for a limited distance. I can stop developing new branches when not enough nutrients can be transported to that point. Finally, plants that are too high can easily break under the influence of wind. I can use the distance to the root to determine how "strong" a plant is when confronted with weather and prevent plants from developing weak structures.</p><div id="tags"><a href="tag_interactive.html" title="Show posts tagged with 'Interactive'"><div class="post-tag round-button">Interactive</div></a><a href="tag_procedural_generation.html" title="Show posts tagged with 'Procedural generation'"><div class="post-tag round-button">Procedural generation</div></a><a href="tag_source_included.html" title="Show posts tagged with 'Source included'"><div class="post-tag round-button">Source included</div></a></div></div>
				<div id="content-footer"></div>
				<div id="footer">&copy Job Talle </div>
				<div id="icons">
					<a href="contact.html"><div class="icon" id="icon-mail" title="Mail"></div></a>
					<a href="http://www.github.com/jobtalle" target="_blank"><div class="icon" id="icon-github" title="Github"></div></a>
					<a href="http://www.linkedin.com/in/job-talle-b2b582aa" target="_blank"><div class="icon" id="icon-linkedin" title="LinkedIn"></div></a>
				</div>
			</div>
		</div>
		
		<script>
			var result = 2017;
			var currentYear = new Date().getFullYear();
			
			if(currentYear > result)
				result += " - " + currentYear;
			
			document.getElementById("footer").innerHTML += result;
		</script>
	</body>
</html>